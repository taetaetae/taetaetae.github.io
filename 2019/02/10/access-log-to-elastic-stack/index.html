<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>ëˆ„êµ¬ë‚˜ í•  ìˆ˜ ìˆëŠ” ì—‘ì„¸ìŠ¤ ë¡œê·¸ ë¶„ì„ ë”°ë¼ í•´ë³´ê¸° (by Elastic Stack) -</title><meta property="og:url" content="https://taetaetae.github.io/2019/02/10/access-log-to-elastic-stack/"><meta property="og:site_name" content="My cool site"><meta property="og:title" content="ëˆ„êµ¬ë‚˜ í•  ìˆ˜ ìˆëŠ” ì—‘ì„¸ìŠ¤ ë¡œê·¸ ë¶„ì„ ë”°ë¼ í•´ë³´ê¸° (by Elastic Stack)"><meta property="og:description" content="í•„ìê°€ Elastic Stackì„ ì•Œê²Œëœê±´ 2017ë…„ ì–´ëŠ ì—¬ë¦„ ë™ê¸°í˜•ì´ ê³µë¶€í•˜ê³  ìˆëŠ”ê²ƒì„ ë³´ê³  í˜¸ê¸°ì‹¬ì— ë”°ë¼í•˜ë©° ì‹œì‘í•˜ê²Œ ë˜ì—ˆë‹¤. ê·¸ë•Œê¹Œì§€ë§Œ í•´ë„ ë²„ì „ì´ 2.x ì˜€ëŠ”ë° ì§€ê¸ˆ ê¸€ì„ ì“°ê³ ìˆëŠ” 2019ë…„ 2ì›”ì´ˆ ìµœì‹ ë²„ì „ì´ 6.6ì´ë‹ˆ ì •ë§ ë¹ ë¥´ê²Œ ë³€í™”í•˜ëŠ”ê²ƒ ê°™ë‹¤. ë¹ ë¥´ê²Œ ë³€í™”í•˜ëŠ” ë²„ì „ë§Œí¼ ì‚¬ëŒë“¤ì˜ ê´€ì‹¬ë„ (ë“œë¼ë§ˆí‹±í•˜ê²ŒëŠ” ì•„ë‹ˆì§€ë§Œ) ê¾¸ì¤€íˆ ëŠ˜ì–´ë‚˜ ê°œì¸ì ìœ¼ë¡œ, ê·¸ë¦¬ê³  ì‹¤ë¬´ì—ì„œë„ í™œìš©í•˜ëŠ” ë²”ìœ„ê°€ ë§ì•„ì§€ê³  ìˆëŠ”ê²ƒ ê°™ë‹¤.
ê·¸ë˜ì„œ ê·¸ëŸ°ì§€ ìµœê·¼ë“¤ì–´ (ì•„ì£¼ ì½”ë”±ì§€ë§Œí¼ ì¡°ê¸ˆì´ë¼ë„ ë” í•´ë³¸) í•„ìì—ê²Œ Elastic Stack ì‚¬ìš©ë°©ë²•ì— ëŒ€í•´ ë¬¼ì–´ë³´ëŠ” ì£¼ë³€ ì§€ì¸ë“¤ì´ ëŠ˜ì–´ë‚˜ê³  ìˆë‹¤. ê·¸ë¦¬ê³  ì˜ˆì „ì— í•œì°½ ê³µë¶€í–ˆì„ë•Œì˜ ë²„ì „ë³´ë‹¤ ë§ì´ ë°”ê¼ˆê¸°ì— ì´ ê¸°íšŒì— â€œê·¸ëŒ€ë¡œ ë”°ë¼ë§Œ í•˜ë©´ Elastic Stackì„ êµ¬ì„±í•  ìˆ˜ ìˆì„ë§Œí•œ ê¸€&#34;ì„ ì¨ë³´ê³ ì í•œë‹¤. ì‚¬ì‹¤ í•„ìê°€ ì˜ˆì „ì— â€œë„íë¨¼íŠ¸ë¥¼ ë³´ê¸°ì—” ë„ˆë¬´ ì–´ë ¤ì›Œ ë³´ì´ëŠ” ëŠë‚Œì ì¸ ëŠë‚Œâ€ ë•Œë¬¸ì— ì‚½ì§ˆí•˜ë©° êµ¬ì„±í•œ í˜ë“¤ì—ˆë˜ ê¸°ì–µì„ ë˜ì‚´ë ¤ ìµœëŒ€í•œ ì‹¬í”Œí•˜ê³  ì²˜ìŒ í•´ë³´ëŠ” ì‚¬ëŒë„ ë”°ë¼í•˜ê¸°ë§Œ í•˜ë©´ â€œì•„~ ì´ê²Œ Elastic Stack ì´êµ¬ë‚˜!â€, â€œì´ëŸ°ì‹ìœ¼ë¡œ ëŒì•„ê°€ëŠ” ê±°êµ¬ë‚˜!â€ í•˜ëŠ” ë„ì›€ì„ ì£¼ê³  ì‹¶ë‹¤.
+ ê·¸ëŸ¬ë©´ì„œ ìµœì‹ ë²„ì „ë„ ì‚´í´ë³´ê³ â€¦ 1ì„2ì¡°, ì´ëŸ°ê²Œ ë°”ë¡œ ë¸”ë¡œê·¸ë¥¼ í•˜ëŠ” ì´ìœ ì´ì§€ ì•Šì„ê¹Œ? ë‹¤ì‹œí•œë²ˆ ë§í•˜ì§€ë§Œ ë„íë¨¼íŠ¸ê°€ ìµœê³  ì§€ì¹¨ì„œì´ê¸´ í•˜ë‹¤â€¦
Elastic ê³µì‹ í™ˆí˜ì´ì§€ì— ê°€ë©´ ê° ì œí’ˆêµ°ë“¤ì— ëŒ€í•´ ê·¸ë¦¼ìœ¼ë¡œ ëœ ìì„¸í•œ ì„¤ëª…ê³¼ ë„íë¨¼íŠ¸ê°€ ìˆì§€ë§Œ ì´ë“¤ì„ ì–´ë–¤ì‹ìœ¼ë¡œ ì¡°í•©í•˜ì—¬ ì‚¬ìš©í•˜ëŠ”ì§€ì— ëŒ€í•œ ì „ì²´ì ì¸ íë¦„ì„ ë³¼ ìˆ˜ ìˆëŠ” ê³³ì€ ì—†ì–´ ë³´ì¸ë‹¤. (ì§€ê¸ˆ ë³´ë©´ ë„íë¨¼íŠ¸ê°€ ê·¸ ì–´ë””ë³´ë‹¤ ì„¤ëª…ì´ ì˜ë˜ì–´ ìˆë‹¤ê³  ìƒê°ë˜ì§€ë§Œ ì‚¬ì „ ì§€ì‹ì´ ì „í˜€ì—†ëŠ” ìƒíƒœì—ì„œëŠ” ë´ë„ë´ë„ ì–´ë ¤ì›Œ ë³´ì˜€ë‹¤.) ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Apache access logë¥¼ Elasticsearchì— ì¸ë±ì‹± í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì„¤ëª…í•´ë³´ê³ ì í•œë‹¤.
ì „ì²´ì ì¸ íë¦„ í•„ìëŠ” ê¸€ë³´ë‹¤ëŠ” ê·¸ë¦¼ì„ ì¢‹ì•„í•˜ëŠ” í¸ì´ë¼ ì „ì²´ì ì¸ íë¦„ì„ ê·¸ë¦¼ìœ¼ë¡œ ë¨¼ì € ë³´ì.
ì™¸ë¶€ì—ì„œì˜ ì ‘ê·¼ì´ ë°œìƒí•˜ë©´ apache ì›¹ì„œë²„ì—ì„œ ì„¤ì •í•œ ê²½ë¡œì— access logê°€ íŒŒì¼ë¡œ ìƒì„±ì´ ë˜ê±°ë‚˜ ìˆëŠ” íŒŒì¼ì— ì¶”ê°€ê°€ ëœë‹¤. í•´ë‹¹ íŒŒì¼ì—ëŠ” í•œì¤„ë‹¹ í•˜ë‚˜ì˜ ì—‘ì„¸ìŠ¤ ì •ë³´ê°€ ë‚¨ê²Œ ëœë‹¤. fileBeatì—ì„œ í•´ë‹¹ íŒŒì¼ì„ íŠ¸ë˜í‚¹ í•˜ê³  ìˆë‹¤ê°€ ë¼ì¸ì´ ì¶”ê°€ë˜ë©´ ì´ ì •ë³´ë¥¼ logstash ì—ê²Œ ì „ë‹¬í•´ì¤€ë‹¤. logastsh ëŠ” filebeatì—ì„œ ì „ë‹¬í•œ ì •ë³´ë¥¼ íŠ¹ì • portë¡œ input ë°›ëŠ”ë‹¤. ë°›ì€ ì •ë³´ë¥¼ filter ê³¼ì •ì„ í†µí•´ ê° ì •ë³´ë¥¼ ë¶„í•  ë° ì •ì œí•œë‹¤. (ip, uri, time ë“±) ì •ë¦¬ëœ ì •ë³´ë¥¼ elasticsearch ì— ouput ìœ¼ë¡œ ë³´ë‚¸ë‹¤. (ì •í™•íˆ ë§í•˜ë©´ ì¸ë±ì‹±ì„ í•œë‹¤.) elasticsearch ì— ì¸ë±ì‹± ëœ ì •ë³´ë¥¼ í‚¤ë°”ë‚˜ë¥¼ í†µí•´ ì†ì‰½ê²Œ ë¶„ì„ì„ í•œë‹¤. í•œë²ˆì˜ ì„¤ì¹˜ê³  ì¼ë ¨ì˜ ê³¼ì •ì´ ëšë”± ëœë‹¤ë©´ ë„ˆë¬´ í¸í•˜ê² ì§€ë§Œ, ê°ê°ì˜ ë ˆì´ì–´ê°€ ë‚˜ë‰˜ì–´ì ¸ìˆëŠ” ì´ìœ ëŠ” í•˜ëŠ” ì—­í™œì´ ì „ë¬¸ì ìœ¼ë¡œ(?) ë‚˜ë‰˜ì–´ì ¸ ìˆê³  ê° ë ˆì´ì–´ì—ì„œëŠ” ì„¸ë¶€ ì„¤ì •ì„ í†µí•´ ë³´ë‹¤ íš¨ìœ¨ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.
beatsë¼ëŠ” ë ˆì´ì–´ê°€ ë‚˜ì˜¤ê¸° ì „ì—ëŠ” logstashì—ì„œ ì§ì ‘ fileì„ ë°”ë¼ë³´ê³¤ í–ˆì—ˆëŠ”ë° beatsê°€ logstash ë³´ë‹¤ ê°€ë²¼ìš´ shipper ëª©ì ìœ¼ë¡œ ë‚˜ì˜¨ agent ì´ë‹¤ë³´ë‹ˆ í†µìƒ logstash ì•ë‹¨ì— filebeatë¥¼ ìœ„ì¹˜ì‹œí‚¤ê³¤ í•œë‹¤ê³  í•œë‹¤.
ì „ì²´ì ì¸ ê·¸ë¦¼ì€ ìœ„ì™€ ê°™ê³ , ì´ì œ ì´ ê¸€ì„ ë³´ê³ ìˆëŠ” ì—¬ëŸ¬ë¶„ë“¤ì´ ë”°ë¼í•  ì°¨ë¡€ì´ë‹¤. ê° ë ˆì´ì–´ë³„ë¡œ í•˜ë‚˜ì”© ì„¤ì¹˜ë¥¼ í•´ë³´ë©° êµ¬ì„±ì„ í•´ë³´ì. ì„¤ì¹˜ìˆœì„œëŠ” ë°ì´í„° íë¦„ì˜ ìˆœì„œì— ë§ì¶° ë‹¤ìŒê³¼ ê°™ì€ ìˆœì„œë¡œ ì„¤ì¹˜ë¥¼ í•´ì•¼ íš¨ìœ¨ì ìœ¼ë¡œ ë³¼ìˆ˜ê°€ ìˆë‹¤. (ì•„ë˜ìˆœì„œëŒ€ë¡œ í•˜ì§€ ì•Šì„ê²½ìš° ì„¤ì¹˜/ì‹œì‘/ì¢…ë£Œ ë¥¼ ê°ê°ì˜ íƒ€ì´ë°ì— ë§ì¶”ì–´ í•´ì¤˜ì•¼ í• ê²ƒ ê°™ì•„ ë³µì¡í• ê²ƒê°™ë‹¤.)
elasticsearch â†’ logstash â†’ kibana â†’ filebeat ì´ í¬ìŠ¤íŒ…ì€ CentOS 7.4ì—ì„œ Java 1.8, apache 2.2ê°€ ì„¤ì¹˜ë˜ì–´ìˆë‹¤ëŠ” ê°€ì •í•˜ì— ë³´ë©´ ë ë“¯í•˜ë‹¤. ë˜í•œ ê° ë ˆì´ì–´ë³„ ì„¤ëª…ì€ êµ¬ê¸€ë§ì„ í•˜ê±°ë‚˜ Elastic ê³µì‹ í™ˆí˜ì´ì§€ì— ê°€ë³´ë©´ ìì„¸íˆ ë‚˜ì™€ìˆìœ¼ë‹ˆ ê¸°ë³¸ ì„¤ëª…ì€ ì•ˆí•˜ëŠ”ê²ƒìœ¼ë¡œ í•˜ê³ , ê° ë ˆì´ì–´ì˜ ì„¸ë¶€ ì„¤ì •ì€ í•˜ì§€ ì•ŠëŠ”ê²ƒìœ¼ë¡œ í•œë‹¤.
Elasticsearch ê³µì‹ í™ˆí˜ì´ì§€
ë‹¤ìš´ë°›ê³  ì••ì¶•í’€ê³  ì‹¬ë³¼ë¦­ ê²½ë¡œ ë§Œë“¤ê³  (ì‹¬ë³¼ë¦­ ê²½ë¡œëŠ” ì„ íƒì‚¬í•­) $ wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.6.0.tar.gz $ tar zxvf elasticsearch-6.6.0.tar.gz $ ln -s elasticsearch-6.6.0 elasticsearch ì„¤ì • íŒŒì¼ì„ ì—´ê³  ì¶”ê°€í•´ì¤€ë‹¤. $ cd elasticsearch/conf $ vi elasticsearch.yml path.data: /~~~/data/elasticsearch (ê¸°ë³¸ê²½ë¡œì—ì„œ ë³€ê²½í• ë•Œì¶”ê°€) path.logs: /~~~/logs/elasticsearch network.host: 0.0.0.0 # ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ (ì‹¤ì œ ipë¥¼ ì ì–´ì¤˜ë„ ë¨) elasticsearch ì˜ ì‹œì‘ê³¼ ì¢…ë£Œë¥¼ ì¡°ê¸ˆì´ë‚˜ë§ˆ í¸í•˜ê²Œ í•˜ê¸°ìœ„í•´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•´ì¤Œ (ì´ê²ƒë˜í•œ ì„ íƒì‚¬í•­) $ cd ../bin $ echo './elasticsearch -d -p es.pid' > start.sh $ echo 'kill `cat es.pid`' > stop.sh $ chmod 755 start.sh stop.sh í˜¹ì‹œ ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí• ê²½ìš° ê³µì‹ë¬¸ì„œ ëŒ€ë¡œ ì§„í–‰í•´ì¤€ë‹¤."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-02-10T14:37:31+00:00"><meta property="article:modified_time" content="2019-02-10T14:37:31+00:00"><meta property="article:tag" content="Elasticsearch"><meta property="article:tag" content="Logstash"><meta property="article:tag" content="Kibana"><meta property="article:tag" content="Filebeat"><meta property="article:tag" content="Archives-2019"><meta property="og:image" content="https://taetaetae.github.io/images/access-log-to-elastic-stack/elastic_stack.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://taetaetae.github.io/images/access-log-to-elastic-stack/elastic_stack.jpg"><meta name=twitter:title content="ëˆ„êµ¬ë‚˜ í•  ìˆ˜ ìˆëŠ” ì—‘ì„¸ìŠ¤ ë¡œê·¸ ë¶„ì„ ë”°ë¼ í•´ë³´ê¸° (by Elastic Stack)"><meta name=twitter:description content="í•„ìê°€ Elastic Stackì„ ì•Œê²Œëœê±´ 2017ë…„ ì–´ëŠ ì—¬ë¦„ ë™ê¸°í˜•ì´ ê³µë¶€í•˜ê³  ìˆëŠ”ê²ƒì„ ë³´ê³  í˜¸ê¸°ì‹¬ì— ë”°ë¼í•˜ë©° ì‹œì‘í•˜ê²Œ ë˜ì—ˆë‹¤. ê·¸ë•Œê¹Œì§€ë§Œ í•´ë„ ë²„ì „ì´ 2.x ì˜€ëŠ”ë° ì§€ê¸ˆ ê¸€ì„ ì“°ê³ ìˆëŠ” 2019ë…„ 2ì›”ì´ˆ ìµœì‹ ë²„ì „ì´ 6.6ì´ë‹ˆ ì •ë§ ë¹ ë¥´ê²Œ ë³€í™”í•˜ëŠ”ê²ƒ ê°™ë‹¤. ë¹ ë¥´ê²Œ ë³€í™”í•˜ëŠ” ë²„ì „ë§Œí¼ ì‚¬ëŒë“¤ì˜ ê´€ì‹¬ë„ (ë“œë¼ë§ˆí‹±í•˜ê²ŒëŠ” ì•„ë‹ˆì§€ë§Œ) ê¾¸ì¤€íˆ ëŠ˜ì–´ë‚˜ ê°œì¸ì ìœ¼ë¡œ, ê·¸ë¦¬ê³  ì‹¤ë¬´ì—ì„œë„ í™œìš©í•˜ëŠ” ë²”ìœ„ê°€ ë§ì•„ì§€ê³  ìˆëŠ”ê²ƒ ê°™ë‹¤.
ê·¸ë˜ì„œ ê·¸ëŸ°ì§€ ìµœê·¼ë“¤ì–´ (ì•„ì£¼ ì½”ë”±ì§€ë§Œí¼ ì¡°ê¸ˆì´ë¼ë„ ë” í•´ë³¸) í•„ìì—ê²Œ Elastic Stack ì‚¬ìš©ë°©ë²•ì— ëŒ€í•´ ë¬¼ì–´ë³´ëŠ” ì£¼ë³€ ì§€ì¸ë“¤ì´ ëŠ˜ì–´ë‚˜ê³  ìˆë‹¤. ê·¸ë¦¬ê³  ì˜ˆì „ì— í•œì°½ ê³µë¶€í–ˆì„ë•Œì˜ ë²„ì „ë³´ë‹¤ ë§ì´ ë°”ê¼ˆê¸°ì— ì´ ê¸°íšŒì— â€œê·¸ëŒ€ë¡œ ë”°ë¼ë§Œ í•˜ë©´ Elastic Stackì„ êµ¬ì„±í•  ìˆ˜ ìˆì„ë§Œí•œ ê¸€&#34;ì„ ì¨ë³´ê³ ì í•œë‹¤. ì‚¬ì‹¤ í•„ìê°€ ì˜ˆì „ì— â€œë„íë¨¼íŠ¸ë¥¼ ë³´ê¸°ì—” ë„ˆë¬´ ì–´ë ¤ì›Œ ë³´ì´ëŠ” ëŠë‚Œì ì¸ ëŠë‚Œâ€ ë•Œë¬¸ì— ì‚½ì§ˆí•˜ë©° êµ¬ì„±í•œ í˜ë“¤ì—ˆë˜ ê¸°ì–µì„ ë˜ì‚´ë ¤ ìµœëŒ€í•œ ì‹¬í”Œí•˜ê³  ì²˜ìŒ í•´ë³´ëŠ” ì‚¬ëŒë„ ë”°ë¼í•˜ê¸°ë§Œ í•˜ë©´ â€œì•„~ ì´ê²Œ Elastic Stack ì´êµ¬ë‚˜!â€, â€œì´ëŸ°ì‹ìœ¼ë¡œ ëŒì•„ê°€ëŠ” ê±°êµ¬ë‚˜!â€ í•˜ëŠ” ë„ì›€ì„ ì£¼ê³  ì‹¶ë‹¤.
+ ê·¸ëŸ¬ë©´ì„œ ìµœì‹ ë²„ì „ë„ ì‚´í´ë³´ê³ â€¦ 1ì„2ì¡°, ì´ëŸ°ê²Œ ë°”ë¡œ ë¸”ë¡œê·¸ë¥¼ í•˜ëŠ” ì´ìœ ì´ì§€ ì•Šì„ê¹Œ? ë‹¤ì‹œí•œë²ˆ ë§í•˜ì§€ë§Œ ë„íë¨¼íŠ¸ê°€ ìµœê³  ì§€ì¹¨ì„œì´ê¸´ í•˜ë‹¤â€¦
Elastic ê³µì‹ í™ˆí˜ì´ì§€ì— ê°€ë©´ ê° ì œí’ˆêµ°ë“¤ì— ëŒ€í•´ ê·¸ë¦¼ìœ¼ë¡œ ëœ ìì„¸í•œ ì„¤ëª…ê³¼ ë„íë¨¼íŠ¸ê°€ ìˆì§€ë§Œ ì´ë“¤ì„ ì–´ë–¤ì‹ìœ¼ë¡œ ì¡°í•©í•˜ì—¬ ì‚¬ìš©í•˜ëŠ”ì§€ì— ëŒ€í•œ ì „ì²´ì ì¸ íë¦„ì„ ë³¼ ìˆ˜ ìˆëŠ” ê³³ì€ ì—†ì–´ ë³´ì¸ë‹¤. (ì§€ê¸ˆ ë³´ë©´ ë„íë¨¼íŠ¸ê°€ ê·¸ ì–´ë””ë³´ë‹¤ ì„¤ëª…ì´ ì˜ë˜ì–´ ìˆë‹¤ê³  ìƒê°ë˜ì§€ë§Œ ì‚¬ì „ ì§€ì‹ì´ ì „í˜€ì—†ëŠ” ìƒíƒœì—ì„œëŠ” ë´ë„ë´ë„ ì–´ë ¤ì›Œ ë³´ì˜€ë‹¤.) ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Apache access logë¥¼ Elasticsearchì— ì¸ë±ì‹± í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì„¤ëª…í•´ë³´ê³ ì í•œë‹¤.
ì „ì²´ì ì¸ íë¦„ í•„ìëŠ” ê¸€ë³´ë‹¤ëŠ” ê·¸ë¦¼ì„ ì¢‹ì•„í•˜ëŠ” í¸ì´ë¼ ì „ì²´ì ì¸ íë¦„ì„ ê·¸ë¦¼ìœ¼ë¡œ ë¨¼ì € ë³´ì.
ì™¸ë¶€ì—ì„œì˜ ì ‘ê·¼ì´ ë°œìƒí•˜ë©´ apache ì›¹ì„œë²„ì—ì„œ ì„¤ì •í•œ ê²½ë¡œì— access logê°€ íŒŒì¼ë¡œ ìƒì„±ì´ ë˜ê±°ë‚˜ ìˆëŠ” íŒŒì¼ì— ì¶”ê°€ê°€ ëœë‹¤. í•´ë‹¹ íŒŒì¼ì—ëŠ” í•œì¤„ë‹¹ í•˜ë‚˜ì˜ ì—‘ì„¸ìŠ¤ ì •ë³´ê°€ ë‚¨ê²Œ ëœë‹¤. fileBeatì—ì„œ í•´ë‹¹ íŒŒì¼ì„ íŠ¸ë˜í‚¹ í•˜ê³  ìˆë‹¤ê°€ ë¼ì¸ì´ ì¶”ê°€ë˜ë©´ ì´ ì •ë³´ë¥¼ logstash ì—ê²Œ ì „ë‹¬í•´ì¤€ë‹¤. logastsh ëŠ” filebeatì—ì„œ ì „ë‹¬í•œ ì •ë³´ë¥¼ íŠ¹ì • portë¡œ input ë°›ëŠ”ë‹¤. ë°›ì€ ì •ë³´ë¥¼ filter ê³¼ì •ì„ í†µí•´ ê° ì •ë³´ë¥¼ ë¶„í•  ë° ì •ì œí•œë‹¤. (ip, uri, time ë“±) ì •ë¦¬ëœ ì •ë³´ë¥¼ elasticsearch ì— ouput ìœ¼ë¡œ ë³´ë‚¸ë‹¤. (ì •í™•íˆ ë§í•˜ë©´ ì¸ë±ì‹±ì„ í•œë‹¤.) elasticsearch ì— ì¸ë±ì‹± ëœ ì •ë³´ë¥¼ í‚¤ë°”ë‚˜ë¥¼ í†µí•´ ì†ì‰½ê²Œ ë¶„ì„ì„ í•œë‹¤. í•œë²ˆì˜ ì„¤ì¹˜ê³  ì¼ë ¨ì˜ ê³¼ì •ì´ ëšë”± ëœë‹¤ë©´ ë„ˆë¬´ í¸í•˜ê² ì§€ë§Œ, ê°ê°ì˜ ë ˆì´ì–´ê°€ ë‚˜ë‰˜ì–´ì ¸ìˆëŠ” ì´ìœ ëŠ” í•˜ëŠ” ì—­í™œì´ ì „ë¬¸ì ìœ¼ë¡œ(?) ë‚˜ë‰˜ì–´ì ¸ ìˆê³  ê° ë ˆì´ì–´ì—ì„œëŠ” ì„¸ë¶€ ì„¤ì •ì„ í†µí•´ ë³´ë‹¤ íš¨ìœ¨ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.
beatsë¼ëŠ” ë ˆì´ì–´ê°€ ë‚˜ì˜¤ê¸° ì „ì—ëŠ” logstashì—ì„œ ì§ì ‘ fileì„ ë°”ë¼ë³´ê³¤ í–ˆì—ˆëŠ”ë° beatsê°€ logstash ë³´ë‹¤ ê°€ë²¼ìš´ shipper ëª©ì ìœ¼ë¡œ ë‚˜ì˜¨ agent ì´ë‹¤ë³´ë‹ˆ í†µìƒ logstash ì•ë‹¨ì— filebeatë¥¼ ìœ„ì¹˜ì‹œí‚¤ê³¤ í•œë‹¤ê³  í•œë‹¤.
ì „ì²´ì ì¸ ê·¸ë¦¼ì€ ìœ„ì™€ ê°™ê³ , ì´ì œ ì´ ê¸€ì„ ë³´ê³ ìˆëŠ” ì—¬ëŸ¬ë¶„ë“¤ì´ ë”°ë¼í•  ì°¨ë¡€ì´ë‹¤. ê° ë ˆì´ì–´ë³„ë¡œ í•˜ë‚˜ì”© ì„¤ì¹˜ë¥¼ í•´ë³´ë©° êµ¬ì„±ì„ í•´ë³´ì. ì„¤ì¹˜ìˆœì„œëŠ” ë°ì´í„° íë¦„ì˜ ìˆœì„œì— ë§ì¶° ë‹¤ìŒê³¼ ê°™ì€ ìˆœì„œë¡œ ì„¤ì¹˜ë¥¼ í•´ì•¼ íš¨ìœ¨ì ìœ¼ë¡œ ë³¼ìˆ˜ê°€ ìˆë‹¤. (ì•„ë˜ìˆœì„œëŒ€ë¡œ í•˜ì§€ ì•Šì„ê²½ìš° ì„¤ì¹˜/ì‹œì‘/ì¢…ë£Œ ë¥¼ ê°ê°ì˜ íƒ€ì´ë°ì— ë§ì¶”ì–´ í•´ì¤˜ì•¼ í• ê²ƒ ê°™ì•„ ë³µì¡í• ê²ƒê°™ë‹¤.)
elasticsearch â†’ logstash â†’ kibana â†’ filebeat ì´ í¬ìŠ¤íŒ…ì€ CentOS 7.4ì—ì„œ Java 1.8, apache 2.2ê°€ ì„¤ì¹˜ë˜ì–´ìˆë‹¤ëŠ” ê°€ì •í•˜ì— ë³´ë©´ ë ë“¯í•˜ë‹¤. ë˜í•œ ê° ë ˆì´ì–´ë³„ ì„¤ëª…ì€ êµ¬ê¸€ë§ì„ í•˜ê±°ë‚˜ Elastic ê³µì‹ í™ˆí˜ì´ì§€ì— ê°€ë³´ë©´ ìì„¸íˆ ë‚˜ì™€ìˆìœ¼ë‹ˆ ê¸°ë³¸ ì„¤ëª…ì€ ì•ˆí•˜ëŠ”ê²ƒìœ¼ë¡œ í•˜ê³ , ê° ë ˆì´ì–´ì˜ ì„¸ë¶€ ì„¤ì •ì€ í•˜ì§€ ì•ŠëŠ”ê²ƒìœ¼ë¡œ í•œë‹¤.
Elasticsearch ê³µì‹ í™ˆí˜ì´ì§€
ë‹¤ìš´ë°›ê³  ì••ì¶•í’€ê³  ì‹¬ë³¼ë¦­ ê²½ë¡œ ë§Œë“¤ê³  (ì‹¬ë³¼ë¦­ ê²½ë¡œëŠ” ì„ íƒì‚¬í•­) $ wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.6.0.tar.gz $ tar zxvf elasticsearch-6.6.0.tar.gz $ ln -s elasticsearch-6.6.0 elasticsearch ì„¤ì • íŒŒì¼ì„ ì—´ê³  ì¶”ê°€í•´ì¤€ë‹¤. $ cd elasticsearch/conf $ vi elasticsearch.yml path.data: /~~~/data/elasticsearch (ê¸°ë³¸ê²½ë¡œì—ì„œ ë³€ê²½í• ë•Œì¶”ê°€) path.logs: /~~~/logs/elasticsearch network.host: 0.0.0.0 # ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ (ì‹¤ì œ ipë¥¼ ì ì–´ì¤˜ë„ ë¨) elasticsearch ì˜ ì‹œì‘ê³¼ ì¢…ë£Œë¥¼ ì¡°ê¸ˆì´ë‚˜ë§ˆ í¸í•˜ê²Œ í•˜ê¸°ìœ„í•´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•´ì¤Œ (ì´ê²ƒë˜í•œ ì„ íƒì‚¬í•­) $ cd ../bin $ echo './elasticsearch -d -p es.pid' > start.sh $ echo 'kill `cat es.pid`' > stop.sh $ chmod 755 start.sh stop.sh í˜¹ì‹œ ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí• ê²½ìš° ê³µì‹ë¬¸ì„œ ëŒ€ë¡œ ì§„í–‰í•´ì¤€ë‹¤."><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><meta name=naver-site-verification content="2d1cdbb963ba178aa7cbf58500afc668cae1e645"><meta name=google-site-verification content="vvFCdv0-GuQhEWG8vtNJfA7YSY2HYQ1hpHh9P-a6Pv8"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://taetaetae.github.io/2019/02/10/access-log-to-elastic-stack/><link rel=prev href=https://taetaetae.github.io/2019/01/10/spring-redirect-oom/><link rel=next href=https://taetaetae.github.io/2019/02/17/daily-dev-blog-3/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"ëˆ„êµ¬ë‚˜ í•  ìˆ˜ ìˆëŠ” ì—‘ì„¸ìŠ¤ ë¡œê·¸ ë¶„ì„ ë”°ë¼ í•´ë³´ê¸° (by Elastic Stack)","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/taetaetae.github.io\/2019\/02\/10\/access-log-to-elastic-stack\/"},"genre":"posts","keywords":"elasticsearch, logstash, kibana, filebeat, archives-2019","wordcount":1082,"url":"https:\/\/taetaetae.github.io\/2019\/02\/10\/access-log-to-elastic-stack\/","datePublished":"2019-02-10T14:37:31+00:00","dateModified":"2019-02-10T14:37:31+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"íƒœíƒœíƒœ"},"description":""}</script></head><body data-header-desktop=auto data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title>ğŸ‘¨â€ğŸ’»ê¿ˆê¾¸ëŠ” íƒœíƒœíƒœì˜ ê³µê°„</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title>ğŸ‘¨â€ğŸ’»ê¿ˆê¾¸ëŠ” íƒœíƒœíƒœì˜ ê³µê°„</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categories</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">ëˆ„êµ¬ë‚˜ í•  ìˆ˜ ìˆëŠ” ì—‘ì„¸ìŠ¤ ë¡œê·¸ ë¶„ì„ ë”°ë¼ í•´ë³´ê¸° (by Elastic Stack)</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://taetaetae.github.io/resume title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>íƒœíƒœíƒœ</a></span>&nbsp;<span class=post-category>included in <a href=/categories/tech/><i class="far fa-folder fa-fw" aria-hidden=true></i>Tech</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2019-02-10>2019-02-10</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;1082 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;6 minutes&nbsp;</div></div><div class=featured-image><img class=lazyload src=/svg/loading.min.svg data-src=/images/access-log-to-elastic-stack/elastic_stack.jpg data-srcset="/images/access-log-to-elastic-stack/elastic_stack.jpg, /images/access-log-to-elastic-stack/elastic_stack.jpg 1.5x, /images/access-log-to-elastic-stack/elastic_stack.jpg 2x" data-sizes=auto alt=/images/access-log-to-elastic-stack/elastic_stack.jpg title=/images/access-log-to-elastic-stack/elastic_stack.jpg></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#ì „ì²´ì ì¸-íë¦„>ì „ì²´ì ì¸ íë¦„</a><ul><li><a href=#elasticsearch>Elasticsearch</a></li><li><a href=#logstash>Logstash</a></li><li><a href=#kibana>Kibana</a></li><li><a href=#filebeat>Filebeat</a></li></ul></li><li><a href=#ìµœì¢…-í™•ì¸>ìµœì¢… í™•ì¸</a></li><li><a href=#ë§ˆì¹˜ë©°>ë§ˆì¹˜ë©°</a></li></ul></nav></div></div><div class=content id=content><p>í•„ìê°€ Elastic Stackì„ ì•Œê²Œëœê±´ 2017ë…„ ì–´ëŠ ì—¬ë¦„ ë™ê¸°í˜•ì´ ê³µë¶€í•˜ê³  ìˆëŠ”ê²ƒì„ ë³´ê³  í˜¸ê¸°ì‹¬ì— ë”°ë¼í•˜ë©° ì‹œì‘í•˜ê²Œ ë˜ì—ˆë‹¤. ê·¸ë•Œê¹Œì§€ë§Œ í•´ë„ ë²„ì „ì´ 2.x ì˜€ëŠ”ë° ì§€ê¸ˆ ê¸€ì„ ì“°ê³ ìˆëŠ” 2019ë…„ 2ì›”ì´ˆ ìµœì‹ ë²„ì „ì´ 6.6ì´ë‹ˆ ì •ë§ ë¹ ë¥´ê²Œ ë³€í™”í•˜ëŠ”ê²ƒ ê°™ë‹¤. ë¹ ë¥´ê²Œ ë³€í™”í•˜ëŠ” ë²„ì „ë§Œí¼ ì‚¬ëŒë“¤ì˜ ê´€ì‹¬ë„ (ë“œë¼ë§ˆí‹±í•˜ê²ŒëŠ” ì•„ë‹ˆì§€ë§Œ) ê¾¸ì¤€íˆ ëŠ˜ì–´ë‚˜ ê°œì¸ì ìœ¼ë¡œ, ê·¸ë¦¬ê³  ì‹¤ë¬´ì—ì„œë„ í™œìš©í•˜ëŠ” ë²”ìœ„ê°€ ë§ì•„ì§€ê³  ìˆëŠ”ê²ƒ ê°™ë‹¤.</p><script type=text/javascript src=https://ssl.gstatic.com/trends_nrtr/1709_RC01/embed_loader.js></script><script type=text/javascript>trends.embed.renderExploreWidget("TIMESERIES",{comparisonItem:[{keyword:"elasticsearch",geo:"KR",time:"today 5-y"}],category:0,property:""},{exploreQuery:"date=today%205-y&geo=KR&q=elasticsearch",guestPath:"https://trends.google.co.kr:443/trends/embed/"})</script><p>ê·¸ë˜ì„œ ê·¸ëŸ°ì§€ ìµœê·¼ë“¤ì–´ <code>(ì•„ì£¼ ì½”ë”±ì§€ë§Œí¼ ì¡°ê¸ˆì´ë¼ë„ ë” í•´ë³¸)</code> í•„ìì—ê²Œ Elastic Stack ì‚¬ìš©ë°©ë²•ì— ëŒ€í•´ ë¬¼ì–´ë³´ëŠ” ì£¼ë³€ ì§€ì¸ë“¤ì´ ëŠ˜ì–´ë‚˜ê³  ìˆë‹¤. ê·¸ë¦¬ê³  ì˜ˆì „ì— í•œì°½ ê³µë¶€í–ˆì„ë•Œì˜ ë²„ì „ë³´ë‹¤ ë§ì´ ë°”ê¼ˆê¸°ì— ì´ ê¸°íšŒì— &ldquo;ê·¸ëŒ€ë¡œ ë”°ë¼ë§Œ í•˜ë©´ Elastic Stackì„ êµ¬ì„±í•  ìˆ˜ ìˆì„ë§Œí•œ ê¸€"ì„ ì¨ë³´ê³ ì í•œë‹¤. ì‚¬ì‹¤ í•„ìê°€ ì˜ˆì „ì— &ldquo;ë„íë¨¼íŠ¸ë¥¼ ë³´ê¸°ì—” ë„ˆë¬´ ì–´ë ¤ì›Œ ë³´ì´ëŠ” ëŠë‚Œì ì¸ ëŠë‚Œ&rdquo; ë•Œë¬¸ì— ì‚½ì§ˆí•˜ë©° êµ¬ì„±í•œ í˜ë“¤ì—ˆë˜ ê¸°ì–µì„ ë˜ì‚´ë ¤ ìµœëŒ€í•œ ì‹¬í”Œí•˜ê³  ì²˜ìŒ í•´ë³´ëŠ” ì‚¬ëŒë„ ë”°ë¼í•˜ê¸°ë§Œ í•˜ë©´ &ldquo;ì•„~ ì´ê²Œ Elastic Stack ì´êµ¬ë‚˜!&rdquo;, &ldquo;ì´ëŸ°ì‹ìœ¼ë¡œ ëŒì•„ê°€ëŠ” ê±°êµ¬ë‚˜!&rdquo; í•˜ëŠ” ë„ì›€ì„ ì£¼ê³  ì‹¶ë‹¤.</p><blockquote><p>+ ê·¸ëŸ¬ë©´ì„œ ìµœì‹ ë²„ì „ë„ ì‚´í´ë³´ê³ &mldr; 1ì„2ì¡°, ì´ëŸ°ê²Œ ë°”ë¡œ ë¸”ë¡œê·¸ë¥¼ í•˜ëŠ” ì´ìœ ì´ì§€ ì•Šì„ê¹Œ?
ë‹¤ì‹œí•œë²ˆ ë§í•˜ì§€ë§Œ ë„íë¨¼íŠ¸ê°€ ìµœê³  ì§€ì¹¨ì„œì´ê¸´ í•˜ë‹¤&mldr;</p></blockquote><p><a href=https://www.elastic.co/kr/products target=_blank rel="noopener noreffer">Elastic ê³µì‹ í™ˆí˜ì´ì§€</a>ì— ê°€ë©´ ê° ì œí’ˆêµ°ë“¤ì— ëŒ€í•´ ê·¸ë¦¼ìœ¼ë¡œ ëœ ìì„¸í•œ ì„¤ëª…ê³¼ ë„íë¨¼íŠ¸ê°€ ìˆì§€ë§Œ ì´ë“¤ì„ ì–´ë–¤ì‹ìœ¼ë¡œ ì¡°í•©í•˜ì—¬ ì‚¬ìš©í•˜ëŠ”ì§€ì— ëŒ€í•œ ì „ì²´ì ì¸ íë¦„ì„ ë³¼ ìˆ˜ ìˆëŠ” ê³³ì€ ì—†ì–´ ë³´ì¸ë‹¤. (ì§€ê¸ˆ ë³´ë©´ ë„íë¨¼íŠ¸ê°€ ê·¸ ì–´ë””ë³´ë‹¤ ì„¤ëª…ì´ ì˜ë˜ì–´ ìˆë‹¤ê³  ìƒê°ë˜ì§€ë§Œ ì‚¬ì „ ì§€ì‹ì´ ì „í˜€ì—†ëŠ” ìƒíƒœì—ì„œëŠ” ë´ë„ë´ë„ ì–´ë ¤ì›Œ ë³´ì˜€ë‹¤.)
ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” <strong>Apache access logë¥¼ Elasticsearchì— ì¸ë±ì‹± í•˜ëŠ” ë°©ë²•</strong>ì— ëŒ€í•´ ì„¤ëª…í•´ë³´ê³ ì í•œë‹¤.</p><h2 id=ì „ì²´ì ì¸-íë¦„>ì „ì²´ì ì¸ íë¦„</h2><p>í•„ìëŠ” ê¸€ë³´ë‹¤ëŠ” ê·¸ë¦¼ì„ ì¢‹ì•„í•˜ëŠ” í¸ì´ë¼ ì „ì²´ì ì¸ íë¦„ì„ ê·¸ë¦¼ìœ¼ë¡œ ë¨¼ì € ë³´ì.</p><a class=lightgallery href=/images/access-log-to-elastic-stack/concept.jpg title=/images/access-log-to-elastic-stack/concept.jpg data-thumbnail=/images/access-log-to-elastic-stack/concept.jpg><img class=lazyload src=/svg/loading.min.svg data-src=/images/access-log-to-elastic-stack/concept.jpg data-srcset="/images/access-log-to-elastic-stack/concept.jpg, /images/access-log-to-elastic-stack/concept.jpg 1.5x, /images/access-log-to-elastic-stack/concept.jpg 2x" data-sizes=auto alt=/images/access-log-to-elastic-stack/concept.jpg width=100%></a><ol><li>ì™¸ë¶€ì—ì„œì˜ ì ‘ê·¼ì´ ë°œìƒí•˜ë©´ apache ì›¹ì„œë²„ì—ì„œ ì„¤ì •í•œ ê²½ë¡œì— access logê°€ íŒŒì¼ë¡œ ìƒì„±ì´ ë˜ê±°ë‚˜ ìˆëŠ” íŒŒì¼ì— ì¶”ê°€ê°€ ëœë‹¤. í•´ë‹¹ íŒŒì¼ì—ëŠ” í•œì¤„ë‹¹ í•˜ë‚˜ì˜ ì—‘ì„¸ìŠ¤ ì •ë³´ê°€ ë‚¨ê²Œ ëœë‹¤.</li><li>fileBeatì—ì„œ í•´ë‹¹ íŒŒì¼ì„ íŠ¸ë˜í‚¹ í•˜ê³  ìˆë‹¤ê°€ ë¼ì¸ì´ ì¶”ê°€ë˜ë©´ ì´ ì •ë³´ë¥¼ logstash ì—ê²Œ ì „ë‹¬í•´ì¤€ë‹¤.</li><li>logastsh ëŠ” filebeatì—ì„œ ì „ë‹¬í•œ ì •ë³´ë¥¼ íŠ¹ì • portë¡œ input ë°›ëŠ”ë‹¤.</li><li>ë°›ì€ ì •ë³´ë¥¼ filter ê³¼ì •ì„ í†µí•´ ê° ì •ë³´ë¥¼ ë¶„í•  ë° ì •ì œí•œë‹¤. (ip, uri, time ë“±)</li><li>ì •ë¦¬ëœ ì •ë³´ë¥¼ elasticsearch ì— ouput ìœ¼ë¡œ ë³´ë‚¸ë‹¤. (ì •í™•íˆ ë§í•˜ë©´ ì¸ë±ì‹±ì„ í•œë‹¤.)</li><li>elasticsearch ì— ì¸ë±ì‹± ëœ ì •ë³´ë¥¼ í‚¤ë°”ë‚˜ë¥¼ í†µí•´ ì†ì‰½ê²Œ ë¶„ì„ì„ í•œë‹¤.</li></ol><p>í•œë²ˆì˜ ì„¤ì¹˜ê³  ì¼ë ¨ì˜ ê³¼ì •ì´ ëšë”± ëœë‹¤ë©´ ë„ˆë¬´ í¸í•˜ê² ì§€ë§Œ, ê°ê°ì˜ ë ˆì´ì–´ê°€ ë‚˜ë‰˜ì–´ì ¸ìˆëŠ” ì´ìœ ëŠ” í•˜ëŠ” ì—­í™œì´ ì „ë¬¸ì ìœ¼ë¡œ(?) ë‚˜ë‰˜ì–´ì ¸ ìˆê³  ê° ë ˆì´ì–´ì—ì„œëŠ” ì„¸ë¶€ ì„¤ì •ì„ í†µí•´ ë³´ë‹¤ íš¨ìœ¨ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.</p><blockquote><p>beatsë¼ëŠ” ë ˆì´ì–´ê°€ ë‚˜ì˜¤ê¸° ì „ì—ëŠ” logstashì—ì„œ ì§ì ‘ fileì„ ë°”ë¼ë³´ê³¤ í–ˆì—ˆëŠ”ë° beatsê°€ logstash ë³´ë‹¤ ê°€ë²¼ìš´ shipper ëª©ì ìœ¼ë¡œ ë‚˜ì˜¨ agent ì´ë‹¤ë³´ë‹ˆ í†µìƒ logstash ì•ë‹¨ì— filebeatë¥¼ ìœ„ì¹˜ì‹œí‚¤ê³¤ í•œë‹¤ê³  í•œë‹¤.</p></blockquote><p>ì „ì²´ì ì¸ ê·¸ë¦¼ì€ ìœ„ì™€ ê°™ê³ , ì´ì œ ì´ ê¸€ì„ ë³´ê³ ìˆëŠ” ì—¬ëŸ¬ë¶„ë“¤ì´ ë”°ë¼í•  ì°¨ë¡€ì´ë‹¤. ê° ë ˆì´ì–´ë³„ë¡œ í•˜ë‚˜ì”© ì„¤ì¹˜ë¥¼ í•´ë³´ë©° êµ¬ì„±ì„ í•´ë³´ì. ì„¤ì¹˜ìˆœì„œëŠ” ë°ì´í„° íë¦„ì˜ ìˆœì„œì— ë§ì¶° ë‹¤ìŒê³¼ ê°™ì€ ìˆœì„œë¡œ ì„¤ì¹˜ë¥¼ í•´ì•¼ íš¨ìœ¨ì ìœ¼ë¡œ ë³¼ìˆ˜ê°€ ìˆë‹¤. (ì•„ë˜ìˆœì„œëŒ€ë¡œ í•˜ì§€ ì•Šì„ê²½ìš° ì„¤ì¹˜/ì‹œì‘/ì¢…ë£Œ ë¥¼ ê°ê°ì˜ íƒ€ì´ë°ì— ë§ì¶”ì–´ í•´ì¤˜ì•¼ í• ê²ƒ ê°™ì•„ ë³µì¡í• ê²ƒê°™ë‹¤.)</p><pre tabindex=0><code>elasticsearch â†’ logstash â†’ kibana â†’ filebeat
</code></pre><p>ì´ í¬ìŠ¤íŒ…ì€ CentOS 7.4ì—ì„œ Java 1.8, apache 2.2ê°€ ì„¤ì¹˜ë˜ì–´ìˆë‹¤ëŠ” ê°€ì •í•˜ì— ë³´ë©´ ë ë“¯í•˜ë‹¤. ë˜í•œ ê° ë ˆì´ì–´ë³„ ì„¤ëª…ì€ êµ¬ê¸€ë§ì„ í•˜ê±°ë‚˜ Elastic ê³µì‹ í™ˆí˜ì´ì§€ì— ê°€ë³´ë©´ ìì„¸íˆ ë‚˜ì™€ìˆìœ¼ë‹ˆ ê¸°ë³¸ ì„¤ëª…ì€ ì•ˆí•˜ëŠ”ê²ƒìœ¼ë¡œ í•˜ê³ , ê° ë ˆì´ì–´ì˜ ì„¸ë¶€ ì„¤ì •ì€ í•˜ì§€ ì•ŠëŠ”ê²ƒìœ¼ë¡œ í•œë‹¤.</p><h3 id=elasticsearch>Elasticsearch</h3><p><a href=https://www.elastic.co/kr/products/elasticsearch target=_blank rel="noopener noreffer">ê³µì‹ í™ˆí˜ì´ì§€</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=line><span class=cl>ë‹¤ìš´ë°›ê³  ì••ì¶•í’€ê³  ì‹¬ë³¼ë¦­ ê²½ë¡œ ë§Œë“¤ê³  (ì‹¬ë³¼ë¦­ ê²½ë¡œëŠ” ì„ íƒì‚¬í•­)
</span></span><span class=line><span class=cl>$ wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.6.0.tar.gz
</span></span><span class=line><span class=cl>$ tar zxvf elasticsearch-6.6.0.tar.gz
</span></span><span class=line><span class=cl>$ ln -s elasticsearch-6.6.0 elasticsearch
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ì„¤ì • íŒŒì¼ì„ ì—´ê³  ì¶”ê°€í•´ì¤€ë‹¤.
</span></span><span class=line><span class=cl>$ cd elasticsearch/conf
</span></span><span class=line><span class=cl>$ vi elasticsearch.yml
</span></span><span class=line><span class=cl>path.data: /~~~/data/elasticsearch (ê¸°ë³¸ê²½ë¡œì—ì„œ ë³€ê²½í• ë•Œì¶”ê°€)
</span></span><span class=line><span class=cl>path.logs: /~~~/logs/elasticsearch
</span></span><span class=line><span class=cl>network.host: 0.0.0.0 # ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ (ì‹¤ì œ ipë¥¼ ì ì–´ì¤˜ë„ ë¨)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>elasticsearch ì˜ ì‹œì‘ê³¼ ì¢…ë£Œë¥¼ ì¡°ê¸ˆì´ë‚˜ë§ˆ í¸í•˜ê²Œ í•˜ê¸°ìœ„í•´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•´ì¤Œ (ì´ê²ƒë˜í•œ ì„ íƒì‚¬í•­)
</span></span><span class=line><span class=cl>$ cd ../bin
</span></span><span class=line><span class=cl>$ echo &#39;./elasticsearch -d -p es.pid&#39; &gt; start.sh
</span></span><span class=line><span class=cl>$ echo &#39;kill <span class=sb>`cat es.pid`</span>&#39; &gt; stop.sh
</span></span><span class=line><span class=cl>$ chmod 755 start.sh stop.sh
</span></span></code></pre></div><p>í˜¹ì‹œ ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí• ê²½ìš° <a href=https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html#docker-cli-run-prod-mode target=_blank rel="noopener noreffer">ê³µì‹ë¬¸ì„œ</a> ëŒ€ë¡œ ì§„í–‰í•´ì¤€ë‹¤.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=line><span class=cl>ERROR: [1] bootstrap checks failed
</span></span><span class=line><span class=cl>[1]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]
</span></span><span class=line><span class=cl><span class=k>
</span></span></span><span class=line><span class=cl><span class=k>&gt; </span><span class=ge>sudo /sbin/sysctl -w vm.max_map_count=262144
</span></span></span></code></pre></div><p>ì´ë ‡ê²Œ í•˜ê³  ì‹œì‘ì„ í•œë’¤ ë¸Œë¼ìš°ì €ì—ì„œ <code>http://{ip}:9200</code> ë¡œ ì ‘ì†í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì¹˜ëœ elasticsearchì— ê¸°ë³¸ ì •ë³´ê°€ ë‚˜ì˜¤ê²Œ ë˜ê³  ì´ë ‡ê²Œ elasticsearchì˜ ì„¤ì¹˜ ë° ì‹¤í–‰ì´ ì™„ë£Œë˜ì—ˆë‹¤.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=line><span class=cl>{
</span></span><span class=line><span class=cl>	&#34;name&#34;: &#34;@@@&#34;,
</span></span><span class=line><span class=cl>	&#34;cluster_name&#34;: &#34;elasticsearch&#34;,
</span></span><span class=line><span class=cl>	&#34;cluster_uuid&#34;: &#34;@@@&#34;,
</span></span><span class=line><span class=cl>	&#34;version&#34;: {
</span></span><span class=line><span class=cl>		&#34;number&#34;: &#34;6.6.0&#34;,
</span></span><span class=line><span class=cl>		&#34;build_flavor&#34;: &#34;default&#34;,
</span></span><span class=line><span class=cl>		&#34;build_type&#34;: &#34;tar&#34;,
</span></span><span class=line><span class=cl>		&#34;build_hash&#34;: &#34;@@@&#34;,
</span></span><span class=line><span class=cl>		&#34;build_date&#34;: &#34;2019-01-24T11:27:09.439740Z&#34;,
</span></span><span class=line><span class=cl>		&#34;build_snapshot&#34;: false,
</span></span><span class=line><span class=cl>		&#34;lucene_version&#34;: &#34;7.6.0&#34;,
</span></span><span class=line><span class=cl>		&#34;minimum_wire_compatibility_version&#34;: &#34;5.6.0&#34;,
</span></span><span class=line><span class=cl>		&#34;minimum_index_compatibility_version&#34;: &#34;5.0.0&#34;
</span></span><span class=line><span class=cl>	},
</span></span><span class=line><span class=cl>	&#34;tagline&#34;: &#34;You Know, for Search&#34;
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h3 id=logstash>Logstash</h3><p><a href=https://www.elastic.co/kr/products/logstash target=_blank rel="noopener noreffer">ê³µì‹ í™ˆí˜ì´ì§€</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=line><span class=cl>ë‹¤ìš´ì„ ë°›ê³  ì••ì¶•í’€ê³  ì‹¬ë³¼ë¦­ ë§í¬ ì„¤ì •
</span></span><span class=line><span class=cl>$ wget https://artifacts.elastic.co/downloads/logstash/logstash-6.6.0.tar.gz
</span></span><span class=line><span class=cl>$ tar -zxvf logstash-6.6.0.tar.gz
</span></span><span class=line><span class=cl>$ ln -s logstash-6.6.0 logstash
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>logstashê°€ ì‹¤í–‰ë ë•Œ ì„¤ì •ê°’ íŒŒì¼ì„ ë§Œë“¤ì–´ì¤€ë‹¤.
</span></span><span class=line><span class=cl>$ cd logstash/config
</span></span><span class=line><span class=cl>$ vi access_log.conf
</span></span><span class=line><span class=cl><span class=gh># beats ì—ì„œ 5044 port ë¡œ ë°ì´í„°ë¥¼ input ë°›ê² ë‹¤ëŠ” ì˜ë¯¸
</span></span></span><span class=line><span class=cl><span class=gh></span>input { 
</span></span><span class=line><span class=cl>        beats { 
</span></span><span class=line><span class=cl>                port =&gt; &#34;5044&#34;
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=gh># grok í•„í„°ë¥¼ í™œìš©í•˜ì—¬ ì—‘ì„¸ìŠ¤ë¡œê·¸ í•œì¤„ì„ ì•„ë˜ì²˜ëŸ¼ íŒŒì‹±í•˜ê² ë‹¤ëŠ” ì˜ë¯¸
</span></span></span><span class=line><span class=cl><span class=gh># í•´ë‹¹ í•„í„°ëŠ” apacheì˜ ë¡œê¹… ì„¤ì •ì— ì˜í•´ ë§Œë“¤ì–´ì§€ëŠ” íŒŒì¼ì˜ í¬ë©§ì— ë§ì¶”ì–´ ì„¤ì •í•´ì•¼í•œë‹¤.
</span></span></span><span class=line><span class=cl><span class=gh></span>filter {
</span></span><span class=line><span class=cl>        grok {
</span></span><span class=line><span class=cl>                match =&gt; { &#34;message&#34; =&gt; [&#34;%{IPORHOST:clientip} (?:-|%{USER:ident}) (?:-|%{USER:auth}) \[%{HTTPDATE:timestamp}\] \&#34;(?:%{WORD:httpMethod} %{NOTSPACE:uri}(?: HTTP/%{NUMBER:httpversion})?|-)\&#34; %{NUMBER:responseCode} (?:-|%{NUMBER:bytes}) (?:-|%{NUMBER:bytes2})( \&#34;%{DATA:referrer}\&#34;)?( \&#34;%{DATA:user-agent}\&#34;)?&#34;] }
</span></span><span class=line><span class=cl>                remove_field =&gt; [&#34;timestamp&#34;,&#34;<span class=ni>@version</span>&#34;,&#34;path&#34;,&#34;tags&#34;,&#34;httpversion&#34;,&#34;bytes2&#34;]
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=gh># ì •ì œëœ ë°ì´í„°ë¥¼ elasticsearch ì— ì¸ë±ì‹± í•˜ê²Ÿë‹¤ëŠ” ì˜ë¯¸
</span></span></span><span class=line><span class=cl><span class=gh># index ì´ë¦„ì— ë‚ ì§œ í˜•íƒœë¡œ ì ì–´ì£¼ë©´ ì¸ë±ì‹± í•˜ëŠ” ì‹œì ì˜ ì‹œê°„ì— ë”°ë¼ ì¸ë±ì‹± ì´ë¦„ì´ ìë™ìœ¼ë¡œ ë³€ê²½ì´ ëœë‹¤. (ì•„ë˜ëŠ” ì›”ë³„ë¡œ ì¸ë±ìŠ¤ë¥¼ ë§Œë“¤ê²½ìš°)
</span></span></span><span class=line><span class=cl><span class=gh></span>output {
</span></span><span class=line><span class=cl>        elasticsearch {
</span></span><span class=line><span class=cl>                hosts =&gt; [ &#34;{elasticsearch ip}:9200&#34; ]
</span></span><span class=line><span class=cl>                index =&gt; &#34;index-%{+YYYY.MM}&#34;
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>ì‹¤í–‰ì€ ë‹¤ìŒê³¼ ê°™ì´ <code>&</code>ì—°ì‚°ìë¥¼ í™œìš©í•˜ì—¬ backgroundë¡œ ì‹¤í–‰í•˜ê²Œ í•œë‹¤.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=line><span class=cl>$ bin/logstash -f config/access_log.conf <span class=err>&amp;</span>
</span></span></code></pre></div><p>ì´ë ‡ê²Œ í•´ì„œ ì‹¤í–‰ì„ í•˜ê³  ì—ëŸ¬ì—†ì´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ì´ ëœë’¤ í”„ë¡œì„¸ìŠ¤ê°€ ì˜¬ë¼ì™€ ìˆìœ¼ë©´ (<code>ps -ef | grep logstash</code>) ì„±ê³µëœ ìƒíƒœë¼ ë³¼ìˆ˜ìˆë‹¤.</p><h3 id=kibana>Kibana</h3><p><a href=https://www.elastic.co/kr/products/kibana target=_blank rel="noopener noreffer">ê³µì‹ í™ˆí˜ì´ì§€</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=line><span class=cl>ì—­ì‹œ ë‹¤ìš´ë°›ê³  ì••ì¶•í’€ê³  ì‹¬ë³¼ë¦­ ë§í¬ ì„¤ì •
</span></span><span class=line><span class=cl>$ https://artifacts.elastic.co/downloads/kibana/kibana-6.6.0-linux-x86_64.tar.gz
</span></span><span class=line><span class=cl>$ tar -zxvf kibana-6.6.0-linux-x86_64.tar.gz
</span></span><span class=line><span class=cl>$ ln -s kibana-6.6.0-linux-x86_64 kibana
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì„ í•˜ê¸°ìœ„í•´ ipë¥¼ ì ì–´ì£¼ê³ , ì—°ê²°í•  elasticsearch ì£¼ì†Œë˜í•œ ì ì–´ì¤€ë‹¤.
</span></span><span class=line><span class=cl>$ cd kibana/config
</span></span><span class=line><span class=cl>$ vi kibana.yml
</span></span><span class=line><span class=cl>server.host: &#34;@.@.@.@&#34;
</span></span><span class=line><span class=cl>elasticsearch.hosts: [&#34;http://@.@.@.<span class=ni>@:9200</span>&#34;]
</span></span></code></pre></div><p>ì‹¤í–‰ì€ bin í´ë”ë¡œ ì´ë™í›„ì— ë‹¤ìŒê³¼ ê°™ì´ ì‹¤í–‰ì‹œì¼œì¤€ë‹¤. ë³„ë‹¤ë¥¸ ì—ëŸ¬ê°€ ì—†ìœ¼ë©´ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•œì§€ í™•ì¸í•´ë³´ì.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=line><span class=cl>$ cd bin/
</span></span><span class=line><span class=cl>$ nohup ./kibana <span class=err>&amp;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ì ‘ì† : http://@.@.@.<span class=ni>@/5601</span>
</span></span></code></pre></div><h3 id=filebeat>Filebeat</h3><p><a href=https://www.elastic.co/kr/products/beats target=_blank rel="noopener noreffer">ê³µì‹ í™ˆí˜ì´ì§€</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=line><span class=cl>ë‹¤ìš´ â†’ ì••ì¶•í•´ì œ â†’ ì‹¬ë³¼ë¦­ë§í¬
</span></span><span class=line><span class=cl>$ wget https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-6.6.0-linux-x86_64.tar.gz
</span></span><span class=line><span class=cl>$ tar -zxvf filebeat-6.6.0-linux-x86_64.tar.gz
</span></span><span class=line><span class=cl>$ ln -s filebeat-6.6.0-linux-x86_64 filebeat
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>filebeatê°€ ì‹¤í–‰ë ë•Œì˜ ì„¤ì •íŒŒì¼ì„ ì‘ì„±í•´ì¤€ë‹¤.
</span></span><span class=line><span class=cl>$ cd filebeat
</span></span><span class=line><span class=cl>$ vi access_log.yml
</span></span><span class=line><span class=cl>filebeat.prospectors:
</span></span><span class=line><span class=cl><span class=k>-</span> type: log
</span></span><span class=line><span class=cl>  enabled: true
</span></span><span class=line><span class=cl>  paths:
</span></span><span class=line><span class=cl>    <span class=k>-</span> /~~~/logs/apache/access.log.* # ì‹¤ì œ ì—‘ì„¸ìŠ¤ íŒŒì¼ì˜ ê²½ë¡œ
</span></span><span class=line><span class=cl>  tail_files: true # filebeat ì‹œì‘ì‹œì  ê¸°ì¤€ íŒŒì¼ ëì—ì„œë¶€í„° ë¡œê¹…ì„ ì½ê¸° ì‹œì‘
</span></span><span class=line><span class=cl>  ignore_older: 1m # filebeat ì‹œì‘ì‹œì  ê¸°ì¤€ 1ë¶„ì „ì˜ ë‚´ìš©ì€ ë¬´ì‹œ
</span></span><span class=line><span class=cl>  close_inactive: 2m
</span></span><span class=line><span class=cl>  clean_inactive: 15m
</span></span><span class=line><span class=cl>logging.level: info
</span></span><span class=line><span class=cl>logging.to_files: true
</span></span><span class=line><span class=cl>logging.files: # filebeatê°€ ì‹¤í–‰ë˜ë©´ì„œ ë‚¨ê¸°ëŠ” ë¡œê¹…íŒŒì¼ ì •ë³´. ë„íë¨¼íŠ¸ë¥¼ ì½ì–´ë³´ëŠ”ê²ƒì„ ì¶”ì²œí•œë‹¤.
</span></span><span class=line><span class=cl>  path: /~~~/logs/filebeat
</span></span><span class=line><span class=cl>  name: test-filebeat-log
</span></span><span class=line><span class=cl>  keepfiles: 7
</span></span><span class=line><span class=cl>  rotateeverybytes: 524288000
</span></span><span class=line><span class=cl>output.logstash: # ìµœì¢…ì ìœ¼ë¡œ output í•  logstashì˜ ì •ë³´ë¥¼ ì…ë ¥í•´ì¤€ë‹¤.
</span></span><span class=line><span class=cl>  hosts: [&#34;@.@.@.<span class=ni>@:5044</span>&#34;]
</span></span></code></pre></div><p>ìœ„ì™€ ê°™ì´ ì„¤ì •íŒŒì¼ì„ ì‘ì„±í•œ ë‹¤ìŒ ì•„ë˜ì²˜ëŸ¼ ì‹¤í–‰ì„ í•˜ë©´ ì—‘ì„¸ìŠ¤ íŒŒì¼ì˜ ë‚´ìš©ì´ filebeatë¥¼ ê±°ì¹˜ê³  logstashë¥¼ ê±°ì³ ìµœì¢…ì ìœ¼ë¡œ elasticsearch ì— ë„ë‹¬í•˜ê²Œ ëœë‹¤. ê¸°ì¡´ì— ì—‘ì„¸ìŠ¤ ë¡œê·¸ê°€ ì–‘ì´ ë§ë‹¤ë©´ ê·¸ ì •ë³´ë¥¼ ë‹¤ ì½ëŠ” ì‹œê°„ì´ ê±¸ë¦¬ë¯€ë¡œ ì£¼ì˜í•œë‹¤. (filebeat ìì²´ì ìœ¼ë¡œ í•´ë‹¹ íŒŒì¼ì˜ offsetì„ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸)</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=line><span class=cl>$ ./filebeat -c access_log.yml -d publish <span class=err>&amp;</span>
</span></span></code></pre></div><h2 id=ìµœì¢…-í™•ì¸>ìµœì¢… í™•ì¸</h2><p>ì™¼ìª½ì—ëŠ” í•´ë‹¹ ì„œë²„ë¥¼ í˜¸ì¶œí•˜ê³  ì˜¤ë¥¸ìª½ì—ëŠ” í‚¤ë°”ë‚˜ë¥¼ ë„ì›Œë…¼ë’¤ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ë©´ ì•„ë˜ì²˜ëŸ¼ access logë¥¼ í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤. (apacheë§Œ ë„ì›Œë†“ì€ ìƒíƒœë¼ 404ìƒíƒœë¡œ ë‚˜ì˜¤ê¸´ í•œë‹¤..) ë¶ˆí•„ìš”í•œ í•„ë“œê°€ ìˆë‹¤ë©´ logstash ì˜ filterì—ì„œ remove í•˜ë©´ë˜ê³  í‚¤ë°”ë‚˜ì—ì„œ ê° ì •ë³´ë¥¼ ê°€ì§€ê³  ë‹¤ì–‘í•œ ìœ ì˜ë¯¸í•œ ë°ì´í„°ë¥¼ ë§Œë“¤ì–´ë³¼ ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.</p><a class=lightgallery href=/images/access-log-to-elastic-stack/kibana.jpg title=/images/access-log-to-elastic-stack/kibana.jpg data-thumbnail=/images/access-log-to-elastic-stack/kibana.jpg><img class=lazyload src=/svg/loading.min.svg data-src=/images/access-log-to-elastic-stack/kibana.jpg data-srcset="/images/access-log-to-elastic-stack/kibana.jpg, /images/access-log-to-elastic-stack/kibana.jpg 1.5x, /images/access-log-to-elastic-stack/kibana.jpg 2x" data-sizes=auto alt=/images/access-log-to-elastic-stack/kibana.jpg width=100%></a><h2 id=ë§ˆì¹˜ë©°>ë§ˆì¹˜ë©°</h2><p>ë§‰ìƒ í•´ë³´ë©´ (í•´ë³´ê¸°ì „ì— ëŠë¼ëŠ” ë‘ë ¤ì›€ë³´ë‹¤ëŠ”) ì—„ì²­ë‚˜ê²Œ ë¯¸ì¹œë“¯ì´ ì–´ë µì§€ëŠ” ì•ŠëŠ”ë°&mldr; ë§¨ë•…ì— í•´ë”©ì´ë“  ë­ë“  ì‹œì‘í•´ë³´ê³  ë§Œë“¤ì–´ë³´ëŠ”ê²Œ ì¤‘ìš”í•˜ë‹¤ê³  ë‹¤ì‹œí•œë²ˆ ìƒê°í•´ë³¸ë‹¤. í•„ìëŠ” elasticsearch 2.4ë²„ì „ì— ëŒ€í•´ ì˜ì–´ë¡œëœ ë¬¸ì„œë¥¼ ë³´ë©° ì„¤ì¹˜í•˜ê³  êµ¬ì„±í•˜ë©° (ì™œ í•œê¸€ë¡œ ëœ ë¬¸ì„œê°€ í•œëª…ë„ ì—†ì„ê¹Œ&mldr;) í•˜ëŠ” ì•„ì‰¬ì›€ì— ìˆì—ˆëŠ”ë° ì´ ê¸€ì´ í•„ìì²˜ëŸ¼ ì„¤ì¹˜í•˜ëŠ”ë° ë¹„ìŠ·í•œ(?) ê³ ì¶©ì„ ëŠë‚€ ì‚¬ëŒë“¤ì—ê²Œ ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ í•œë‹¤.
ë§ˆì§€ë§‰ìœ¼ë¡œ ì„¸ë¶€ ì„¤ì •ê°’ë“¤ë¡œ ì¸í•´ ì„±ëŠ¥ì´ë‚˜ ê¸°ëŠ¥ì´ ë‹¤ì–‘í•˜ê²Œ ë°”ë€”ìˆ˜ ìˆìœ¼ë‹ˆ <a href=https://www.elastic.co/guide/kr/index.html target=_blank rel="noopener noreffer">ê³µì‹ ë„íë¨¼íŠ¸</a>ë¥¼ ë³´ëŠ”ê²ƒì„ ê°•ë ¥ ì¶”ì²œí•˜ê³  ì‹¶ë‹¤.</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2019-02-10</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://taetaetae.github.io/2019/02/10/access-log-to-elastic-stack/ data-title="ëˆ„êµ¬ë‚˜ í•  ìˆ˜ ìˆëŠ” ì—‘ì„¸ìŠ¤ ë¡œê·¸ ë¶„ì„ ë”°ë¼ í•´ë³´ê¸° (by Elastic Stack)" data-hashtags=elasticsearch,logstash,kibana,filebeat,archives-2019><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://taetaetae.github.io/2019/02/10/access-log-to-elastic-stack/ data-hashtag=elasticsearch><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://taetaetae.github.io/2019/02/10/access-log-to-elastic-stack/><i class="fab fa-linkedin fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://taetaetae.github.io/2019/02/10/access-log-to-elastic-stack/ data-title="ëˆ„êµ¬ë‚˜ í•  ìˆ˜ ìˆëŠ” ì—‘ì„¸ìŠ¤ ë¡œê·¸ ë¶„ì„ ë”°ë¼ í•´ë³´ê¸° (by Elastic Stack)"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://taetaetae.github.io/2019/02/10/access-log-to-elastic-stack/ data-title="ëˆ„êµ¬ë‚˜ í•  ìˆ˜ ìˆëŠ” ì—‘ì„¸ìŠ¤ ë¡œê·¸ ë¶„ì„ ë”°ë¼ í•´ë³´ê¸° (by Elastic Stack)"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on å¾®åš" data-sharer=weibo data-url=https://taetaetae.github.io/2019/02/10/access-log-to-elastic-stack/ data-title="ëˆ„êµ¬ë‚˜ í•  ìˆ˜ ìˆëŠ” ì—‘ì„¸ìŠ¤ ë¡œê·¸ ë¶„ì„ ë”°ë¼ í•´ë³´ê¸° (by Elastic Stack)" data-image=/images/access-log-to-elastic-stack/elastic_stack.jpg><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Blogger" data-sharer=blogger data-url=https://taetaetae.github.io/2019/02/10/access-log-to-elastic-stack/ data-title="ëˆ„êµ¬ë‚˜ í•  ìˆ˜ ìˆëŠ” ì—‘ì„¸ìŠ¤ ë¡œê·¸ ë¶„ì„ ë”°ë¼ í•´ë³´ê¸° (by Elastic Stack)" data-description><i class="fab fa-blogger fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/elasticsearch/>Elasticsearch</a>,&nbsp;<a href=/tags/logstash/>Logstash</a>,&nbsp;<a href=/tags/kibana/>Kibana</a>,&nbsp;<a href=/tags/filebeat/>Filebeat</a>,&nbsp;<a href=/tags/archives-2019/>Archives-2019</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/2019/01/10/spring-redirect-oom/ class=prev rel=prev title="Spring MVC Redirect ì²˜ë¦¬ì¤‘ì— ë°œìƒí•œ Out Of Memory ì›ì¸ ë¶„ì„í•˜ê¸°"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Spring MVC Redirect ì²˜ë¦¬ì¤‘ì— ë°œìƒí•œ Out Of Memory ì›ì¸ ë¶„ì„í•˜ê¸°</a>
<a href=/2019/02/17/daily-dev-blog-3/ class=next rel=next title="ê¸°ìˆ ë¸”ë¡œê·¸ êµ¬ë…ì„œë¹„ìŠ¤ ê°œë°œ í›„ê¸° - 3ë¶€">ê¸°ìˆ ë¸”ë¡œê·¸ êµ¬ë…ì„œë¹„ìŠ¤ ê°œë°œ í›„ê¸° - 3ë¶€<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=utterances class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://utteranc.es/>utterances</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.147.9">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.3.0"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2016 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://taetaetae.github.io/resume target=_blank>íƒœíƒœíƒœ</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:500},comment:{utterances:{darkTheme:"github-dark",issueTerm:"pathname",label:"Comment",lightTheme:"github-light",repo:"taetaetae/blog-comment"}},lightgallery:!0}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-86432198-1",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=UA-86432198-1" async></script></body></html>