<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>빌드/테스트는 내가 해줄게. 너는 코딩에 집중해 (by GitHub Pull Request Builder) - 👨‍💻꿈꾸는 태태태의 공간</title><meta name=Description content><meta property="og:title" content="빌드/테스트는 내가 해줄게. 너는 코딩에 집중해 (by GitHub Pull Request Builder)"><meta property="og:description" content="git 은 분산 버전 관리 시스템 중 가장 잘 알려져 있다고 해도 과언이 아닐 정도로 대부분의 시스템에서 사용되고 있는 것 같다. 이를 웹서비스에서 보다 편하게 사용할 수 있도록 한 시스템이 Github. Github 을 사용하는 이유 중에 가장 큰 이유를 하나만 이야기해보자면 바로 온라인상에서 코드 리뷰를 할 수 있는 pullRequest라는 기능 때문이 아닐까 조심스럽게 생각을 해본다.
　pullRequest는 work branch에서 작업한 내용을 base branch로 merge 전 꼭 코드 리뷰가 아니더라도 작업한 내용에 대해서 다양한 검사를 자동화할 수 있는 강력한 기능들이 많다. 이러한 자동화는 CI(지속적 통합) 관점에서 매우 중요한데 코드에 대해 체크해야 할 부분들(빌드, 테스트, 정적 분석 등)을 &ldquo;알아서&rdquo; 해준다면 작업자는 오롯이 비즈니스 로직 개발에 대해서만 신경 쓸 수 있으니 생산성 절약 측면에서 엄청난 효과를 볼 수 있다.
내가 하는일에만 집중할 수 있게! 출처 : https://www.clien.net/service/board/park/10453442&#34; 내가 하는일에만 집중할 수 있게! 출처 : https://www.clien.net/service/board/park/10453442  이번 포스팅에서는 그중에서도 아주 간단한 설정만으로 work branch의 빌드 상태를 검사해 볼 수 있는 Jenkins의 Github Pull Request Builder를 설치 및 활용해 보고자 한다.
 사실 최근 팀에서 CI 서버를 이전해야 했었다. 머릿속에서는 어떻게 하면 되겠지 싶었지만 막상 해보려니 Jenkins 버전업도 되었고 뭐부터 해야 할지 허둥대는 필자가 부끄러웠다. 이참에 정리를 해보며 다시 한번 리마인드 하는 시간을 가져보고자 한다. (이래서 기억보다 기록이 중요하다.)
 준비물 　전체적인 흐름은 아래 그림처럼 흘러가기 때문에 당연히 서버에 Jenkins 가 설치되어 있어야 한다. Jenkins 설치는 필자의 포스팅(Jenkins 설치 치트키)를 참고해 보는 것도 좋을 것 같다.
전체적인 흐름&#34; 전체적인 흐름  　참고로 필자는 GitHub Enterprise 버전에서 사용했는데 일반 Github에서도 동일한 방법으로 사용 가능하다.
Github과 Jenkins의 연동을 위한 2가지 설정 　Github 과 Jenkins 가 통신이 되도록 설정해 줘야 한다. 그래야 Github의 코드를 받아서 Jenkins 가 빌드를 하고 그 빌드 결과를 다시 Github에 리포트가 가능해지기 때문이다. 먼저 첫 번째로 ssh 설정으로 Github의 코드를 가져오도록 ssh 설정을 해두자. ssh 설정하는 방법은 필자의 포스팅(Github과 Jenkins 연동하기)편을 확인해보면 될 것 같다.
　그다음으로 아래에서 이야기할 GitHub Pull Request Builder라는 Jenkins plugin 이 빌드가 끝난 뒤에 결과를 리포팅 해줄 수 있는 인증 토큰을 발급받아두자. Github > Settings > Developer settings > Personal access tokens 화면에서 키를 생성하고 만들어진 키를 저장해 둔다. (이 키는 보안에 유의해야 하고, 화면 경고(?)에서도 볼 수 있듯이 키는 생성 시 한 번밖에 볼 수 없기 때문에 미리 저장해 둬야 한다.)
인증토큰을 미리 받아두자.&#34; 인증토큰을 미리 받아두자.  Jenkins 설정 　Jenkins > 관리 > pluginManager에 들어가 GitHub Pull Request Builder를 검색 후 설치해 준다. 그러고 나서 Jenkins > 관리 > 환경설정에 들어가 보면 아래와 같이 GitHub Pull Request Builder 항목이 생긴 것을 확인할 수 있고 위에서 설정한 인증토큰을 아래처럼 등록 후 저장을 한다.
credentials 을 위에서 발급받은 인증토큰으로 등록해준다.&#34; credentials 을 위에서 발급받은 인증토큰으로 등록해준다.  　Jenkins job을 하나 만들고 pullRequest 가 발생했을 때 자동으로 실행될 수 있도록 설정을 해준다. 먼저 General 탭에 Github project에 Github url 을 적어주고
 　소스 코드 관리 탭에서 ssh 주소를 적고 위에서 미리 설정한 ssh 키로 credentials 값을 넣어준다. 전에도 이야기했지만 이 부분에서 오류가 발생하면 빨간색 글씨로 오류 내용이 나오고 아래 화면처럼 오류가 없다면 아무것도 안 나온다. Refspec 에 +refs/pull/*:refs/remotes/origin/pr/* 라고 적어주고 브랜치 설정은 파라미터로 받아와서 pullRequest를 발생시킨 브랜치를 빌드 할 수 있도록 ${sha1} 라고 적어주자."><meta property="og:type" content="article"><meta property="og:url" content="https://taetaetae.github.io/2020/09/07/github-pullrequest-build/"><meta property="og:image" content="https://taetaetae.github.io/images/github-pullrequest-build/programmer-github-jenkins.jpg"><meta property="article:published_time" content="2020-09-07T10:09:56+00:00"><meta property="article:modified_time" content="2020-09-07T10:09:56+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://taetaetae.github.io/images/github-pullrequest-build/programmer-github-jenkins.jpg"><meta name=twitter:title content="빌드/테스트는 내가 해줄게. 너는 코딩에 집중해 (by GitHub Pull Request Builder)"><meta name=twitter:description content="git 은 분산 버전 관리 시스템 중 가장 잘 알려져 있다고 해도 과언이 아닐 정도로 대부분의 시스템에서 사용되고 있는 것 같다. 이를 웹서비스에서 보다 편하게 사용할 수 있도록 한 시스템이 Github. Github 을 사용하는 이유 중에 가장 큰 이유를 하나만 이야기해보자면 바로 온라인상에서 코드 리뷰를 할 수 있는 pullRequest라는 기능 때문이 아닐까 조심스럽게 생각을 해본다.
　pullRequest는 work branch에서 작업한 내용을 base branch로 merge 전 꼭 코드 리뷰가 아니더라도 작업한 내용에 대해서 다양한 검사를 자동화할 수 있는 강력한 기능들이 많다. 이러한 자동화는 CI(지속적 통합) 관점에서 매우 중요한데 코드에 대해 체크해야 할 부분들(빌드, 테스트, 정적 분석 등)을 &ldquo;알아서&rdquo; 해준다면 작업자는 오롯이 비즈니스 로직 개발에 대해서만 신경 쓸 수 있으니 생산성 절약 측면에서 엄청난 효과를 볼 수 있다.
내가 하는일에만 집중할 수 있게! 출처 : https://www.clien.net/service/board/park/10453442&#34; 내가 하는일에만 집중할 수 있게! 출처 : https://www.clien.net/service/board/park/10453442  이번 포스팅에서는 그중에서도 아주 간단한 설정만으로 work branch의 빌드 상태를 검사해 볼 수 있는 Jenkins의 Github Pull Request Builder를 설치 및 활용해 보고자 한다.
 사실 최근 팀에서 CI 서버를 이전해야 했었다. 머릿속에서는 어떻게 하면 되겠지 싶었지만 막상 해보려니 Jenkins 버전업도 되었고 뭐부터 해야 할지 허둥대는 필자가 부끄러웠다. 이참에 정리를 해보며 다시 한번 리마인드 하는 시간을 가져보고자 한다. (이래서 기억보다 기록이 중요하다.)
 준비물 　전체적인 흐름은 아래 그림처럼 흘러가기 때문에 당연히 서버에 Jenkins 가 설치되어 있어야 한다. Jenkins 설치는 필자의 포스팅(Jenkins 설치 치트키)를 참고해 보는 것도 좋을 것 같다.
전체적인 흐름&#34; 전체적인 흐름  　참고로 필자는 GitHub Enterprise 버전에서 사용했는데 일반 Github에서도 동일한 방법으로 사용 가능하다.
Github과 Jenkins의 연동을 위한 2가지 설정 　Github 과 Jenkins 가 통신이 되도록 설정해 줘야 한다. 그래야 Github의 코드를 받아서 Jenkins 가 빌드를 하고 그 빌드 결과를 다시 Github에 리포트가 가능해지기 때문이다. 먼저 첫 번째로 ssh 설정으로 Github의 코드를 가져오도록 ssh 설정을 해두자. ssh 설정하는 방법은 필자의 포스팅(Github과 Jenkins 연동하기)편을 확인해보면 될 것 같다.
　그다음으로 아래에서 이야기할 GitHub Pull Request Builder라는 Jenkins plugin 이 빌드가 끝난 뒤에 결과를 리포팅 해줄 수 있는 인증 토큰을 발급받아두자. Github > Settings > Developer settings > Personal access tokens 화면에서 키를 생성하고 만들어진 키를 저장해 둔다. (이 키는 보안에 유의해야 하고, 화면 경고(?)에서도 볼 수 있듯이 키는 생성 시 한 번밖에 볼 수 없기 때문에 미리 저장해 둬야 한다.)
인증토큰을 미리 받아두자.&#34; 인증토큰을 미리 받아두자.  Jenkins 설정 　Jenkins > 관리 > pluginManager에 들어가 GitHub Pull Request Builder를 검색 후 설치해 준다. 그러고 나서 Jenkins > 관리 > 환경설정에 들어가 보면 아래와 같이 GitHub Pull Request Builder 항목이 생긴 것을 확인할 수 있고 위에서 설정한 인증토큰을 아래처럼 등록 후 저장을 한다.
credentials 을 위에서 발급받은 인증토큰으로 등록해준다.&#34; credentials 을 위에서 발급받은 인증토큰으로 등록해준다.  　Jenkins job을 하나 만들고 pullRequest 가 발생했을 때 자동으로 실행될 수 있도록 설정을 해준다. 먼저 General 탭에 Github project에 Github url 을 적어주고
 　소스 코드 관리 탭에서 ssh 주소를 적고 위에서 미리 설정한 ssh 키로 credentials 값을 넣어준다. 전에도 이야기했지만 이 부분에서 오류가 발생하면 빨간색 글씨로 오류 내용이 나오고 아래 화면처럼 오류가 없다면 아무것도 안 나온다. Refspec 에 +refs/pull/*:refs/remotes/origin/pr/* 라고 적어주고 브랜치 설정은 파라미터로 받아와서 pullRequest를 발생시킨 브랜치를 빌드 할 수 있도록 ${sha1} 라고 적어주자."><meta name=application-name content="👨‍💻꿈꾸는 태태태의 공간"><meta name=apple-mobile-web-app-title content="👨‍💻꿈꾸는 태태태의 공간"><meta name=naver-site-verification content="2d1cdbb963ba178aa7cbf58500afc668cae1e645"><meta name=google-site-verification content="vvFCdv0-GuQhEWG8vtNJfA7YSY2HYQ1hpHh9P-a6Pv8"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://taetaetae.github.io/2020/09/07/github-pullrequest-build/><link rel=prev href=https://taetaetae.github.io/2020/07/12/toy-projects-second-year-review/><link rel=next href=https://taetaetae.github.io/2020/10/04/a-good-developer-in-terms-of-log-and-monitoring/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"빌드/테스트는 내가 해줄게. 너는 코딩에 집중해 (by GitHub Pull Request Builder)","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/taetaetae.github.io\/2020\/09\/07\/github-pullrequest-build\/"},"genre":"posts","keywords":"Github, pullRequest, Jenkins, ci, archives-2020","wordcount":701,"url":"https:\/\/taetaetae.github.io\/2020\/09\/07\/github-pullrequest-build\/","datePublished":"2020-09-07T10:09:56+00:00","dateModified":"2020-09-07T10:09:56+00:00","publisher":{"@type":"Organization","name":"태태태"},"author":{"@type":"Person","name":"태태태"},"description":""}</script></head><body header-desktop=auto header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':('auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark'))&&document.body.setAttribute('theme','dark');</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="👨‍💻꿈꾸는 태태태의 공간">👨‍💻꿈꾸는 태태태의 공간</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="👨‍💻꿈꾸는 태태태의 공간">👨‍💻꿈꾸는 태태태의 공간</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/>Posts</a><a class=menu-item href=/tags/>Tags</a><a class=menu-item href=/categories/>Categories</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:inline-block;width:260px;height:600px data-ad-client=ca-pub-5788330009690816 data-ad-slot=2248955907></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><article class="page single"><h1 class="single-title animated flipInX">빌드/테스트는 내가 해줄게. 너는 코딩에 집중해 (by GitHub Pull Request Builder)</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://taetaetae.github.io/resume title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw"></i>태태태</a></span>&nbsp;<span class=post-category>included in <a href=/categories/tech/><i class="far fa-folder fa-fw"></i>Tech</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2020-09-07>2020-09-07</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;701 words&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;4 minutes&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#준비물>준비물</a><ul><li><a href=#github과-jenkins의-연동을-위한-2가지-설정>Github과 Jenkins의 연동을 위한 2가지 설정</a></li></ul></li><li><a href=#jenkins-설정>Jenkins 설정</a></li><li><a href=#테스트>테스트</a></li><li><a href=#마치며>마치며</a></li></ul></nav></div></div><div class=content id=content><p>　git 은 분산 버전 관리 시스템 중 가장 잘 알려져 있다고 해도 과언이 아닐 정도로 대부분의 시스템에서 사용되고 있는 것 같다. 이를 웹서비스에서 보다 편하게 사용할 수 있도록 한 시스템이 Github. Github 을 사용하는 이유 중에 가장 큰 이유를 하나만 이야기해보자면 바로 온라인상에서 코드 리뷰를 할 수 있는 pullRequest라는 기능 때문이 아닐까 조심스럽게 생각을 해본다.</p><p>　pullRequest는 work branch에서 작업한 내용을 base branch로 merge 전 꼭 코드 리뷰가 아니더라도 작업한 내용에 대해서 다양한 검사를 자동화할 수 있는 강력한 기능들이 많다. 이러한 자동화는 CI(지속적 통합) 관점에서 매우 중요한데 코드에 대해 체크해야 할 부분들(빌드, 테스트, 정적 분석 등)을 &ldquo;알아서&rdquo; 해준다면 작업자는 오롯이 비즈니스 로직 개발에 대해서만 신경 쓸 수 있으니 생산성 절약 측면에서 엄청난 효과를 볼 수 있다.</p><figure><a class=lightgallery href=/images/github-pullrequest-build/car.gif title=/images/github-pullrequest-build/car.gif data-thumbnail=/images/github-pullrequest-build/car.gif data-sub-html="<h2>내가 하는일에만 집중할 수 있게!  출처 : https://www.clien.net/service/board/park/10453442</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/images/github-pullrequest-build/car.gif data-srcset="/images/github-pullrequest-build/car.gif, /images/github-pullrequest-build/car.gif 1.5x, /images/github-pullrequest-build/car.gif 2x" data-sizes=auto alt=/images/github-pullrequest-build/car.gif width=50%></a><figcaption class=image-caption>내가 하는일에만 집중할 수 있게!<br>출처 : <a href=https://www.clien.net/service/board/park/10453442>https://www.clien.net/service/board/park/10453442</a></figcaption></figure><p>이번 포스팅에서는 그중에서도 아주 간단한 설정만으로 work branch의 빌드 상태를 검사해 볼 수 있는 Jenkins의 Github Pull Request Builder를 설치 및 활용해 보고자 한다.</p><blockquote><p>사실 최근 팀에서 CI 서버를 이전해야 했었다. 머릿속에서는 어떻게 하면 되겠지 싶었지만 막상 해보려니 Jenkins 버전업도 되었고 뭐부터 해야 할지 허둥대는 필자가 부끄러웠다. 이참에 정리를 해보며 다시 한번 리마인드 하는 시간을 가져보고자 한다. (이래서 기억보다 기록이 중요하다.)</p></blockquote><h2 id=준비물>준비물</h2><p>　전체적인 흐름은 아래 그림처럼 흘러가기 때문에 당연히 서버에 Jenkins 가 설치되어 있어야 한다. Jenkins 설치는 필자의 포스팅(<a href=https://taetaetae.github.io/2018/12/02/jenkins-install/ target=_blank rel="noopener noreffer">Jenkins 설치 치트키</a>)를 참고해 보는 것도 좋을 것 같다.</p><figure><a class=lightgallery href=/images/github-pullrequest-build/programmer-github-jenkins.jpg title=/images/github-pullrequest-build/programmer-github-jenkins.jpg data-thumbnail=/images/github-pullrequest-build/programmer-github-jenkins.jpg data-sub-html="<h2>전체적인 흐름</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/images/github-pullrequest-build/programmer-github-jenkins.jpg data-srcset="/images/github-pullrequest-build/programmer-github-jenkins.jpg, /images/github-pullrequest-build/programmer-github-jenkins.jpg 1.5x, /images/github-pullrequest-build/programmer-github-jenkins.jpg 2x" data-sizes=auto alt=/images/github-pullrequest-build/programmer-github-jenkins.jpg width=50%></a><figcaption class=image-caption>전체적인 흐름</figcaption></figure><p>　참고로 필자는 GitHub Enterprise 버전에서 사용했는데 일반 Github에서도 동일한 방법으로 사용 가능하다.</p><h3 id=github과-jenkins의-연동을-위한-2가지-설정>Github과 Jenkins의 연동을 위한 2가지 설정</h3><p>　Github 과 Jenkins 가 통신이 되도록 설정해 줘야 한다. 그래야 Github의 코드를 받아서 Jenkins 가 빌드를 하고 그 빌드 결과를 다시 Github에 리포트가 가능해지기 때문이다. 먼저 첫 번째로 ssh 설정으로 Github의 코드를 가져오도록 ssh 설정을 해두자. ssh 설정하는 방법은 필자의 포스팅(<a href=https://taetaetae.github.io/2018/02/08/github-with-jenkins/ target=_blank rel="noopener noreffer">Github과 Jenkins 연동하기</a>)편을 확인해보면 될 것 같다.</p><p>　그다음으로 아래에서 이야기할 <code>GitHub Pull Request Builder</code>라는 Jenkins plugin 이 빌드가 끝난 뒤에 결과를 리포팅 해줄 수 있는 인증 토큰을 발급받아두자. Github > Settings > Developer settings > Personal access tokens 화면에서 키를 생성하고 만들어진 키를 저장해 둔다. (이 키는 보안에 유의해야 하고, 화면 경고(?)에서도 볼 수 있듯이 키는 생성 시 한 번밖에 볼 수 없기 때문에 미리 저장해 둬야 한다.)</p><figure><a class=lightgallery href=/images/github-pullrequest-build/github-access-token.jpg title=/images/github-pullrequest-build/github-access-token.jpg data-thumbnail=/images/github-pullrequest-build/github-access-token.jpg data-sub-html="<h2>인증토큰을 미리 받아두자.</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/images/github-pullrequest-build/github-access-token.jpg data-srcset="/images/github-pullrequest-build/github-access-token.jpg, /images/github-pullrequest-build/github-access-token.jpg 1.5x, /images/github-pullrequest-build/github-access-token.jpg 2x" data-sizes=auto alt=/images/github-pullrequest-build/github-access-token.jpg width=50%></a><figcaption class=image-caption>인증토큰을 미리 받아두자.</figcaption></figure><h2 id=jenkins-설정>Jenkins 설정</h2><p>　Jenkins > 관리 > pluginManager에 들어가 <code>GitHub Pull Request Builder</code>를 검색 후 설치해 준다. 그러고 나서 Jenkins > 관리 > 환경설정에 들어가 보면 아래와 같이 <code>GitHub Pull Request Builder</code> 항목이 생긴 것을 확인할 수 있고 위에서 설정한 인증토큰을 아래처럼 등록 후 저장을 한다.</p><figure><a class=lightgallery href=/images/github-pullrequest-build/add-github-access-token.jpg title=/images/github-pullrequest-build/add-github-access-token.jpg data-thumbnail=/images/github-pullrequest-build/add-github-access-token.jpg data-sub-html="<h2>credentials 을 위에서 발급받은 인증토큰으로 등록해준다.</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/images/github-pullrequest-build/add-github-access-token.jpg data-srcset="/images/github-pullrequest-build/add-github-access-token.jpg, /images/github-pullrequest-build/add-github-access-token.jpg 1.5x, /images/github-pullrequest-build/add-github-access-token.jpg 2x" data-sizes=auto alt=/images/github-pullrequest-build/add-github-access-token.jpg width=50%></a><figcaption class=image-caption>credentials 을 위에서 발급받은 인증토큰으로 등록해준다.</figcaption></figure><p>　Jenkins job을 하나 만들고 pullRequest 가 발생했을 때 자동으로 실행될 수 있도록 설정을 해준다. 먼저 General 탭에 <code>Github project</code>에 Github url 을 적어주고</p><a class=lightgallery href=/images/github-pullrequest-build/jenkins-general.jpg title=/images/github-pullrequest-build/jenkins-general.jpg data-thumbnail=/images/github-pullrequest-build/jenkins-general.jpg><img class=lazyload src=/svg/loading.min.svg data-src=/images/github-pullrequest-build/jenkins-general.jpg data-srcset="/images/github-pullrequest-build/jenkins-general.jpg, /images/github-pullrequest-build/jenkins-general.jpg 1.5x, /images/github-pullrequest-build/jenkins-general.jpg 2x" data-sizes=auto alt=/images/github-pullrequest-build/jenkins-general.jpg width=50%></a><p>　소스 코드 관리 탭에서 ssh 주소를 적고 위에서 미리 설정한 ssh 키로 credentials 값을 넣어준다. 전에도 이야기했지만 이 부분에서 오류가 발생하면 빨간색 글씨로 오류 내용이 나오고 아래 화면처럼 오류가 없다면 아무것도 안 나온다. Refspec 에 <code>+refs/pull/*:refs/remotes/origin/pr/*</code> 라고 적어주고 브랜치 설정은 파라미터로 받아와서 pullRequest를 발생시킨 브랜치를 빌드 할 수 있도록 <code>${sha1}</code> 라고 적어주자.</p><a class=lightgallery href=/images/github-pullrequest-build/jenkins-sourceCode.jpg title=/images/github-pullrequest-build/jenkins-sourceCode.jpg data-thumbnail=/images/github-pullrequest-build/jenkins-sourceCode.jpg><img class=lazyload src=/svg/loading.min.svg data-src=/images/github-pullrequest-build/jenkins-sourceCode.jpg data-srcset="/images/github-pullrequest-build/jenkins-sourceCode.jpg, /images/github-pullrequest-build/jenkins-sourceCode.jpg 1.5x, /images/github-pullrequest-build/jenkins-sourceCode.jpg 2x" data-sizes=auto alt=/images/github-pullrequest-build/jenkins-sourceCode.jpg width=50%></a><p>　앞서 이야기했듯이 (제목처럼) pullReqeust를 등록하면 자동으로 빌드가 돌아가게 해야 한다. 그러기 위해서는 이 Jenkins job 을 위에서 설치한 <code>GitHub Pull Request Builder</code> 플러그인으로 빌드를 유발해야 한다. 아래 화면처럼 <code>GitHub Pull Request Builder</code> 항목을 체크하고 Use github hooks for build triggering에 체크를 해줘서 해당 Github Repository에 webHook 이 등록되게 해주자. 또한 Admin list에서 pullRequest 등록 시 허용할 사용자의 id를 적어준다.</p><a class=lightgallery href=/images/github-pullrequest-build/jenkins-buildTrigger.jpg title=/images/github-pullrequest-build/jenkins-buildTrigger.jpg data-thumbnail=/images/github-pullrequest-build/jenkins-buildTrigger.jpg><img class=lazyload src=/svg/loading.min.svg data-src=/images/github-pullrequest-build/jenkins-buildTrigger.jpg data-srcset="/images/github-pullrequest-build/jenkins-buildTrigger.jpg, /images/github-pullrequest-build/jenkins-buildTrigger.jpg 1.5x, /images/github-pullrequest-build/jenkins-buildTrigger.jpg 2x" data-sizes=auto alt=/images/github-pullrequest-build/jenkins-buildTrigger.jpg width=50%></a><p>　위에서 등록한 설정으로 인해 해당 Github Repository에 webHook이 자동으로 등록된 것을 확인할 수 있다.</p><a class=lightgallery href=/images/github-pullrequest-build/jenkins-webhook.jpg title=/images/github-pullrequest-build/jenkins-webhook.jpg data-thumbnail=/images/github-pullrequest-build/jenkins-webhook.jpg><img class=lazyload src=/svg/loading.min.svg data-src=/images/github-pullrequest-build/jenkins-webhook.jpg data-srcset="/images/github-pullrequest-build/jenkins-webhook.jpg, /images/github-pullrequest-build/jenkins-webhook.jpg 1.5x, /images/github-pullrequest-build/jenkins-webhook.jpg 2x" data-sizes=auto alt=/images/github-pullrequest-build/jenkins-webhook.jpg width=50%></a><h2 id=테스트>테스트</h2><p>　자, 그럼 이제 설정을 끝냈으니 실제로 pullRequest를 등록하면 어떤 일이 발생하는지 알아보자. 등록을 하자마자 자동으로 아래처럼 빌드가 돌아가는 것을 볼 수 있고</p><a class=lightgallery href=/images/github-pullrequest-build/pullRequest-build-pending.jpg title=/images/github-pullrequest-build/pullRequest-build-pending.jpg data-thumbnail=/images/github-pullrequest-build/pullRequest-build-pending.jpg><img class=lazyload src=/svg/loading.min.svg data-src=/images/github-pullrequest-build/pullRequest-build-pending.jpg data-srcset="/images/github-pullrequest-build/pullRequest-build-pending.jpg, /images/github-pullrequest-build/pullRequest-build-pending.jpg 1.5x, /images/github-pullrequest-build/pullRequest-build-pending.jpg 2x" data-sizes=auto alt=/images/github-pullrequest-build/pullRequest-build-pending.jpg width=50%></a><p>　<code>Details</code>를 누르면 해당 Jenkins job으로 이동되게 되는데 열심히 빌드가 되는 걸 볼 수 있다. 시간이 지나고 빌드가 완료 된 다음 pullRequest를 보면 빌드가 성공되었다는 표시를 볼 수 있다.</p><a class=lightgallery href=/images/github-pullrequest-build/pullRequest-successful.jpg title=/images/github-pullrequest-build/pullRequest-successful.jpg data-thumbnail=/images/github-pullrequest-build/pullRequest-successful.jpg><img class=lazyload src=/svg/loading.min.svg data-src=/images/github-pullrequest-build/pullRequest-successful.jpg data-srcset="/images/github-pullrequest-build/pullRequest-successful.jpg, /images/github-pullrequest-build/pullRequest-successful.jpg 1.5x, /images/github-pullrequest-build/pullRequest-successful.jpg 2x" data-sizes=auto alt=/images/github-pullrequest-build/pullRequest-successful.jpg width=50%></a><p>　빌드가 실패하면 merge를 하지 못하게 하는 옵션도 있다. base branch를 <code>보호</code>하는 옵션인데, 아래 화면처럼 빌드 가 실패하면 merge 버튼이 활성화되지 못하도록 해두고</p><a class=lightgallery href=/images/github-pullrequest-build/github-branch-protection.jpg title=/images/github-pullrequest-build/github-branch-protection.jpg data-thumbnail=/images/github-pullrequest-build/github-branch-protection.jpg><img class=lazyload src=/svg/loading.min.svg data-src=/images/github-pullrequest-build/github-branch-protection.jpg data-srcset="/images/github-pullrequest-build/github-branch-protection.jpg, /images/github-pullrequest-build/github-branch-protection.jpg 1.5x, /images/github-pullrequest-build/github-branch-protection.jpg 2x" data-sizes=auto alt=/images/github-pullrequest-build/github-branch-protection.jpg width=50%></a><p>　임의로 빌드를 실패하게 하면 아래처럼 merge버튼이 비활성화되는 걸 볼 수 있다.</p><a class=lightgallery href=/images/github-pullrequest-build/github-build-fail.jpg title=/images/github-pullrequest-build/github-build-fail.jpg data-thumbnail=/images/github-pullrequest-build/github-build-fail.jpg><img class=lazyload src=/svg/loading.min.svg data-src=/images/github-pullrequest-build/github-build-fail.jpg data-srcset="/images/github-pullrequest-build/github-build-fail.jpg, /images/github-pullrequest-build/github-build-fail.jpg 1.5x, /images/github-pullrequest-build/github-build-fail.jpg 2x" data-sizes=auto alt=/images/github-pullrequest-build/github-build-fail.jpg width=50%></a><h2 id=마치며>마치며</h2><p>　위에서 설명한 기능을 잘 활용하면 정말 무궁무진하게 활용이 가능하다. 필자가 운영하는 컴포넌트는 이런저런 이유로 빌드가 오래 걸리는데 계속 기다리는 시간조차 유의미한 시간에 사용하고 싶어 빌드가 끝나면 메신저로 빌드 결과를 알려주도록 하였다. 또한 이 빌드 트리거를 잘 활용하면 정적 분석을 한다든지 주요 기능 테스트를 해서 보다 코드의 안정성을 올리고 개발 생산성 또한 올릴 수 있는 좋은 방법이라 생각한다.</p></div><center><style>.bmc-button img{width:27px!important;margin-bottom:1px!important;box-shadow:none!important;border:none!important;vertical-align:middle!important}.bmc-button{line-height:29px!important;height:30px!important;text-decoration:none!important;display:inline-flex!important;color:#000!important;background-color:#fd0!important;border-radius:3px!important;border:1px solid transparent!important;padding:1px 9px!important;font-size:22px!important;letter-spacing:.6px!important;box-shadow:0 1px 2px rgba(190,190,190,.5)!important;-webkit-box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;margin:0 auto!important;font-family:cookie,cursive!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;-o-transition:.3s all linear!important;-webkit-transition:.3s all linear!important;-moz-transition:.3s all linear!important;-ms-transition:.3s all linear!important;transition:.3s all linear!important}.bmc-button:hover,.bmc-button:active,.bmc-button:focus{-webkit-box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;text-decoration:none!important;box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;opacity:.85!important;color:#000!important}</style><link href="https://fonts.googleapis.com/css?family=Cookie" rel=stylesheet><center><br><a class=bmc-button target=_blank href=https://www.buymeacoffee.com/taetaetae><img src=https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg alt="Buy me a coffee"><span style=margin-left:5px>Buy me a coffee</span></a>
<a href=https://bit.ly/ddbSupport target=_blank><img src=https://i.imgur.com/peaYpjh.png style=height:28px></a></center><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2020-09-07</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://taetaetae.github.io/2020/09/07/github-pullrequest-build/ data-title="빌드/테스트는 내가 해줄게. 너는 코딩에 집중해 (by GitHub Pull Request Builder)" data-hashtags=Github,pullRequest,Jenkins,ci,archives-2020><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://taetaetae.github.io/2020/09/07/github-pullrequest-build/ data-hashtag=Github><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://taetaetae.github.io/2020/09/07/github-pullrequest-build/><i class="fab fa-linkedin fa-fw"></i></a><a href=javascript:void(0); title="Share on Blogger" data-sharer=blogger data-url=https://taetaetae.github.io/2020/09/07/github-pullrequest-build/ data-title="빌드/테스트는 내가 해줄게. 너는 코딩에 집중해 (by GitHub Pull Request Builder)" data-description><i class="fab fa-blogger fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/github/>github</a>,&nbsp;<a href=/tags/pullrequest/>pullRequest</a>,&nbsp;<a href=/tags/jenkins/>jenkins</a>,&nbsp;<a href=/tags/ci/>ci</a>,&nbsp;<a href=/tags/archives-2020/>archives-2020</a></section><section><span><a href=javascript:void(0); onclick=window.history.back();>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/2020/07/12/toy-projects-second-year-review/ class=prev rel=prev title="벌써 2년 (feat. 토이프로젝트 회고,가치,수입)"><i class="fas fa-angle-left fa-fw"></i>벌써 2년 (feat. 토이프로젝트 회고,가치,수입)</a>
<a href=/2020/10/04/a-good-developer-in-terms-of-log-and-monitoring/ class=next rel=next title="그런 개발자로 괜찮은가 - '로그 & 모니터링' 편">그런 개발자로 괜찮은가 - '로그 & 모니터링' 편<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments><div id=utterances></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://utteranc.es/>Utterances</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.74.3">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i>LoveIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2016 - 2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://taetaetae.github.io/resume target=_blank>태태태</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i></a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=/lib/lightgallery/lightgallery.min.css><script type=text/javascript src=/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/lightgallery/lightgallery.min.js></script><script type=text/javascript src=/lib/lightgallery/lg-thumbnail.min.js></script><script type=text/javascript src=/lib/lightgallery/lg-zoom.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript>window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":500},"comment":{"utterances":{"darkTheme":"github-dark","issueTerm":"pathname","label":"Comment","lightTheme":"github-light","repo":"taetaetae/blog-comment"}},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true}};</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','UA-86432198-1',{'anonymize_ip':true});</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=UA-86432198-1" async></script></body></html>