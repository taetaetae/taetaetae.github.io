<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>spring - Tag - ğŸ‘¨â€ğŸ’»ê¿ˆê¾¸ëŠ” íƒœíƒœíƒœì˜ ê³µê°„</title><link>https://taetaetae.github.io/tags/spring/</link><description>spring - Tag - ğŸ‘¨â€ğŸ’»ê¿ˆê¾¸ëŠ” íƒœíƒœíƒœì˜ ê³µê°„</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Sun, 29 Sep 2019 17:55:50 +0000</lastBuildDate><atom:link href="https://taetaetae.github.io/tags/spring/" rel="self" type="application/rss+xml"/><item><title>ìš°ì•„í•œ ìŠ¤í”„ë§ ë°°ì¹˜ í…Œí¬ì„¸ë¯¸ë‚˜ ì •ë¦¬ ë° í›„ê¸° (by ìš°ì•„í•œ í˜•ì œë“¤)</title><link>https://taetaetae.github.io/2019/09/29/woowabros-spring-batch/</link><pubDate>Sun, 29 Sep 2019 17:55:50 +0000</pubDate><author>Author</author><guid>https://taetaetae.github.io/2019/09/29/woowabros-spring-batch/</guid><description><![CDATA[<div class="featured-image">
                <img src="/images/woowabros-spring-batch/woo.jpeg" referrerpolicy="no-referrer">
            </div>ì§€ë‚œì£¼ ìš°ì•„í•œ í˜•ì œë“¤ì—ì„œ ì§„í–‰í•˜ì˜€ë˜ &ldquo;9ì›” ìš°ì•„í•œ í…Œí¬ ì„¸ë¯¸ë‚˜ - ìš°ì•„í•œ ìŠ¤í”„ë§ ë°°ì¹˜&rdquo; ì— ë‹¤ë…€ì™”ë‹¤. í•„ìì—ê²Œ ì´ë²ˆ 9ì›”ì€ ì •ì‹ ì´ ì–´ë””ì— ìˆëŠ”ì§€ ëª¨ë¥¼ë§Œí¼ ë°”ì˜ê³  í˜ë“¤ì—ˆì§€ë§Œ ì˜ˆì „ë¶€í„° ê¶ê¸ˆí•˜ê¸°ë„ í–ˆê³  ìš”ì¦˜ë“¤ì–´ ê´€ì‹¬ì„ ê°–ë˜ &ldquo;ë°°ì¹˜ ì–´í”Œë¦¬ì¼€ì´ì…˜&quot;ì„ ì–´ë–»ê²Œ í•˜ë©´ &ldquo;ìš°ì•„í•œ ë°©ë²•&quot;ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆì„ì§€ì— ëŒ€í•´ ì—¬ëŸ¬ ìƒê°ë“¤ì´ ìˆì—ˆê¸°ì— í° ê¸°ëŒ€ë¥¼ ê°€ì§€ê³  ì§€ì˜¥ì² ì„ ê²¬ë””ë©° ì ì‹¤ ê·¼ì²˜ì— ìˆëŠ” ìš°ì•„í•œ í˜•ì œë“¤ ì‘ì€ì§‘ìœ¼ë¡œ ê°€ê²Œ ë˜ì—ˆë‹¤. ì–´ë–¤ ë‚´ìš©ì„ ë°œí‘œí•˜ì˜€ëŠ”ì§€ì— ëŒ€í•´ ê¸°ì–µì˜í•˜ëŠ” ë˜‘ë˜‘í•œ ì•µë¬´ìƒˆê°€ ë˜ì–´ ì •ë¦¬í•˜ê¸° ë³´ë‹¤ ì£¼ìš” í¬ì¸íŠ¸ì— ëŒ€í•œ ìƒê°ê³¼ í•¨ê»˜ ì°¸ì—¬ë¥¼ ëª»í•œ ë¶„ë“¤ ìœ„í•´ì„œë¼ê¸° ë³´ë‹¤ ë‚´ ìŠ¤ìŠ¤ë¡œ ì •ë¦¬ë¥¼ í•˜ê¸° ìœ„í•´ í¬ìŠ¤íŒ…ì„ ì‘ì„±í•´ ë³´ê³ ì í•œë‹¤. (ì´ë²ˆì—ë„ ë¶ˆëŸ¬ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤ ^=^)
ì¸íŠ¸ë¡œ ì—°ì‚¬ì ë¶„ì€ ì›Œë‚™ì— ìœ ëª…í•˜ì‹  ë¶„ì´ë¼ ë³„ë„ì˜ ì„¤ëª…ì´ í•„ìš” ì—†ì´ ìš´ì˜í•˜ì‹œëŠ” ë¸”ë¡œê·¸ ì£¼ì†Œë¡œ ëŒ€ì²´ë¥¼ í•´ë³¸ë‹¤. ì´ë²ˆ í–‰ì‚¬ì— ì´ˆëŒ€ë˜ì‹  ë¶„ë“¤ì€ í•œë²ˆì´ë¼ë„ ìŠ¤í”„ë§ ë°°ì¹˜ë¥¼ ì¨ë¶„ ë¶„ë“¤ì„ ëŒ€ìƒìœ¼ë¡œ ì§„í–‰í•˜ê²Œ ë˜ì—ˆë‹¤ê³  í–ˆëŠ”ë° ë§ˆì¹¨ í•„ìë„ íŒ€ ë‚´ì—ì„œ ìš´ì˜í•˜ê³  ìˆëŠ” ë°°ì¹˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë³´ë‹¤ íš¨ìœ¨ì ì´ê³  ìš°ì•„í•˜ê²Œ ë°”ê¿”ë³´ê³ ì í•˜ëŠ” ë‹ˆì¦ˆê°€ ìˆì—ˆê¸°ì— ì•„ë§ˆ ì´ˆëŒ€ëœê²Œ ì•„ë‹ê¹Œ ì‹¶ë‹¤.
ì•„ê¸°ìê¸°í•œ ìš°ì•„í•œ í˜•ì œë“¤ ê±´ë¬¼ ë‚´ë¶€" ì•„ê¸°ìê¸°í•œ ìš°ì•„í•œ í˜•ì œë“¤ ê±´ë¬¼ ë‚´ë¶€  ë”ë¶ˆì–´ ë°œí‘œì „ì— ê°„ëµíˆ íšŒì‚¬ê°€ ì›í•˜ëŠ” ì¸ì¬ì— ëŒ€í•˜ì—¬ ì–¸ê¸‰í•´ì£¼ì…¨ëŠ”ë° ê·¸ê²Œ ì–´ì°Œë‚˜ ê³µê°ì´ ê°€ë˜ì§€. ì—­ì‹œ ìƒê°ì´ ë‚¨ë‹¤ë¥¸ íšŒì‚¬êµ¬ë‚˜ í•˜ê³  ë‹¤ì‹œí•œë²ˆ ìƒê°ì„.
 ìê¸°ë³´ë‹¤ ê²½í—˜ì´ &ldquo;ì ì€&rdquo; ì‚¬ëŒì—ê²Œ &ldquo;ì„¤ë“ì„ ë‹¹í•  ìˆ˜&rdquo; ìˆì–´ì•¼ í•˜ê³ , ìê¸°ë³´ë‹¤ ê²½í—˜ì´ &ldquo;ë§ì€ ì‚¬ëŒì„ ì„¤ë“&rdquo; ì‹œí‚¬ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
 ê¸°ë³¸í¸ ë°°ì¹˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ë€ ì»´í“¨í„°ì—ì„œ ì‚¬ëŒì™€ ìƒí˜¸ì‘ìš©ì—†ì´ ì´ì–´ì§€ëŠ” í”„ë¡œê·¸ë¨(ì‘ì—…)ë“¤ì˜ ì‹¤í–‰ì´ë¼ê³  ìœ„í‚¤í”¼ë””ì•„ì— ê°„ê²°&amp;ëª…ë£Œí•˜ê²Œ ì •ë¦¬ë˜ì–´ ìˆë‹¤. ê·¸ë§Œí¼ ì¼ë°˜ì ì¸ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ê³¼ì˜ ì°¨ì´ê°€ ìˆëŠ”ë° ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ì‹¤ì‹œê°„ ì²˜ë¦¬ê°€ ê¸°ë³¸ì´ê³  ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ ì œê³µí•´ì•¼ í•˜ë‹ˆ ì•„ë¬´ë˜ë„ ì†ë„ê°€ ìƒëŒ€ì ì´ë©° QAì‹œ í¸í•œ ë¶€ë¶„ì´ ìˆë‹¤. ê·¸ì— ë°˜í•´ ë°°ì¹˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë§í•˜ëŠ” ìš”ì²­ì´ë¼ëŠ” ê°œë…ë³´ë‹¤ í›„ì†ì²˜ë¦¬ì— ê°€ê¹ê³ , ì†ë„ ë˜í•œ ì ˆëŒ€ì ì´ë©° QAê°€ ë³µì¡í•˜ë‹¤ëŠ”ê²Œ íŠ¹ì§•ì´ë‹¤. ë”°ë¼ì„œ í…ŒìŠ¤íŠ¸ì½”ë“œëŠ” ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë³´ë‹¤ ë°°ì¹˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë” í•„ìš”í•˜ë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤. ë°°ì¹˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ í•„ìš”í•œ ìƒí™©ì€ í¬ê²Œ ë‘ê°€ì§€ë¡œ ë‚˜ëˆ  ë³¼ ìˆ˜ê°€ ìˆë‹¤ê³  í•œë‹¤.
 ì¼ì • ì£¼ê¸°ë¡œ ì‹¤í–‰ ë˜ì–´ì•¼ í•  ë•Œ ì‹¤ì‹œê°„ ì²˜ë¦¬ê°€ ì–´ë ¤ìš´ ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬ í• ë•Œ  í‰ì†Œ ì²«ë²ˆì§¸ ìƒí™©ë§Œ ìƒê°í•˜ê³  ë°°ì¹˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‘ì„±í•˜ê³¤ í–ˆì—ˆëŠ”ë° ë‘ë²ˆì¬ ìƒí™©ì— ëŒ€í•´ ìƒê°ì— ìƒê°ì„ ë” í•´ë³´ë‹ˆ ìŠ¤í”„ë§ ë°°ì¹˜ë¥¼ ê°„ë‹¨í•˜ê²Œë§Œ (Tasklet) ì‚¬ìš©í•˜ê³  ìˆëŠ”ê±´ ì•„ë‹Œê°€ í•˜ëŠ” ë°˜ì„±ì„ í•´ë³´ê³¤ í–ˆë‹¤. (Reader, Processor, Writer ë“± ë‹¤ì–‘í•œ ë ˆì´ì–´ê°€ ìˆëŠ”ë°ë„&hellip;)
íŠ¹íˆ ìŠ¤í”„ë§ ë°°ì¹˜ì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ì— ìŒ“ì§€ ì•ŠëŠ” ì¡°íšŒë°©ì‹ë¼ê³  í•œë‹¤. (DBê¸°ì¤€) Paging í˜¹ì€ Cursorë¡œ pageSizeë§Œí¼ë§Œ ì½ì–´ì˜¤ê³  chunkSizeë§Œí¼ë§Œ commit í•˜ëŠ” í˜•íƒœ. ì´ëŸ¬í•œ ê° ë ˆì´ì–´ë³„ sizeë¥¼ ì˜ ì¡°ì •í•˜ê¸°ë§Œ í•´ë„ ì ì€ ë…¸ë ¥ìœ¼ë¡œ í° ì„±ëŠ¥ì„ ì–»ì„ ìˆ˜ ìˆëŠ” ë¶€ë¶„ì´ í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ  ì•„ë‹ê¹Œ ë¼ê³  ìƒê°í•´ë³¸ë‹¤.
ë˜í•œ @JobScope ë‚˜ @StepScopeëŠ” Late Binding ì¦‰ ë°°ì¹˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ë˜ëŠ” ì‹œì ì´ ì•„ë‹ˆë¼ Job ì´ ì‹¤í–‰ë ë•Œ ìƒì„±ì´ ë˜ê¸° ë•Œë¬¸ì— ì´ë¥¼ í™œìš©í•˜ì—¬ ë™ì ìœ¼ë¡œ reader / processor / wirter ë ˆì´ì–´ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤ê³  í•œë‹¤.
í™œìš©í¸ ìŠ¤í”„ë§ ë°°ì¹˜ë¥¼ ì´ìš©í•œ ë°°ì¹˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ìˆê³  ì´ë¥¼ ìŠ¤ì¼€ì¥´ë§ ë“± ê´€ë¦¬ë¥¼ í•´ì£¼ëŠ” ë„êµ¬ë“¤ì— ì´ì•¼ê¸°ë¥¼ í•´ì£¼ì…¨ë‹¤.
 Cron  ë¦¬ëˆ…ìŠ¤ë¥¼ ì–´ëŠì •ë„ ì‚¬ìš©í•´ë´¤ë‹¤ë©´ ì•Œë§Œí•œ ë¦¬ëˆ…ìŠ¤ ê¸°ë³¸ ìŠ¤ì¼€ì¥´ë§ í”„ë¡œê·¸ë¨ì¸ Cron. í•„ìë„ Cron ìœ¼ë¡œ ì£¼ê¸°ì ìœ¼ë¡œ ì‹¤í–‰í•˜ë„ë¡ ì„¤ì •í•´ë³´ê¸°ë„ í•˜ì˜€ì§€ë§Œ ë°°ì¹˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ íŠ¹ì„±ìƒ ë¡œê·¸ ë° ì‹¤í–‰/ì¢…ë£Œ ë“± ì œí•œì‚¬í•­ì´ ë§ì€ ê±´ ì‚¬ì‹¤ì¸ê²ƒ ê°™ë‹¤.   Spring MVC + API Call  ì£¼ë³€ì—ì„œ ì‚¬ìš©í•˜ê³  ìˆë‹¤ê³  í•˜ë˜ ë°©ì‹. ì´ ë°©ì‹ì˜ ì¥ì ì€ í•­ìƒ ë– ìˆê¸° ë•Œë¬¸ì— ì–´í”Œë¦¬ì¼€ì´ì…˜ êµ¬ë™ì‹œê°„ì´ ë³„ë„ë¡œ í•„ìš” ì—†ë‹¤ëŠ” ì¥ì ì´ ìˆì§€ë§Œ ì „ë°˜ì ì¸ ê´€ë¦¬ê°€ ì–´ë ¤ìš´ ë‹¨ì ì´ ìˆëŠ”ê²ƒ ê°™ë‹¤. ë¬¼ë¡  ìš¸ë©° ê²¨ìë¨¹ê¸° ì‹ìœ¼ë¡œ ë‹¨ì ì„ ê·¹ë³µí•  ë°©ë²•ì€ ì—¬ëŸ¬ê°€ì§€ê°€ ìˆê² ì§€ë§Œ ëª¨ë“ ê±´ í•­ìƒ Trade off   Spring Batch Admin (Deprecated)  ì˜ˆì „ íŒ€ë¶„ì´ ì•Œë ¤ì£¼ì…”ì„œ ì ê¹ ë´¤ë˜ ë¶€ë¶„ì´ê¸´ í•œë° ì–´ëŠì‚¬ì´ì— Deprecated ë˜ì—ˆë‹¤ê³  í•œë‹¤.   Quertz + Admin  http://www.quartz-scheduler.org/ ì•„ì£¼ ì˜¤ë˜ì „ì— ì¨ë³¸ ê¸°ì–µì´ ìˆì§€ë§Œ ë°°ë³´ë‹¤ ë°°ê¼½ì´ ë” í° ìƒí™©ê°™ì•˜ë˜ í˜ë“¤ì—ˆë˜ ê¸°ì–µë“¤ë§Œ ë‚¨ì•„ìˆëŠ” êµ¬í˜„ë°©ë²•ì¸ê²ƒ ê°™ë‹¤.]]></description></item><item><title>ìŠ¤í”„ë§ì„ í™œìš©í•œ ëŒ€ìš©ëŸ‰ íŒŒì¼ ì—…ë¡œë“œ êµ¬í˜„</title><link>https://taetaetae.github.io/2019/07/21/spring-file-upload/</link><pubDate>Sun, 21 Jul 2019 22:09:58 +0000</pubDate><author>Author</author><guid>https://taetaetae.github.io/2019/07/21/spring-file-upload/</guid><description><![CDATA[<div class="featured-image">
                <img src="/images/spring-file-upload/upload.png" referrerpolicy="no-referrer">
            </div>ê°œë°œì„ í•˜ë‹¤ë³´ë©´ ì‹¤ì œë¡œ ì§ì ‘ êµ¬í˜„ì„ í•´ë³¸ì ì€ ì—†ì§€ë§Œ ì—¬ê¸°ì €ê¸°ì„œ ë“¤ì–´ë³¸ ì§€ì‹ê³¼ ê·¸ ë™ì•ˆì˜ ì§¬ë°¥(?)ìœ¼ë¡œ ì¶”ì¸¡í•´ë³¼ìˆ˜ ìˆëŠ” ë¶€ë¶„ë“¤ì´ ìˆë‹¤. ë¬¼ë¡  ëª¨ë“ ì¼ì— ì •ë‹µì€ ì—†ê² ì§€ë§Œ ìš”ì¦˜ ëŠë¼ëŠ”ê±´ ì±…ì—ì„œ ê³µë¶€ë§Œ í•´ë³¸ê²ƒê³¼ ë‹¤ë¥¸ ë¸”ë¡œê·¸ë“¤ì—ì„œ ëˆˆìœ¼ë¡œë§Œ ë³´ê³  ë„˜ì–´ê°€ëŠ”ê²ƒë“¤ ê·¸ë¦¬ê³  ì§ì ‘ ì†ê°€ë½ì„ ì›€ì§ì—¬ê°€ë©° ì™œ ì—¬ê¸°ì„œëŠ” ì´ ë°©ë²•ì„ ì‚¬ìš©í•˜ì§€ ê³ ë¯¼í•˜ë©´ì„œ êµ¬í˜„ì„ í•´ë³¸ë‹¤ëŠ”ê±´ ì •ë§ ì—„ì²­ë‚˜ê²Œ í° ì°¨ì´ê°€ ìˆëŠ”ê²ƒ ê°™ë‹¤. ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•˜ë‹¤ë³´ë©´ í•œë²ˆ ì¯¤ ë§Œë‚˜ê²Œ ë˜ëŠ” íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥. í•„ìë„ ëª‡ë²ˆ êµ¬í˜„ì€ í•´ë´¤ì§€ë§Œ ê·¸ëƒ¥ ë‹¨ìˆœíˆ êµ¬í˜„ë§Œ í•´ë³¸ ìƒíƒœì˜€ë‹¤ê°€ ìµœê·¼ì— ê·¸ëƒ¥ íŒŒì¼ ì—…ë¡œë“œê°€ ì•„ë‹Œ ëŒ€ìš©ëŸ‰ íŒŒì¼ ì—…ë¡œë“œì—ì„œì˜ ë¬¸ì œê°€ ë°œìƒí•˜ì—¬ ì—¬ê¸°ì €ê¸° ì‚½ì§ˆì„ í•˜ê²Œ ë˜ì—ˆê³  ì •ë¦¬ë„ í•´ë³¼ê²¸ ìŠ¤í”„ë§ì—ì„œì˜ ëŒ€ìš©ëŸ‰ íŒŒì¼ ì—…ë¡œë“œì‹œ í•œë²ˆì¯¤ ê³ ë ¤í•´ë´ì•¼ í•  ë¶€ë¶„ì— ëŒ€í•´ ì •ë¦¬ë¥¼ í•´ë³´ë ¤ê³  í•œë‹¤.
 ë¬¼ë¡  êµ¬ê¸€ì—ì„œ ê²€ìƒ‰ì„ í•´ë³´ë©´ ì•„ë§ˆ í•„ìê°€ ì“´ê²ƒ ë³´ë‹¤ ë” ìì„¸í•˜ê³  ì¢‹ì€ ê¸€ë“¤ì´ ìˆê² ì§€ë§Œ í•„ìëŠ” ë³´ë‹¤ ëŒ€ìš©ëŸ‰ì— ì§‘ì¤‘ì—ì„œ ì‘ì„±í•´ ë³´ê³ ì í•œë‹¤. ëª…ì‹¬í•˜ì. &ldquo;ì•„ë¬´ë¦¬ íë¦° ì‰í¬ë¼ë„ ì¢‹ì€ ê¸°ì–µë ¥ë³´ë‹¤ ë‚«ë‹¤&rdquo; ë¼ëŠ” ë§ì´ ìˆë“¯ì´
 ìŠ¤í”„ë§ì„ í™œìš©í•œ íŒŒì¼ ì—…ë¡œë“œ êµ¬í˜„ ìš°ì„  ì™„ì „ ì´ˆê¸°ìƒíƒœì—ì„œ ì‹œì‘í•˜ê¸° ìœ„í•´ ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ê³  ê°„ë‹¨í•˜ê²Œ íŒŒì¼ ì—…ë¡œë“œë¥¼ í•  ìˆ˜ ìˆëŠ” form í˜ì´ì§€ì™€ ì—…ë¡œë“œ ë²„íŠ¼ì„ ëˆŒë €ì„ë•Œ ì‘ë™í•˜ê²Œ ë˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë§Œë“¤ì–´ ë³´ì.
import java.io.File; import java.io.IOException; import java.io.InputStream; import org.apache.commons.io.FileUtils; import org.springframework.stereotype.Controller; import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.RequestMethod; import org.springframework.web.bind.annotation.RequestParam; import org.springframework.web.multipart.MultipartFile; import lombok.extern.slf4j.Slf4j; @Slf4j @Controller public class FileUploadController { // ë„ˆë¬´ ê°„ë‹¨ ... 	@RequestMapping(&#34;/form&#34;) public String form() { return &#34;form&#34;; } @RequestMapping(value = &#34;/upload&#34;, method = RequestMethod.POST) public String upload(@RequestParam(&#34;file&#34;) MultipartFile multipartFile) { log.info(&#34;### upload&#34;); File targetFile = new File(&#34;/home1/irteam/&#34; + multipartFile.getOriginalFilename()); try { InputStream fileStream = multipartFile.getInputStream(); FileUtils.copyInputStreamToFile(fileStream, targetFile); } catch (IOException e) { FileUtils.deleteQuietly(targetFile); e.printStackTrace(); } return &#34;redirect:/form&#34;; } } upload ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ fileì´ë¼ëŠ” ì´ë¦„ì˜ íŒŒë¼ë¯¸í„°ë¡œ MultipartFileì„ ë°›ê³  íŒŒì¼ì˜ ì´ë¦„ì„ í™•ì¸ í›„ ìŠ¤íŠ¸ë¦¼ì„ ì½ì–´ íŠ¹ì • ê²½ë¡œì— íŒŒì¼ë¡œ ì €ì¥í•˜ëŠ” ë¡œì§ì´ë‹¤. ê·¸ë‹¤ìŒ /formì„ ì ‘ì†í•˜ê²Œ ë˜ë©´ ë‚˜ì˜¤ëŠ” í¼ í™”ë©´ì„ ë§Œë“¤ì. ì´ê²ƒë„ ì•„ì£¼ ì‹¬í”Œí•˜ê²Œ!
&lt;h1&gt;íŒŒì¼ ì—…ë¡œë“œ&lt;/h1&gt; &lt;form action=&#34;https://taetaetae.github.io/upload&#34; method=&#34;post&#34; enctype=&#34;multipart/form-data&#34;&gt; &lt;input type=&#34;file&#34; value=&#34;íŒŒì¼ ì„ íƒ&#34; name=&#34;file&#34;/&gt; &lt;input type=&#34;submit&#34; value=&#34;ì—…ë¡œë“œ&#34;/&gt; &lt;/form&gt; multipart/form-data ë¼ëŠ” Content-Type ì„ ëª…ì‹œí•´ì£¼ê³  íŒŒì¼ì„ ì„ íƒí•˜ë©´ /uploadë¡œ POSTìš”ì²­ì„ í•˜ë„ë¡ ì„¤ì •í•œë‹¤. ì´ë ‡ê²Œ ë˜ë©´ ë„ˆë¬´ ê°„ë‹¨í•˜ê²Œ + ì´ìƒì—†ì´ íŒŒì¼ì´ ì—…ë¡œë“œê°€ ì˜ ë˜ë‹ˆ ì´ê²Œ ì´ì•¼ê¸° í•  êº¼ë¦¬ì¸ê°€(?) ì‹¶ì„ì •ë„ë¡œ ì‹¬í”Œí•˜ë‹¤.
ê·¸ëŸ°ë° íŒŒì¼ í¬ê¸°ê°€ í¬ë‹¤ë©´? ì„¤ë§ˆ íŒŒì¼ ì—…ë¡œë“œ í•˜ëŠ” ìš©ëŸ‰ì´ í¬ê² ì–´?&hellip; ì™ ì§€ íŒŒì¼ì˜ ìš©ëŸ‰ì´ í¬ë©´ ë¬¸ì œìˆì„ê²ƒ ê°™ì€ë°&hellip; ì¶œì²˜ : https://m.blog.naver.com/naibbo0407/30170815180" ì„¤ë§ˆ íŒŒì¼ ì—…ë¡œë“œ í•˜ëŠ” ìš©ëŸ‰ì´ í¬ê² ì–´?&hellip; ì™ ì§€ íŒŒì¼ì˜ ìš©ëŸ‰ì´ í¬ë©´ ë¬¸ì œìˆì„ê²ƒ ê°™ì€ë°&hellip; ì¶œì²˜ : https://m.blog.naver.com/naibbo0407/30170815180  ê°œë°œì„ í•˜ë‹¤ë³´ë©´ í•­ìƒ ìƒê°í•´ì•¼ í•  ë¶€ë¶„ì¤‘ì— í•˜ë‚˜ê°€ ë°”ë¡œ í™•ì¥ì„±ì¸ê²ƒ ê°™ë‹¤. ì´ ë¶€ë¶„ì—ì„œ ì—­ì‹œ ë¬¸ì œê°€ ë˜ì—ˆë˜ ê²ƒ. í‰ì†Œë³´ë‹¤ ìš©ëŸ‰ì´ í° íŒŒì¼ì´ ì—…ë¡œë“œê°€ ë˜ë©´ì„œ (í‰ì†Œ 3~400MB ì˜€ë‹¤ê°€ 3~4GBì •ë„ì˜ íŒŒì¼ì´ ì—…ë¡œë“œê°€ ë˜ëŠ” ë§¤ì§) ì—…ë¡œë“œê°€ ì•ˆë˜ëŠ” ìƒí™©ì´ ë°œìƒí•˜ì˜€ë‹¤. ë‹¹ì—°íˆ ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ëˆ„êµ°ê°€ ë§í–ˆë“¯ ë¡œê·¸ë¶€í„° ì‚´í´ë³´ì•˜ëŠ”ë° Apache - (AJP) - Tomcat ìœ¼ë¡œ êµ¬ì„±ëœ í™˜ê²½ì—ì„œ tomcat ë¡œê·¸ì— ### uploadë¼ëŠ” ë¡œê·¸ê°€ ì—†ê³  ì•„íŒŒì¹˜ ë¡œê·¸ì—” 502 ì—ëŸ¬ê°€ ë°œìƒí•œ ê²ƒì´ì—ˆë‹¤. ì™œ í†°ì¼“ ë¡œê·¸ë„ ì•ˆë‚¨ê³  ê·¸ì „ì— ì—ëŸ¬ê°€ ë°œìƒí•˜ì˜€ì„ê¹Œ? ì´ë•Œë¶€í„° (ê·¼ê±°ì—†ëŠ” ì¶”ì¸¡ì„ í•˜ë©°&hellip;) ê³ ë‚œê³¼ ì—­ê²½ì˜ ì‚½ì§ˆì„ í•˜ê¸° ì‹œì‘í•˜ê²Œ ëœë‹¤. í†°ì¼“ ë²„ì „ì´ ë¬¸ì œì¼ê¹Œ? ë¡œê·¸ê°€ ì•ˆì°í˜”ë‹¤ë©´ ë‹¤ë¥¸ í•„í„°ë‚˜ ì¸í„°ì…‰í„°ì—ì„œ ë¬´ì–¸ê°€ë¥¼ ë¨¹ê³ (?)ìˆëŠ”ê±´ ì•„ë‹ê¹Œ? ì ê¹, ê·¼ë° ì›ë˜ ëŒ€ìš©ëŸ‰ ì—…ë¡œë“œê°€ ë˜ê¸´ í•´? íŒŒì¼ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ í•˜ëŠ” ì‚¬ì´íŠ¸ ë³´ë©´ ë³„ë„ í”„ë¡œê·¸ë¨ìœ¼ë¡œ í•˜ë˜ë°&hellip; ê¼¬ë¶ˆê¼¬ë¶ˆ ë¯¸ë¡œì†ì„ í—¤ë©”ëŠ”ê²ƒë§Œ ê°™ì•˜ë˜ ì‚½ì§ˆì˜ ë¬¸ì œëŠ” ê²°êµ­ ë©”ëª¨ë¦¬ì— ìˆì—ˆë‹¤. íŒŒì¼ì„ ì—…ë¡œë“œ í•˜ê²Œ ë˜ë©´ í•´ë‹¹ ë‚´ìš©ì„ ìš°ì„  ë©”ëª¨ë¦¬ì— ë‹´ê²Œ ë˜ê³  ë‹¤ ë‹´ì€ í›„ ë©”ëª¨ë¦¬ì— ìˆëŠ” ë‚´ìš©ì„ wasì— ì „ë‹¬í•œ ë’¤ HttpServletRequest ë¡œ ë„˜ì–´ì˜¤ê²Œ ëœë‹¤.(Apache &gt; Tomcat) ê·¸ëŸ°ë° íŒŒì¼ì„ ì—…ë¡œë“œ í•˜ë©´ì„œ ë©”ëª¨ë¦¬ì— íŒŒì¼ì´ ì¨ì§€ë‹¤ê°€ ë©”ëª¨ë¦¬ ë¶€ì¡±ìœ¼ë¡œ OOMì´ ë°œìƒí•˜ê²Œ ë˜ë²„ë¦° ê²ƒì´ì—ˆë‹¤. ë˜í•œ ìŠ¤í”„ë§ íŒŒì¼ ìµœëŒ€í¬ê¸°ë¥¼ ë³„ë„ë¡œ ì§€ì •í•˜ì§€ ì•Šê³  ìˆì—ˆê¸° ë•Œë¬¸ì— ë©”ëª¨ë¦¬ê°€ ì¶©ë¶„í–ˆë‹¤ í•˜ë”ë¼ë„ ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ìƒí™©ì´ì—ˆë‹¤.]]></description></item><item><title>Springì—ì„œ Requestë¥¼ ìš°ì•„í•˜ê²Œ ë¡œê¹…í•˜ê¸°</title><link>https://taetaetae.github.io/2019/06/30/controller-common-logging/</link><pubDate>Sun, 30 Jun 2019 18:39:47 +0000</pubDate><author>Author</author><guid>https://taetaetae.github.io/2019/06/30/controller-common-logging/</guid><description><![CDATA[<div class="featured-image">
                <img src="/images/controller-common-logging/spring_boot_logging.png" referrerpolicy="no-referrer">
            </div>ìŠ¤í”„ë§ ê¸°ë°˜ì˜ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ë‹¤ ë³´ë©´ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ”ë° ë§¨ ì²˜ìŒì— ìœ„ì¹˜í•˜ê³  ìˆëŠ” Controller(ì´í•˜ ì»¨íŠ¸ë¡¤ëŸ¬)ë¼ëŠ” ë ˆì´ì–´ë¥¼ ë§Œë“¤ê²Œ ëœë‹¤. ê·¸ëŸ´ë•Œë©´ ì‚¬ìš©ìê°€ ì–´ë–¤ ìš”ì²­(Request)ì„ í•˜ì˜€ëŠ”ì§€ì— ëŒ€í•´ í™•ì¸ì´ í•„ìš”í•  ìˆ˜ ìˆë‹¤. ë¬¼ë¡  í™•ì¸ì„ ì•ˆí•´ë„ ë¬´ë°©í•˜ì§€ë§Œ ê°€ê¸‰ì  ë¡œê¹…ì€ ì‹œìŠ¤í…œ ë¡œì§ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ” ë²”ìœ„ì—ì„œ ìµœëŒ€í•œ ë‹¤ì–‘í•˜ê²Œ ë¯¸ë¦¬ í•´ë‘ëŠ”ê²Œ ë‚˜ì¤‘ì— ìœ ì§€ë³´ìˆ˜ì‹œ í¸í•  ìˆ˜ ìˆë‹¤. (ì˜ˆì „ ì¡°ì§ì¥ë‹˜ê»˜ì„œ ë§ì”€í•˜ì‹ ê²Œ ì•„ì§ë„ ë¨¸ë¦¿ì†ì— ê½‰ ìë¦¬ì¡ê³  ìˆë‹¤&hellip;) ì•„~ì£¼ ì¼ë°˜ì ìœ¼ë¡œ, ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë©”ì†Œë“œ ë‹¨ìœ„ë¡œ íŒŒë¼ë¯¸í„°ë¥¼ ì§ì ‘ ë¡œê¹…í•˜ê²Œ ëœë‹¤.
@Slf4j @RestController public class SampleController { @GetMapping(&#34;/test1&#34;) public String test1(@RequestParam String id) { log.info(&#34;id : {}&#34;, id); return &#34;length : &#34; + id.length(); } } ì´ë ‡ê²Œ ë˜ë©´ ì‚¬ìš©ìê°€ GET /test1 ì´ë¼ëŠ” ìš”ì²­ì„ ë³´ë‚¼ë•Œ ì–´ë–¤ íŒŒë¼ë¯¸í„°ë¡œ í˜¸ì¶œí•˜ì˜€ëŠ”ì§€ì— ëŒ€í•´ ë¡œê¹…ì´ ë‚¨ê²Œ ë˜ëŠ”ë° í•­ìƒ log.info(&quot;id : {}&quot;, id); ê³¼ ê°™ì´ ìˆ˜ë™ìœ¼ë¡œ ë¡œê¹…ì„ ë‚¨ê²¨ì•¼ í•˜ëŠ” ë¶ˆí¸í•¨ì´ ìƒê¸´ë‹¤. ë¬¼ë¡  ê¼¼ê¼¼í•˜ê²Œ ë©”ì†Œë“œë§ˆë‹¤ ë¡œê¹…ì„ ì ì–´ì£¼ë©´ ì „í˜€ ë¬¸ì œë ê²Œ ì—†ì§€ë§Œ ì´ëŸ¬í•œ ì»¨íŠ¸ë¡¤ëŸ¬ ~ ë©”ì†Œë“œê°€ í•œë‘ê°œê°€ ì•„ë‹Œ ìˆ˜ì‹­ ë˜ëŠ” ìˆ˜ë°±ê°œì¼ ê²½ìš°ì—” ê·¸ë•Œë§ˆë‹¤ ë¡œê¹…ì„ ì ì–´ì¤˜ì•¼ í•˜ëŠ” ë¶ˆí¸í•¨ì´ ìˆì„ ìˆ˜ ìˆë‹¤. ë˜í•œ ìì¹« ê¹œë°•í•˜ê³  ë¡œê¹…ì„ ë¹¼ë¨¹ê³  ë°°í¬ë¥¼ í•˜ê²Œ ëœ ê²½ìš° ëª¨ë‹ˆí„°ë§ì‹œ ë¡œê¹…ì„ í•˜ì§€ ì•Šì•„ì„œ ë‹¤ì‹œ ë¡œê¹…í•˜ê³  ë°°í¬ë¥¼ í•˜ëŠ”, ë³„ê²ƒë„ ì•„ë‹Œë°(?) &ldquo;ì •ë§ ë¶ˆí¸í•œ&rdquo; ìƒí™©ì´ ìˆì„ ìˆ˜ ìˆë‹¤. ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” ì‚¬ìš©ìì˜ ìš”ì²­ì„ ëª¨ë‹ˆí„°ë§ í•˜ê¸° ìœ„í•´ ì»¨íŠ¸ë¡¤ëŸ¬ë§ˆë‹¤ ì½”ë“œë¥¼ ì‘ì„±í•´ê°€ë©° ë¡œê¹…ì„ í•˜ëŠ”ê²ƒì´ ì•„ë‹ˆë¼ HttpServletRequestWrapper ë¼ëŠ” ê²ƒê³¼ Filter, AOPë¥¼ ì´ìš©í•˜ì—¬ Requestì˜ ì •ë³´ë¥¼ í•œê³³ì—ì„œ ìš°ì•„í•˜ê²Œ ë¡œê¹…í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ê³ ì í•œë‹¤.
ìš”êµ¬ì‚¬í•­ ì™€ ê°œë°œí•˜ìì•„!ì¶œì²˜ : https://gfycat.com/ko/brightevilaoudad" ì™€ ê°œë°œí•˜ìì•„!
ì¶œì²˜ : https://gfycat.com/ko/brightevilaoudad  íˆ¬ìš°ì‚¬ê°€ í”ë“œëŠ” ë¹¨ê°„ ì²œì„ ë³´ë©° ëŒì§„í•˜ëŠ” í™©ì†Œì²˜ëŸ¼ (ì“°ê³ ë³´ë‹ˆ ë„ˆë¬´ TMI ê°™ë‹¤&hellip;.) ë‹¹ì¥ ì½”ë”©ì„ ì‹œì‘í•˜ë©° ê°œë°œì„ í•  ìˆ˜ë„ ìˆì§€ë§Œ ì •ì‘ ì›í•˜ëŠ” ê¸°ëŠ¥ì´ ë¬´ì—‡ì¸ì§€ ì²œì²œíˆ ì •ë¦¬í•˜ê³  ë„˜ì–´ê°ˆ í•„ìš”ê°€ ìˆëŠ” ê²ƒ ê°™ë‹¤. (ì–´ì©”ë• ì˜¤íˆë ¤ í›„ìê°€ ë” ë¹ ë¥¸ ê°œë°œì„ í•˜ê²Œ ë˜ëŠ”ê²ƒ ê°™ë‹¤.)
 GET, POST ë“± ë‹¤ì–‘í•œ http method ë¡œ êµ¬í˜„ëœ ëª¨ë“  ì»¨íŠ¸ë¡¤ëŸ¬ì˜ íŒŒë¼ë¯¸í„°ì™€ ê¸°íƒ€ Request ì •ë³´ê°€ ë¡œê¹…ì´ ë˜ì•¼ í•œë‹¤. ì»¨íŠ¸ë¡¤ëŸ¬, ë©”ì†Œë“œê°€ ëŠ˜ì–´ë‚ ë•Œë§ˆë‹¤ ë³„ë„ì˜ ì½”ë“œ ì¶”ê°€ ì—†ì´ í•œê³³ì—ì„œ ê³µí†µì ìœ¼ë¡œ ë¡œê¹…ì´ ë˜ì•¼ í•œë‹¤. URL ì¤‘ íŠ¹ì • íŒ¨í„´ìœ¼ë¡œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì€ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ë¡œê¹…ì„ í•˜ê±°ë‚˜, ë¡œê¹…ì—ì„œ ì œì™¸í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. ì•ì„œ ë§í–ˆë“¯ ë‹¤ë¥¸ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šì•„ì•¼ í•œë‹¤.  êµ¬í˜„í•˜ê¸° - Request ì˜ íŒŒë¼ë¯¸í„° ì •ë¦¬ Request ì˜ ëª¨ë“  ë¡œê¹…ì„ í•œê³³ì—ì„œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ì„œ filter(í•„í„°)ë¥¼ í™œìš©í•˜ì˜€ë‹¤. í•„í„°ëŠ” Dispatcher servletì˜ ì•ë‹¨ì— ìœ„ì¹˜í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ëª¨ë“  ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ”ë° ìš©ì´í•˜ë‹¤. ë¬¼ë¡  ì¸í„°ì…‰í„°ë¥¼ í™œìš©í•´ì„œë„ ë°©ë²•ì´ ìˆê² ì§€ë§Œ ë³¸ í¬ìŠ¤íŒ… ì—ì„œëŠ” í•„í„°ë¥¼ í™œìš©í•´ì„œ êµ¬í˜„í•˜ëŠ”ê²ƒì„ ëª©ì ìœ¼ë¡œ í•œë‹¤. (ì‚¬ì‹¤ ì¸í„°ì…‰í„°ë¡œ ëª‡ë²ˆ ì‹œë„í•´ë³´ë‹¤ê°€ ì‹¤íŒ¨í•´ì„œ&hellip;ìœ ìœ  )
Spring MVC Request Life Cycleì¶œì²˜ : https://justforchangesake.wordpress.com/2014/05/07/spring-mvc-request-life-cycle/" Spring MVC Request Life Cycle
ì¶œì²˜ : https://justforchangesake.wordpress.com/2014/05/07/spring-mvc-request-life-cycle/  Filterë¥¼ ë§Œë“¤ê¸° ì „ì— Filterì—ì„œ ì‚¬ìš©í•  ì£¼ìš” í•µì‹¬(?) í´ë˜ìŠ¤ê°€ í•„ìš”í•œë° HttpServletRequest ë¥¼ Wrapping í•´ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ HttpServletRequestWrapperë¥¼ ìƒì†ë°›ëŠ” í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì. Request ì— ë‹´ê²¨ìˆëŠ” param ê³¼ bodyë¡œ ìš”ì²­ì´ ë“¤ì–´ì˜¬ ê²½ìš° bodyì— ìˆëŠ” ë‚´ìš©ì„ param ì— ë‹´ëŠ” ë¡œì§ì´ë‹¤. ì£¼ìš” ì„¤ëª…ì€ ì½”ë“œ ì•ˆì—ì„œ ì£¼ì„ìœ¼ë¡œ ì„¤ëª…í•˜ê² ë‹¤.
public class ReadableRequestWrapper extends HttpServletRequestWrapper { // ìƒì† 	private final Charset encoding; private byte[] rawData; private Map&lt;String, String[]&gt; params = new HashMap&lt;&gt;(); public ReadableRequestWrapper(HttpServletRequest request) { super(request); this.params.putAll(request.getParameterMap()); // ì›ë˜ì˜ íŒŒë¼ë¯¸í„°ë¥¼ ì €ì¥  String charEncoding = request.getCharacterEncoding(); // ì¸ì½”ë”© ì„¤ì • 	this.encoding = StringUtils.isBlank(charEncoding) ? StandardCharsets.UTF_8 : Charset.forName(charEncoding); try { InputStream is = request.getInputStream(); this.rawData = IOUtils.toByteArray(is); // InputStream ì„ ë³„ë„ë¡œ ì €ì¥í•œ ë‹¤ìŒ getReader() ì—ì„œ ìƒˆ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ìƒì„±  // body íŒŒì‹± 	String collect = this.getReader().lines().collect(Collectors.joining(System.lineSeparator())); if (StringUtils.isEmpty(collect)) { // body ê°€ ì—†ì„ê²½ìš° ë¡œê¹… ì œì™¸ 	return; } if (request.getContentType() != null &amp;&amp; request.]]></description></item><item><title>Spring MVC Redirect ì²˜ë¦¬ì¤‘ì— ë°œìƒí•œ Out Of Memory ì›ì¸ ë¶„ì„í•˜ê¸°</title><link>https://taetaetae.github.io/2019/01/10/spring-redirect-oom/</link><pubDate>Thu, 10 Jan 2019 18:39:47 +0000</pubDate><author>Author</author><guid>https://taetaetae.github.io/2019/01/10/spring-redirect-oom/</guid><description><![CDATA[<div class="featured-image">
                <img src="/images/spring-redirect-oom/test1-pinpoint.jpg" referrerpolicy="no-referrer">
            </div>ì´ˆì°½ê¸° ì‹ ì…ì‹œì ˆì— ë°°ìš°ê±°ë‚˜ ì‚¬ìš©í–ˆë˜ ê¸°ìˆ ì ì¸ ë°©ë²•ë“¤ì´ ìˆë‹¤. ì‹œê°„ì´ ì§€ë‚ ìˆ˜ë¡ ì™ ë§Œí•´ì„  ë‹¤ë¥¸ë°©ë²•ì€ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë ¤ í•˜ê³  ìŠµê´€ì²˜ëŸ¼ ê¸°ì¡´ì— ì‚¬ìš©í–ˆë˜ ë°©ë²•ì„ ê³ ìˆ˜í•˜ëŠ” ë²„ë¦‡ì´ ìˆë‹¤. ê·¸ ì´ìœ ëŠ” ê³¼ê±°ì— ì‚¬ìš©í–ˆì„ë•Œ ì•„ë¬´ íƒˆ ì—†ì´ ì˜ ë˜ì—ˆê¸° ë•Œë¬¸ì—, ê·¸ë¦¬ê³  ë¹ ë¥¸ êµ¬í˜„ ë•Œë¬¸ì´ë¼ëŠ” í•‘ê³„ì¼ ê²ƒ ê°™ë‹¤. ì´ëŸ¬í•œ ë²„ë¦‡ì€ ë¹„ë‹¨ ì´ ê¸€ì„ ì ê³ ìˆëŠ” í•„ì ë¿ë§Œì´ ì•„ë‹ˆë¼ ëŒ€ë¶€ë¶„ì˜ ê°œë°œìë“¤ì´ ê°€ì§€ê³  ìˆì„êº¼ë¼ ì¡°ì‹¬ìŠ¤ë ˆ ì¶”ì¸¡í•´ë³¸ë‹¤. (ì•„ë‹ˆë¼ë©´&hellip;ë”ìš± ë¶„ë°œ í•´ì•¼ê² ë‹¤&hellip;ã… ) ìµœê·¼ ìš´ì˜í•˜ê³  ìˆëŠ” ì„œë¹„ìŠ¤ì—ì„œ ì¥ì•  ìƒí™©ê¹Œì§€ ê°ˆìˆ˜ìˆëŠ” ìœ„í—˜í•œ ìƒí™©ì´ ìˆì—ˆëŠ”ë° íŒ€ë‚´ ì½”ë“œë¦¬ë·°ë¥¼ í†µí•´ ë¬¸ì œì ì„ íŒŒì•…í•  ìˆ˜ ìˆì—ˆë‹¤. ê·¸ ì›ì¸ì€ Spring MVC Controller ë ˆë²¨ì—ì„œ redirect ì²˜ë¦¬ë¥¼ í• ë•Œ returnê°’ì˜ Cardinalityê°€ ë†’ì„ê²½ìš° ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤ê³ &hellip;
@RequestMapping(value = &#34;/test&#34;, method = RequestMethod.GET) public String test() { String url = &#34;ì–´ë– í•œ ë¡œì§ì— ì˜í•´ ìƒì„±ë˜ëŠ” url&#34;; return &#34;redirect:&#34; + url; // &lt;- ìœ„í—˜ í¬ì¸íŠ¸! } ì´ ì½”ë“œê°€ ì™œ? ì–´ë””ê°€ ì–´ë•Œì„œ? ì´ì œê¹Œì§€ Controller ë ˆë²¨ì—ì„œ redirect ì²˜ë¦¬ë¥¼ í• ë•Œ ì•„ë¬´ìƒê°ì—†ì´ ìœ„ì— ìˆëŠ” ì½”ë“œ í˜•íƒœë¡œ êµ¬í˜„ì„ í–ˆëŠ”ë° ì €ëŸ¬í•œ ì½”ë“œ ë•Œë¬¸ì— OOMì´ ë°œìƒí•˜ì—¬ fullGC ê°€ ì—¬ëŸ¬ë²ˆ ë°œìƒí•˜ê³ , ì¼ì‹œì ìœ¼ë¡œ ì„œë¹„ìŠ¤ê°€ ì§€ì—°ë˜ëŠ” í˜„ìƒì´ ë°œìƒí–ˆë‹¤ê³  í•œë‹¤. ìì£¼ ì‚¬ìš©í•˜ë˜ ë°©ë²•ì´ì˜€ëŠ”ë° ì¥ì• ë¥¼ ìœ ë°œí• ìˆ˜ ìˆëŠ” ìœ„í—˜í•œ ë°©ë²•ì´ì˜€ë‹¤ë‹ˆ&hellip; ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” ì´ëŸ¬í•œ ë°©ë²•ì´ ì™œ ì˜ëª»ë˜ì—ˆëŠ”ì§€ ì‹¤ì œë¡œ í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ ëª¸ì†Œ(?) ì²´ê°ì„ í•´ë³´ê³ , ê·¸ëŸ¼ ì–´ë–¤ ë°©ë²•ìœ¼ë¡œ redirect ì²˜ë¦¬ë¥¼ í•´ì•¼ í•˜ëŠ”ê°€ì™€ ê°œì„ ì„ í•¨ìœ¼ë¡œì¨ ê¸°ì¡´ë°©ì‹ì— ë¹„í•´ ì–´ë–¤ì ì´ ì¢‹ì•„ì¡ŒëŠ”ì§€ì— ëŒ€í•´ì„œ ì •ë¦¬í•´ë³´ê³ ì í•œë‹¤.
 ë­”ê°€ ë‚´ê²ƒìœ¼ë¡œ ë§Œë“¤ê¸° ì‹œë¦¬ì¦ˆë¬¼ì´ ë‚˜ì˜¬ê²ƒë§Œ ê°™ì€ ëŠë‚Œì´ë‹¤&hellip;
 ê¸°ì¡´ë°©ì‹ì˜ ë¬¸ì œì  ì¬í˜„ ë° ë‹¤ì–‘í•œ ì›ì¸ë¶„ì„ ê¸°ì¡´ë°©ì‹ìœ¼ë¡œ í–ˆì„ë•Œ ì™œ OOMì´ ë°œìƒí–ˆì„ê¹Œ? ìš°ë¦¬ëŠ” ê°œë°œìì´ê¸° ë•Œë¬¸ì— ì´ëŸ°ì €ëŸ° ê¸€ë“¤ë§Œ ë³´ê³  ì¶”ì¸¡ í• ê²ƒì´ ì•„ë‹ˆë¼ ì§ì ‘ ì¬í˜„ì„ í•´ë³´ê³  ë‹¤ì–‘í•œ ì‹œê°ì—ì„œ ì›ì¸ë¶„ì„ì„ í•´ë³´ì. ë¨¼ì € ê¸°ë³¸ì ì¸ Spring MVC ë¼ˆëŒ€ë¥¼ ë§Œë“¤ê³  redirect í•˜ëŠ” return ê°’ì˜ Cardinalityê°€ ë†’ë„ë¡ random string ì„ ë§Œë“¤ì–´ ì£¼ë„ë¡ í•œë‹¤. ì¦‰, /randomì„ í˜¸ì¶œí•˜ë©´ /result/ETmHfowFkUì²˜ëŸ¼ random string ì´ ë§Œë“¤ì–´ ì§€ë©° redirect ì²˜ë¦¬ê°€ ë˜ëŠ” ë§¤ìš° ì‹¬í”Œí•œ êµ¬ì¡°ì´ë‹¤.
// Spring ë²„ì „ì€ 4.0.6.RELEASE @Controller @RequestMapping(&#34;/&#34;) public class TestController { @RequestMapping(value = &#34;random&#34;, method = RequestMethod.GET) public String random() { return &#34;redirect:result/&#34; + UUID.randomUUID(); } @RequestMapping(value = &#34;result/{message}&#34;, method = RequestMethod.GET) public String result(ModelMap model, @PathVariable String message) { model.addAttribute(&#34;message&#34;, message); return &#34;result&#34;; } } ë˜í•œ í•´ë‹¹ í”„ë¡œì íŠ¸ì—ì„œëŠ” AOPë¥¼ ì‚¬ìš©í•˜ê³  ìˆì—ˆê¸° ë•Œë¬¸ì— ê·¸ë•Œì™€ ë™ì¼í•œ ìƒí™©ìœ¼ë¡œ ì¬í˜„ì„ í•˜ê¸° ìœ„í•´ AOPê´€ë ¨ ì„¤ì •ë„ ì¶”ê°€í•´ì¤€ë‹¤.
@Configuration @EnableWebMvc @EnableAspectJAutoProxy @ComponentScan public class HelloWorldConfiguration { @Bean(name=&#34;HelloWorld&#34;) public ViewResolver viewResolver() { InternalResourceViewResolver viewResolver = new InternalResourceViewResolver(); viewResolver.setViewClass(JstlView.class); viewResolver.setPrefix(&#34;/WEB-INF/views/&#34;); viewResolver.setSuffix(&#34;.jsp&#34;); return viewResolver; } } ì´ë ‡ê²Œ í•œë’¤ tomcatìœ¼ë¡œ ìµœëŒ€/ìµœì†Œ ë©”ëª¨ë¦¬ë¥¼ 256mìœ¼ë¡œ ì„¤ì •í›„ í•´ë‹¹ ëª¨ë“ˆì„ ë„ì›Œì¤€ë‹¤. ê·¸ë‹¤ìŒ ë©”ëª¨ë¦¬ ìƒíƒœë¥¼ ë³´ê¸° ìœ„í•´ tomcatì— pinpointë¥¼ ì—°ë™í•˜ê³  ë§ˆì§€ë§‰ìœ¼ë¡œ í˜¸ì¶œí…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ nGrinderì„ ì„¤ì •í•´ì¤€ë‹¤. íŠ¹ë³„í•œ ì„¤ì •ì€ ì—†ê³  ìœ„ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ url (/random) ì„ ì—¬ëŸ¬ë²ˆ í˜¸ì¶œí•˜ë„ë¡ í•˜ì˜€ë‹¤. nGrinderì„ ì„¤ì •í•˜ëŠ”ëŒ€ì—ëŠ” ì´ ë¸”ë¡œê·¸ í¬ìŠ¤íŒ…ì„ ì°¸ê³ í•´ì„œ ì„¤ì •í•˜ì˜€ë‹¤.
ì, ì´ì œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•´ë³´ì. (ë§ˆì¹˜ ìˆ˜ìˆ  ì§‘ë„í•˜ëŠ”ê²ƒ ê°™ì€ ê¸°ë¶„ìœ¼ë¡œ&hellip;ê°„í˜¸ì‚¬~ ì¹¼!)
 nGrinder nGrinderì˜ ê¸°ë³¸ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ urlë§Œ í•´ë‹¹ ì„œë²„ë¡œ í˜¸ì¶œë˜ë„ë¡ ë°”ê¿”ì£¼ê³  ì´ ê°€ìƒ ì‚¬ìš©ìëŠ” 2,000ìœ¼ë¡œ ì‹œê°„ì€ 5ë¶„ìœ¼ë¡œ ì„¤ì •í›„ì— í…ŒìŠ¤íŠ¸ ì‹œì‘ì„ í•˜ì˜€ë”ë‹ˆ ë‹¤ìŒê³¼ ê°™ì€ ê·¸ë˜í”„ë¥¼ ë³¼ìˆ˜ ìˆì—ˆë‹¤.   TPSê°€ ë¶ˆì•ˆì •í•´ì§€ë‹¤ê°€ ì–´ëŠì‹œì ë¶€í„° ë‚®ì•„ì§€ëŠ”ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì´ê²Œ ì„œë¹„ìŠ¤ ì˜€ë‹¤ë©´ ì‚¬ìš©ìê°€ ì ‘ì†í•˜ëŠ”ë° ë¶ˆí¸ì„ ëŠê¼ˆì„êº¼ë¼ ì¶”ì¸¡ì„ í•´ë³¸ë‹¤. ë˜í•œ ì•„ì£¼ ê°„ë‹¨í•œ random string ì„ ë¦¬í„´í•˜ëŠ” í˜ì´ì§€ ì„ì—ë„ ë¶ˆêµ¬í•˜ê³  ì—ëŸ¬ ì‘ë‹µì´ ì ì§€ ì•Šì€ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.
pinpoint ë©”ëª¨ë¦¬ ìƒíƒœëŠ” ì–´ë–¤ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ pinpointë¥¼ í™•ì¸í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì€ ê·¸ë˜í”„ë¥¼ ë³¼ìˆ˜ ìˆì—ˆë‹¤.   ë³´ê¸°ë§Œí•´ë„ ì‹¬ì¥ì´ ë²Œë ë²Œë (?) ë›¸ ì •ë„ë¡œ ë¬´ì„œìš´ ê·¸ë¦¼ì´ë‹¤. ì‹¤ì œë¡œ ì„œë¹„ìŠ¤ì— (ì´ì •ë„ê¹Œì§„ ì•„ë‹ˆì˜€ì§€ë§Œ) ë¹„ìŠ·í•œ ìƒí™©ì´ ë°œìƒí–ˆì—ˆë‹¤. ë©”ëª¨ë¦¬ê°€ í…ŒìŠ¤íŠ¸ë¥¼ ì ì  í•˜ë©´ í• ìˆ˜ë¡ ì˜¬ë¼ê°€ë‹¤ê°€ fullGCê°€ ë°œìƒí•˜ë”ë‹ˆ ëŒ€ë‚˜ë¬´ ìˆ²ì— ìˆëŠ” ëŒ€ë‚˜ë¬´ë§ˆëƒ¥ fullGCê°€ ë¹¼ê³¡íˆ ë°œìƒí•˜ì˜€ë‹¤. (ì´ëŸ¬ë‹ˆ&hellip; í˜ì´ì§€ ì ‘ê·¼ì— ì§€ì—°ì´ ìƒê¸´ê²ƒ ê°™ë‹¤.]]></description></item><item><title>ìŠ¤í”„ë§í™˜ê²½ì—ì„œì˜ íŒŒë¼ë¯¸í„° ê´€ë ¨ ì •ë¦¬</title><link>https://taetaetae.github.io/2017/03/12/spring-parameter/</link><pubDate>Sun, 12 Mar 2017 18:03:01 +0000</pubDate><author>Author</author><guid>https://taetaetae.github.io/2017/03/12/spring-parameter/</guid><description><![CDATA[<div class="featured-image">
                <img src="/images/spring-parameter/spring-parameter-1.jpg" referrerpolicy="no-referrer">
            </div>ì¼ë°˜ì ì¸ ì›¹ í”„ë¡œì íŠ¸ êµ¬ì„±ì—ì„œëŠ” Controllerë ˆë²¨ì—ì„œ ì‘ë‹µì„ ë°›ê³  ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬ í›„ì— ë‹¤ì‹œ Viewë ˆë²¨ë¡œ ë„˜ì–´ê°€ëŠ”ê²Œ í†µìƒì ì¸ íë¦„ì´ë‹¤. ì´ ë¶€ë¶„ì—ì„œ íŒŒë¼ë¯¸í„° ê´€ë ¨í•œ ì—¬ëŸ¬ê°€ì§€ ë¶€ë¶„ì— ëŒ€í•´ ì •ë¦¬í•´ë³´ê³ ì í•œë‹¤.
httpServletRequest.getParameter() ì•„ë˜ì†ŒìŠ¤ì²˜ëŸ¼ HttpServletRequestì˜ getParameter() ë©”ì„œë“œë¥¼ ì´ìš©í•˜ì—¬ íŒŒë¼ë¯¸í„°ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.
@RequestMapping(&#34;/&#34;) public String home(HttpServletRequest httpServletRequest) { String id = httpServletRequest.getParameter(&#34;id&#34;); return &#34;home&#34;; } @RequestParam ë˜ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œëŠ” @RequestParam ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•˜ë©´ ê°„ë‹¨í•˜ê²Œ íŒŒë¼ë¯¸í„°ê°’ì„ ê°€ì ¸ì˜¬ìˆ˜ ìˆë‹¤. ìš°ì„ , í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì˜ ì˜µì…˜ê°’ë“¤ì— ëŒ€í•´ ê°„ëµí•˜ê²Œ í™•ì¸í•˜ê³  ë„˜ì–´ê°€ëŠ”ê²Œ ì¢‹ì„ë“¯ ì‹¶ë‹¤. APIë¬¸ì„œ 4.3.6 ê¸°ì¤€
   ì´ë¦„ íƒ€ì… ì„¤ëª…     name, value (Alias for name) String íŒŒë¼ë¯¸í„° ì´ë¦„   required boolean í•´ë‹¹ íŒŒë¼ë¯¸í„°ê°€ ë°˜ë“œì‹œ í•„ìˆ˜ì¸ì§€ ì—¬ë¶€, ê¸°ë³¸ê°’ì€ true   defaultValue String í•´ë‹¹ íŒŒë¼ë¯¸í„°ì˜ ê¸°ë³¸ê°’    ìœ„ ì˜µì…˜ê°’ë“¤ì„ ì¡°í•©í•˜ì—¬ ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì†Œë“œì— ì ìš©í•´ë³´ë©´ ì•„ë˜ ì†ŒìŠ¤ì™€ ê°™ì´ ë§Œë“¤ì–´ì§€ê³ , ì´ë ‡ê²Œ reqeustì—ì„œ íŒŒë¼ë¯¸í„°ê°’ì„ ê°€ì ¸ì˜¬ìˆ˜ ìˆë‹¤.
@RequestMapping(&#34;/&#34;) public String home(@RequestParam(value=&#34;id&#34;, defaultValue=&#34;false&#34;) String id) { return &#34;home&#34;; } ì´ ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•˜ê²Œë˜ë©´ ìì¹« ì˜ëª»í•˜ë‹¤ê°„ ì—ëŸ¬ë¥¼ ë§Œë‚ ìˆ˜ê°€ ìˆëŠ”ë° requiredê°’ì„ trueë¡œ í•´ë†“ê³  (í•„ìˆ˜ íŒŒë¼ë¯¸í„° ì„¤ì •) í•´ë‹¹ íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ìš”ì²­ì„ ë³´ë‚´ê²Œ ë˜ë©´ HTTP 400 ì—ëŸ¬ë¥¼ ë°›ê²Œ ë˜ë‹ˆ ê° ì˜µì…˜ë“¤ì„ ì •í™•íˆ í™•ì¸í•˜ê³  ì‚¬ìš©í•´ì•¼ í•  ê²ƒ ê°™ë‹¤. ë¬¼ë¡  ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë©”ì†Œë“œì—ì„œ í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³ ë„ ì•„ë˜ ì½”ë“œì²˜ëŸ¼ ë°”ë¡œ ë°›ì„ìˆ˜ ìˆë‹¤. ì´ë ‡ê²Œ ë°”ë¡œ ë°›ì„ ê²½ìš°ëŠ” í•„ìˆ˜ íŒŒë¼ë¯¸í„°ê°’ì´ falseë¡œ ì„¤ì •ì´ ë˜ê³  ë³€ìˆ˜ëª…ê³¼ ë™ì¼í•œ íŒŒë¼ë¯¸í„°ë§Œ ë°›ì„ìˆ˜ ìˆê²Œ ë˜ë©° ê¸°ë³¸ê°’ ì„¤ì •ì„ í• ìˆ˜ëŠ” ì—†ë‹¤. ë°©ë²•ì˜ ì°¨ì´ë¼ì„œ ìƒí™©ì— ë”°ë¼ ë§ì¶° ì‚¬ìš©í•˜ë©´ ë ë“¯ í•˜ë‹¤.
@RequestMapping(&#34;/&#34;) public String home(String id) { return &#34;home&#34;; } @RequestBody @RequestBodyì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•  ê²½ìš° ë°˜ë“œì‹œ POSTí˜•ì‹ìœ¼ë¡œ ì‘ë‹µì„ ë°›ëŠ” êµ¬ì¡°ì—¬ì•¼ë§Œ í•œë‹¤. ì´ë¥¼í…Œë©´ JSON ì´ë‚˜ XMLê°™ì€ ë°ì´í„°ë¥¼ ì ì ˆí•œ messageConverterë¡œ ì½ì„ë•Œ ì‚¬ìš©í•˜ê±°ë‚˜, POJOí˜•íƒœì˜ ë°ì´í„° ì „ì²´ë¡œ ë°›ì„ê²½ìš°ì— ì‚¬ìš©ëœë‹¤. ë‹¨, ì´ ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ íŒŒë¼ë¯¸í„°ë¥¼ ë°›ì„ ê²½ìš° ë³„ë„ì˜ ì¶”ê°€ ì„¤ì •(POJO ì˜ get/set ì´ë‚˜ json/xml ë“±ì˜ messageConverter ë“±)ì„ í•´ì¤˜ì•¼ ì ì ˆí•˜ê²Œ ë°ì´í„°ë¥¼ ë°›ì„ìˆ˜ê°€ ìˆë‹¤.
@PostMapping(&#34;/&#34;) public String home(@ReqeustBody Student student) { return &#34;home&#34;; } @ModelAttribute @RequestParamê³¼ ë¹„ìŠ·í•œë° 1:1ë¡œ íŒŒë¼ë¯¸í„°ë¥¼ ë°›ì„ê²½ìš°ëŠ” @RequestParamë¥¼ ì‚¬ìš©í•˜ê³ , ë„ë©”ì¸ì´ë‚˜ ì˜¤ë¸Œì íŠ¸ë¡œ íŒŒë¼ë¯¸í„°ë¥¼ ë°›ì„ ê²½ìš°ëŠ” @ModelAttributeìœ¼ë¡œ ë°›ì„ìˆ˜ ìˆë‹¤. ë˜í•œ ì´ ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë©´ ê²€ì¦(Validation)ì‘ì—…ì„ ì¶”ê°€ë¡œ í• ìˆ˜ ìˆëŠ”ë° ì˜ˆë¡œë“¤ì–´ nullì´ë¼ë˜ì§€, ê° ë©¤ë²„ë³€ìˆ˜ë§ˆë‹¤ validì˜µì…˜ì„ ì¤„ìˆ˜ê°€ ìˆê³  ì—¬ê¸°ì„œ ì—ëŸ¬ê°€ ë‚  ê²½ìš° BindException ì´ ë°œìƒí•œë‹¤.
Spring command ê°ì²´ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì€ ì •ë³´ì— ëŒ€í•´ì„œëŠ” view ì—ì„œ ë°”ë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤. ì˜ˆë¡œ ë“¤ì–´ ì•„ë˜ê·¸ë¦¼ì²˜ëŸ¼ ì´ë ‡ê²Œ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ êµ¬ì„±ë˜ì–´ìˆê³ 
 ì´ë ‡ê²Œ ëª¨ë¸ì´ êµ¬ì„±ë˜ì–´ìˆì„ë•Œ
 view ì—ì„œ ì´ëŸ°ì‹ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ìˆë‹¤ê³  ê°€ì •í•´ë³´ì.
 ì´ë•Œ /student?name=taetaetae&amp;age=32&amp;address=green-factoryë¡œ í˜¸ì¶œì„ í•´ë³´ë©´ êµ¬ì§€ Modelì— ê°’ì„ ì…‹íŒ…í•´ì£¼ì§€ ì•Šì•„ë„ ë‹¤ìŒê³¼ ê°™ì´ ì •ë³´ë¥¼ ì½ì„ìˆ˜ ìˆê²Œ ëœë‹¤.
 ë§ˆì¹˜ë©° ìŠ¤í”„ë§ì—ì„œ íŒŒë¼ë¯¸í„°ë¥¼ ë°›ëŠ” ë°©ë²•ì€ ìƒë‹¹íˆ ë‹¤ì–‘í•˜ë‹¤. ì´ê²Œ ì •ë‹µì´ë‹¤ ì •ì˜í• ìˆ˜ ì—†ì„ì •ë„ë¡œ. ìƒí™©ì— ë”°ë¼ ë§ëŠ” ë°©ë²•ìœ¼ë¡œ íŒŒë¼ë¯¸í„°ë¥¼ ë°›ì•„ì•¼ í•˜ê² ê³ , ê° ë°©ë²•ì— ì¥/ë‹¨ì ì„ ìµœëŒ€í•œ ì‚´ë ¤ì„œ ì¢€ë” ê¹”ë”í•œ ì½”ë“œë¥¼ ì‘ì„±í• ìˆ˜ ìˆì–´ì•¼ í•˜ê² ë‹¤.]]></description></item><item><title>Spring Transactional ì„¤ì • ë° ì£¼ìš”ì†ì„±</title><link>https://taetaetae.github.io/2017/01/08/transactional-setting-and-property/</link><pubDate>Sun, 08 Jan 2017 17:19:30 +0000</pubDate><author>Author</author><guid>https://taetaetae.github.io/2017/01/08/transactional-setting-and-property/</guid><description><![CDATA[<div class="featured-image">
                <img src="/images/transactional-setting-and-property/transactional.png" referrerpolicy="no-referrer">
            </div>ì§€ë‚œë²ˆì—ëŠ” íŠ¸ëœì­ì…˜ì˜ ì„¤ì •ê°’ì— ëŒ€í•´ ì•Œì•„ë³¸ ë°” ìˆë‹¤. [ Spring Transaction ì˜µì…˜ ] ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” ì‹¤ì œë¡œ ìŠ¤í”„ë§ í™˜ê²½ì—ì„œ ì–´ë–¤ì‹ìœ¼ë¡œ ì„¤ì •í•´ì•¼ @Transactional ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í• ìˆ˜ ìˆëŠ”ì§€, ê·¸ë¦¬ê³  ì–´ë–¤ ì†ì„±ë“¤ì´ ìˆëŠ”ì§€ì— ëŒ€í•´ ì•Œì•„ë³´ê³ ì í•œë‹¤.ì„¤ì • ê¸°ì¡´ xmlë°©ì‹ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •ì„ í•œë‹¤.
&lt;bean id=&#34;transactionManager&#34; class=&#34;org.springframework.jdbc.datasource.DataSourceTransactionManager&#34;&gt; &lt;property name=&#34;dataSource&#34; ref=&#34;dataSource&#34;/&gt; &lt;/bean&gt; &lt;tx:annotation-driven transaction-manager=&#34;transactionManager&#34; proxy-target-class=&#34;true&#34;/&gt; í˜¹, JavaConfig ë°©ì‹ìœ¼ë¡œ ì„¤ì •í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í•œë‹¤.
@EnableTransactionManagement public class AppConfig { ... @Bean public PlatformTransactionManager transactionManager() throws URISyntaxException, GeneralSecurityException, ParseException, IOException { return new DataSourceTransactionManager(dataSource()); } } ìœ„ì™€ê°™ì´ ì„¤ì •ì„ í•´ì£¼ë©´ íŠ¸ëœì­ì…˜ì„ ì„¤ì •í•˜ê³ ì í•˜ëŠ” ê³³ ì–´ë””ì„œë“  @Transactional ì–´ë…¸í…Œì´ì…˜ì„ ì§€ì •í•´ì„œ ì ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.
public class UserService{ @Transactional public boolean insertUser(User user){ ... } } ì£¼ìš”ì†ì„± @Transactional ì–´ë…¸í…Œì´ì…˜ì˜ ì£¼ìš”ì†ì„±ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.
   ì†ì„± ì„¤ ëª… ì‚¬ìš© ì˜ˆ     isolation Transactionì˜ isolation Level. ë³„ë„ë¡œ ì •ì˜í•˜ì§€ ì•Šìœ¼ë©´ DBì˜ Isolation Levelì„ ë”°ë¦„. @Transactional(isolation=Isolation.DEFAULT)   propagation íŠ¸ëœì­ì…˜ ì „íŒŒê·œì¹™ì„ ì •ì˜ , Default=REQURIED @Transactional(propagation=Propagation.REQUIRED)   readOnly í•´ë‹¹ Transactionì„ ì½ê¸° ì „ìš© ëª¨ë“œë¡œ ì²˜ë¦¬ (Default = false) @Transactional(readOnly = true)   rollbackFor ì •ì˜ëœ Exceptionì— ëŒ€í•´ì„œëŠ” rollbackì„ ìˆ˜í–‰ @Transactional(rollbackFor=Exception.class)   noRollbackFor ì •ì˜ëœ Exceptionì— ëŒ€í•´ì„œëŠ” rollbackì„ ìˆ˜í–‰í•˜ì§€ ì•ŠìŒ. @Transactional(noRollbackFor=Exception.class)   timeout ì§€ì •í•œ ì‹œê°„ ë‚´ì— í•´ë‹¹ ë©”ì†Œë“œ ìˆ˜í–‰ì´ ì™„ë£Œë˜ì§€ ì•Šì€ ê²½ìš° rollback ìˆ˜í–‰. -1ì¼ ê²½ìš° no timeout (Default = -1) @Transactional(timeout=10)    ë§ˆì¹˜ë©° ìì¹« ì˜ëª»í–ˆë‹¤ê°€ëŠ” ì›ì¹˜ì•ŠëŠ” íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì˜ëª»ëœ ê²°ê³¼ë¥¼ ì´ˆë˜í• ìˆ˜ ìˆê¸°ë•Œë¬¸ì— ê¸°ë³¸ê°’ì€ ìˆ™ì§€í•˜ëŠ”ê²Œ ì¢‹ì„ê²ƒ ê°™ë‹¤.]]></description></item><item><title>spring4ì—ì„œ json view í™œìš©í•˜ê¸°(with @ResponseBody)</title><link>https://taetaetae.github.io/2017/01/07/spring4-json/</link><pubDate>Sat, 07 Jan 2017 15:47:59 +0000</pubDate><author>Author</author><guid>https://taetaetae.github.io/2017/01/07/spring4-json/</guid><description><![CDATA[<div class="featured-image">
                <img src="/images/spring4-json/json.png" referrerpolicy="no-referrer">
            </div>ìˆ˜ë§ì€ ë¸”ë¡œê±°ë¶„ë“¤ì˜ ë„ì›€ì„ ë°›ê³ ì êµ¬ê¸€ë§ì„ í•´ì„œ ì ìš©ì„ í•´ë´¤ì§€ë§Œ ë„ˆë¬´ë§ì€ ì‚½ì§ˆì„ í–ˆë‹¤.(í•´ë´¤ë˜ ë°©ì‹ì€ jsonViewResolver ë¥¼ ë”°ë¡œ ì„¤ì •í•´ë³´ê±°ë‚˜, @RequestMapping ì˜µì…˜ì„ ë°”ê¿”ë³´ëŠ” ìˆ˜ì¤€..) íŠ¹íˆë‚˜ Springì„¤ì •ë°©ì‹ì´ ì˜ˆì „ ë°©ì‹ì´ì˜€ë˜ xmlì´ ì•„ë‹Œ javaconfigì˜€ê¸° ë•Œë¬¸ì— ë”ìš±ë” ìë£Œê°€ ì—†ì—ˆê³ .. í•œì°¸ì„ ì‚½ì§ˆí•˜ë‹¤ í•´ê²°ì„ í•˜ì—¬ í¬ìŠ¤íŒ…í•˜ê²Œ ëœë‹¤. ìš°ì„  í™˜ê²½ì€ spring 4.3.4.RELEASE, Maven, jdk8ì„ì„ ë°íŒë‹¤.
pom.xml jackson-mapper-aslì„ ì´ìš©í•´ì„œ í•˜ë¼ëŠ” ë¸”ë¡œê±°ë“¤ë„ ìˆì—ˆì§€ë§Œ, ì•„ë¬´ë¦¬í•´ë„(ë­”ê°€ Springë²„ì „ê³¼ ë§ì§€ ì•ŠëŠ”ë“¯ í–ˆë‹¤.) ì˜ ì•ˆë˜ì–´ ì•„ë˜ì™€ ê°™ì€ dependencyë¥¼ ì£¼ì—ˆë‹¤.
&lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt; &lt;version&gt;2.5.1&lt;/version&gt; &lt;/dependency&gt; Controller ì•„ë˜ì™€ê°™ì´ @ResponseBody ì–´ë…¸í…Œì´ì…˜ì„ ì„¤ì •í•´ì£¼ê³  ë¦¬í„´ì€ í•´ë‹¹ ëª¨ë¸ì„ ë„˜ê¸°ë©´ ëœë‹¤.
@RequestMapping(value=&#34;/test&#34;) @ResponseBody public Map&lt;String, Object&gt; test(){ Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;(); map.put(&#34;1&#34;, &#34;111&#34;); map.put(&#34;2&#34;, 222); return map; } ê·¸ë¦¬ê³  í˜¸ì¶œì„ í•´ë³´ë©´ ê¸°ëŒ€í–ˆë˜ê²ƒì²˜ëŸ¼ ì´ì˜ê²Œ jsoní˜•íƒœë¡œ ë‚˜ì˜¨ë‹¤.
{ &#34;1&#34;: &#34;111&#34;, &#34;2&#34;: 222 } ë¬¼ë¡ , list ë‚˜ array, ì¼ë°˜ ê°ì²´ë„ ê°€ëŠ¥í•˜ë‹¤.
ì •ë¦¬ ì‚½ì§ˆì„ ëì— ì•Œê²Œëœ ì‚¬ì‹¤(?)ì„ ì •ë¦¬í•´ë³´ì. ë‹¤ë¥¸ì¸¡ë©´ì—ì„œ ë¶„ì„ì„ í•´ë³´ë©´. @ResponseBodyì„ ì´ìš©í•˜ì—¬ view ì— json í˜•íƒœë¡œ ë‚˜íƒ€ë‚´ê³ ì í•  ê²½ìš° ê°€ëŠ¥í•œ ìƒí™©ì€ toStringìœ¼ë¡œ í–ˆì„ë•Œ jsoní˜•íƒœë¡œ ë‚˜ì˜¬ìˆ˜ ìˆìœ¼ë©´ ê°€ëŠ¥í•˜ë‹¤. ì˜ˆë¡œë“¤ì–´ ì•„ë˜ì²˜ëŸ¼ í´ë˜ìŠ¤ì— Lombok ì–´ë…¸í…Œì´ì…˜ì¸ @Dataê°€ ë¶™ìœ¼ë©´ ìë™ìœ¼ë¡œ toStringì„ ì˜¤ë²„ë¼ì´ë”© í•´ì£¼ê¸° ë•Œë¬¸ì— í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ë¦¬í„´í•˜ê²Œë˜ë©´ ìë™ìœ¼ë¡œ json ì²˜ë¦¬ê°€ ëœë‹¤.
@Data public Student{ private String id; private String name; ... } @ResponseBodyì„ ë¶™ì´ê³  List&lt;Student&gt;ë¥¼ ë¦¬í„´í•˜ê²Œ ë˜ë©´ ì—ëŸ¬ê°€ ë‚˜ëŠ”ë°, ì´ëŸ´ê²½ìš° ë³„ë„ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•´ì¤˜ì•¼ ìë™ìœ¼ë¡œ ë³€í™˜ë˜ì–´ json í˜•íƒœë¡œ ë‚˜ì˜¬ìˆ˜ ìˆê²Œ ëœë‹¤. (list.toStringì„ í•˜ë©´ jsoní˜•íƒœê°€ ì•„ë‹Œ ì´ìƒí•œ ë¬¸ìí˜•íƒœë¡œ ë‚˜ì˜¤ê¸° ë•Œë¬¸&hellip; Mapê°™ì€ê²ƒë„ ë§ˆì°¬ê°€ì§€ ì´ìœ ë¡œ ë³„ë„ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•´ì¤˜ì•¼ ì •ìƒì ìœ¼ë¡œ ë‚˜ì˜¨ë‹¤.)
ë§ˆì¹˜ë©° ë‹¨ìˆœíˆ @ResponseBodyë¥¼ ì‚¬ìš©í•´ì„œ jsonìœ¼ë¡œ ë¦¬í„´í•˜ë ¤ë©´ ì–´ë–¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•´ì•¼í•œë‹¤ ë¡œ ìƒê°í–ˆë˜ê²ƒì—ì„œ, ì´ê²ƒì €ê²ƒ í…ŒìŠ¤íŠ¸ í•œ ê²°ê³¼ toStringì„ í• ìˆ˜ ìˆì–´ì•¼ í•˜ê³  ê·¸ ê°’ì´ jsoní˜•íƒœì´ë©´ ê°€ëŠ¥í•˜ë‹¤ ë¡œ ê²°ë¡ ì´ ì§€ì–´ì¡Œë‹¤. í™•ì‹¤íˆ ì¥ë‹˜ ì½”ë¼ë¦¬ ë§Œì§€ë“¯ì´ &lsquo;ê·¸ëŸ°ê°€ë³´ë‹¤&rsquo;í•˜ê³  ë„˜ì–´ê°€ë©´ ì‚½ì§ˆì´ ì§„ì§œ ë¶ˆí•„ìš”í•œ ì‚½ì§ˆì´ ë˜ëŠ”ê²ƒ ê°™ë‹¤. êµ¬ê¸€ë§ì„ í•´ë³´ê³ , í…ŒìŠ¤íŠ¸ë¥¼ í•´ë´ì„œ, ê²°ë¡ ì ìœ¼ë¡œ ë‚´ê²ƒìœ¼ë¡œ ë§Œë“œëŠ” ìŠµê´€ì„ ê°€ì ¸ì•¼ ê² ë‹¤.]]></description></item></channel></rss>