<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>pipeline - Tag - ğŸ‘¨â€ğŸ’»ê¿ˆê¾¸ëŠ” íƒœíƒœíƒœì˜ ê³µê°„</title><link>https://taetaetae.github.io/tags/pipeline/</link><description>pipeline - Tag - ğŸ‘¨â€ğŸ’»ê¿ˆê¾¸ëŠ” íƒœíƒœíƒœì˜ ê³µê°„</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Sun, 06 Dec 2020 20:19:47 +0900</lastBuildDate><atom:link href="https://taetaetae.github.io/tags/pipeline/" rel="self" type="application/rss+xml"/><item><title>Jenkins Jobì„ ë³‘ë ¬ë¡œ ì‹¤í–‰í•´ì„œ ì†ë„ë¥¼ ê°œì„ í•´ë³´ì. (feat. Pipeline)</title><link>https://taetaetae.github.io/posts/jenkins-job-parallel-processing-by-pipeline/</link><pubDate>Sun, 06 Dec 2020 20:19:47 +0900</pubDate><author>Author</author><guid>https://taetaetae.github.io/posts/jenkins-job-parallel-processing-by-pipeline/</guid><description><![CDATA[<div class="featured-image">
                <img src="/images/jenkins-job-parallel-processing-by-pipeline/pipeline.jpg" referrerpolicy="no-referrer">
            </div>ï»¿ã€€ê´€ë¦¬í•˜ëŠ” URLì´ 200ì‘ë‹µì„ ì£¼ê³  ìˆëŠ”ì§€ ëª¨ë‹ˆí„°ë§ì„ í•œë‹¤ê³  ê°€ì •í•´ë³´ì. ë‹¤ì–‘í•œ ë°©ë²•ì´ ìƒê°ë‚˜ê² ì§€ë§Œ ê°€ì¥ ì²˜ìŒìœ¼ë¡œ ë– ì˜¤ë¥¸ ê±´ ë‹¨ì—° Jenkins. ê°„ë‹¨í•˜ê²Œ ì‚¬ìš©í•  ì–¸ì–´ì— ë§ì¶° Execute Scriptë¥¼ ì‘ì„±í•˜ê³  ìŠ¤ì¼€ì¤„ë§ì„ ê±¸ì–´ ë†“ìœ¼ë©´ í° ìˆ˜ê³  ì—†ì´ ëª¨ë‹ˆí„°ë§ì„ êµ¬ì„±í•  ìˆ˜ ìˆê²Œ ëœë‹¤. ì•„ë˜ëŠ” python scriptë¡œ ì‘ì„±í•´ ë³´ì•˜ë‹¤.
import requests url=&#34;http://ëª¨ë‹ˆí„°ë§url&#34; status_code = requests.get(url).status_code if status_code != 200: print(f&#39;ì‘ë‹µ ì‹¤íŒ¨ :{url}, status : {status_code}&#39;) exit(1) ï»¿ã€€í•˜ì§€ë§Œ ëª¨ë‹ˆí„°ë§ì„ í•´ì•¼ í•˜ëŠ” URLì´ 1ê°œì—ì„œ ì—¬ëŸ¬ ê°œë¡œ ëŠ˜ì–´ë‚œë‹¤ë©´ ì–´ë–»ê²Œ ë ê¹Œ? ë‹¨ìˆœí•˜ê²Œ ì‘ì„±í•œ Scriptë¥¼ ì•„ë˜ì²˜ëŸ¼ ì•½ê°„ ìˆ˜ì •í•˜ë©´ ë˜ê¸´ í•˜ì§€ë§Œ URLë§ˆë‹¤ ì‘ë‹µì†ë„ê°€ ë‹¤ë¥¼ ê²½ìš° ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•˜ë‹¤ ë³´ë‹ˆ ì‹¤í–‰ ì†ë„ëŠ” ëŠë¦´ ìˆ˜ë°–ì— ì—†ë‹¤.
import requests urls = [ &#34;http://ëª¨ë‹ˆí„°ë§url-1&#34;, &#34;http://ëª¨ë‹ˆí„°ë§url-2&#34;, &#34;http://ëª¨ë‹ˆí„°ë§url-3&#34; ] for url in urls: status_code = requests.get(url).status_code if status_code != 200: print(f&#39;ì‘ë‹µ ì‹¤íŒ¨ :{url}, status : {status_code}&#39;) exit(1) ï»¿ ì´ëŸ¬í•œ ê²½ìš°, ë¹ ë¥¸ ì†ë„ë¥¼ ë³´ì¥í•˜ê¸° ìœ„í•´ì„œëŠ” ë³‘ë ¬ë¡œ ì‹¤í–‰ì„ í•´ì•¼ í•œë‹¤ëŠ” ê±´ ëˆ„êµ¬ë‚˜ ë‹¤ ì•Œì§€ë§Œ ê·¸ë ‡ë‹¤ê³  Threadë¥¼ ì‚¬ìš©í•˜ê¸°ì—” ë²Œì¨ë¶€í„° ëœì»¥ ë¶€ë‹´ì´ ëœë‹¤. ê·¸ë ‡ë‹¤ê³  Jobì„ URL ê°œìˆ˜ë§Œí¼ ëŠ˜ë¦¬ê¸°ì—ëŠ” ë°°ë³´ë‹¤ ë°°ê¼½ì´ ë” ì»¤ë²„ë¦¬ê³ &hellip; ê·¸ëŸ¬ë‹¤ ë°œê²¬í•œ ê¸°ëŠ¥ì´ ë°”ë¡œ Jenkins Pipeline!
ã€€ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Jenkins Jobì„ ë™ì‹œì— ì—¬ëŸ¬ ë²ˆ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê²½ìš°ë¥¼ Pipelineì„ í†µí•´ì„œ ê°œì„ í•œ ë‚´ìš©ì— ëŒ€í•˜ì—¬ ê³µìœ í•´ë³´ë ¤ í•œë‹¤. Jenkins Pipelineì— ëŒ€í•´ ë“¤ì–´ë§Œ ë´¤ëŠ”ë° ì´ë²ˆì— ì‹¤ì œë¡œ ì‚¬ìš©í•´ë³´ë‹ˆ ìƒê°ë³´ë‹¤ ì‰½ê²Œ ê°œì„ í•  ìˆ˜ ìˆì—ˆê³  ì˜µì…˜ë“¤ì„ ìƒí™©ì— ë§ê²Œ ì¡°í•©ì„ ì˜ í•œë‹¤ë©´ ìƒë‹¹íˆ í™œìš©ì„±ì´ ë†’ì•„ ë³´ì´ëŠ” ê¸°ëŠ¥ì¸ ê²ƒ ê°™ë‹¤.
ê¸°ì¡´ìƒí™© ã€€í…Œï»¿ìŠ¤íŠ¸ë¥¼ ìœ„í•´ ì„ì˜ë¡œ ëŠë¦° ì‘ë‹µì„ ìƒì„±í•˜ë„ë¡ URLì„ êµ¬ì„±í•˜ê³  ìœ„ì—ì„œ ì´ì•¼ê¸°í–ˆë˜ ê²ƒì²˜ëŸ¼ Job í•˜ë‚˜ì— ì•„ì£¼ ì‹¬í”Œí•˜ê²Œ Python scriptë¥¼ ì‘ì„±í•˜ê³  ì‹¤í–‰í•´ë³´ë„ë¡ í•˜ì. ì„ì˜ë¡œ ëŠë¦° ì‘ë‹µì€ http://slowwly.robertomurray.co.uk/ ì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì„ í™œìš©í•˜ì˜€ë‹¤.ï»¿
import requests urls = [ &#34;http://slowwly.robertomurray.co.uk/delay/0/url/https://www.naver.com/&#34;, &#34;http://slowwly.robertomurray.co.uk/delay/100/url/https://www.naver.com/&#34;, &#34;http://slowwly.robertomurray.co.uk/delay/200/url/https://www.naver.com/&#34;, &#34;http://slowwly.robertomurray.co.uk/delay/500/url/https://www.naver.com/&#34;, &#34;http://slowwly.robertomurray.co.uk/delay/1000/url/https://www.naver.com/&#34;, &#34;http://slowwly.robertomurray.co.uk/delay/2000/url/https://www.naver.com/&#34;, &#34;http://slowwly.robertomurray.co.uk/delay/5000/url/https://www.naver.com/&#34;, &#34;http://slowwly.robertomurray.co.uk/delay/10000/url/https://www.naver.com/&#34;, &#34;http://slowwly.robertomurray.co.uk/delay/20000/url/https://www.naver.com/&#34; ] for url in urls: status_code = requests.get(url).status_code if status_code != 200: print(f&#39;ì‘ë‹µ ì‹¤íŒ¨ :{url}, status : {status_code}&#39;) exit(1) print(f&#39;ì‘ë‹µì„±ê³µ : {url}&#39;) ê·¸ë˜ì„œ ì‹¤í–‰í•´ë³´ë©´ 50ì´ˆê°€ ì†Œìš”ë˜ì—ˆë‹¤. ì, ì´ì œ ê°œì„ ì„ í•´ë³´ì!
ê°œì„ ì„ í•´ë³´ì ã€€ï»¿ì „ì²´ì ì¸ ê°œì„ ì˜ íë¦„ì€ í•˜ë‚˜ì˜ Jobì— ëª¨ë‹ˆí„°ë§í•˜ê³ ì í•˜ëŠ” urlì„ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•„ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•˜ê³ , ì´ë¥¼ Jenkins Pipeline ì„ í†µí•´ ì—¬ëŸ¬ URLì„ ë™ì‹œì— ëª¨ë‹ˆí„°ë§í•˜ê²Œ êµ¬ì„±í•˜ëŠ” ê²ƒì´ë‹¤. ê·¸ëŸ¬ë©´ ë‘ ê°œì˜ Job(íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•„ ëª¨ë‹ˆí„°ë§í•˜ëŠ” Job, Jenkins Pipeline Job) ë§Œìœ¼ë¡œ ë³´ë‹¤ ë¹ ë¥´ê³  íš¨ìœ¨ì ì¸ êµ¬ì„±ì„ í•  ìˆ˜ ìˆì„ ê²ƒìœ¼ë¡œ ìƒìƒì„ í•˜ê³ .
Jobì„ ë²”ìš©ì ìœ¼ë¡œ (Jenkins paramters í™œìš©) ã€€ï»¿ìœ„ì—ì„œ ìƒ˜í”Œë¡œ ì‘ì„±í•˜ì˜€ë˜ Python scriptëŠ” url ì´ ëŠ˜ì–´ë‚ ìˆ˜ë¡ Job ì•ˆì— scriptë¥¼ ìˆ˜ì •í•´ì•¼ í•œë‹¤. ê·¸ë ‡ê²Œ í•´ë„ ë¬´ë°©í•˜ì§€ë§Œ ì´ë²ˆ ê°œì„ ì˜ ëª©í‘œëŠ” í•˜ë‚˜ì˜ Jobì„ Pipeline ì´ ë³‘ë ¬ë¡œ ì»¨íŠ¸ë¡¤í•˜ë„ë¡ ì„¤ì •í•´ì•¼ í–ˆê¸° ë•Œë¬¸ì— Jenkins Jobì— íŒŒë¼ë¯¸í„°ë¥¼ ë°›ì„ ìˆ˜ ìˆë„ë¡ ì•„ë˜ì²˜ëŸ¼ Jenkins Job ì„¤ì •ì— íŒŒë¼ë¯¸í„°ë¥¼ ì„¤ì •í•˜ê³  Python script ë˜í•œ ìˆ˜ì •í•´ ì£¼ì.
ï»¿Job &gt; êµ¬ì„± &gt; ì´ ë¹Œë“œëŠ” ë§¤ê°œë³€ìˆ˜ê°€ ìˆìŠµë‹ˆë‹¤" ï»¿Job &gt; êµ¬ì„± &gt; ì´ ë¹Œë“œëŠ” ë§¤ê°œë³€ìˆ˜ê°€ ìˆìŠµë‹ˆë‹¤  import requests, os url = os.environ[&#39;url&#39;] status_code = requests.get(url).status_code if status_code != 200: print(f&#39;ì‘ë‹µ ì‹¤íŒ¨ :{url}, status : {status_code}&#39;) exit(1) print(f&#39;ì‘ë‹µì„±ê³µ : {url}&#39;) ë³‘ë ¬ ì‹¤í–‰ì„ ìœ„í•œ Jenkins ì„¤ì • ã€€ï»¿Jenkins Job ì„ ìƒì„±í•˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ Jobë§ˆë‹¤ì˜ ëŒ€ê¸°ì—´(Queue)ì´ ìˆì–´ Jobì´ ì‹¤í–‰ ì¤‘ì´ë¼ë©´ ì‹œì‘ëœ ì‹œê°„ ìˆœì„œëŒ€ë¡œ ê¸°ë‹¤ë ¸ë‹¤ê°€ ì•ì„  Jobì´ ì¢…ë£Œê°€ ë˜ë©´ ì´ì–´ì„œ ì‹¤í–‰ë˜ëŠ” êµ¬ì¡°ì´ë‹¤. í•˜ì§€ë§Œ ìš°ë¦¬ëŠ” Jobì„ ë³‘ë ¬ë¡œ ì‹¤í–‰í•´ì•¼ í–ˆê¸°ì— Job ì„¤ì • ì¤‘ í•„ìš”í•œ ê²½ìš° concurrent ë¹Œë“œ ì‹¤í–‰ ì˜µì…˜ì„ ì¼œì¤˜ì„œ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ë³‘ë ¬ë¡œ ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤.
ï»¿Job &gt; êµ¬ì„± &gt; í•„ìš”í•œ ê²½ìš° concurrent ë¹Œë“œ ì‹¤í–‰" ï»¿Job &gt; êµ¬ì„± &gt; í•„ìš”í•œ ê²½ìš° concurrent ë¹Œë“œ ì‹¤í–‰  ã€€ï»¿ë˜í•œ Jenkins Job ìì²´ëŠ” ë³‘ë ¬ë¡œ ì‹¤í–‰ë˜ë„ë¡ ì„¤ì •ë˜ì—ˆë‹¤ í•´ë„ ê¸°ë³¸ì ìœ¼ë¡œ Jenkins ìì²´ì˜ ëŒ€ê¸°ì—´ì€ í•œì •ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ì ë‹¹íˆ ëŠ˜ë ¤ì¤˜ì„œ ì—¬ëŸ¬ ê°œì˜ Jobì´ ëŒ€ê¸° ì—´ ì—†ì´ ë™ì‹œì— ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤.]]></description></item></channel></rss>