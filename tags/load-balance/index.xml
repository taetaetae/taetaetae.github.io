<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>Load Balance - Tag - ğŸ‘¨â€ğŸ’»ê¿ˆê¾¸ëŠ” íƒœíƒœíƒœì˜ ê³µê°„</title><link>https://taetaetae.github.io/tags/load-balance/</link><description>Load Balance - Tag - ğŸ‘¨â€ğŸ’»ê¿ˆê¾¸ëŠ” íƒœíƒœíƒœì˜ ê³µê°„</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Sun, 04 Aug 2019 19:50:43 +0000</lastBuildDate><atom:link href="https://taetaetae.github.io/tags/load-balance/" rel="self" type="application/rss+xml"/><item><title>ì•„íŒŒì¹˜ ë¡œë“œë°¸ëŸ°ì‹±ìœ¼ë¡œ ì—¬ëŸ¬ WAS ìš´ì˜í•˜ê¸°</title><link>https://taetaetae.github.io/2019/08/04/apache-load-balancing/</link><pubDate>Sun, 04 Aug 2019 19:50:43 +0000</pubDate><author>Author</author><guid>https://taetaetae.github.io/2019/08/04/apache-load-balancing/</guid><description><![CDATA[<div class="featured-image">
                <img src="/images/apache-load-balancing/lb_logo.jpg" referrerpolicy="no-referrer">
            </div>ì›¹ì„œë²„ í•˜ë‚˜ë§Œ ì‚¬ìš©í•˜ê±°ë‚˜ WAS í•˜ë‚˜ë§Œì„ ì‚¬ìš©í•˜ë©° ì›¹ì„œë¹„ìŠ¤ë¥¼ ìš´ì˜í•˜ëŠ” ê²½ìš°ëŠ” ê·¹íˆ ë“œë¬¼ë‹¤. ì›¹ì„œë²„ì˜ ì¥ì ê³¼ WASì˜ ì¥ì  ê·¸ ë‘ë§ˆë¦¬ì˜ í† ë¼ë¥¼ ë‹¤ ì¡ê¸° ìœ„í•´ ë³´í†µ ì•ë‹¨ì— ì›¹ì„œë²„ë¥¼ ë‘ê³  ê·¸ ë’¤ì— WASë¥¼ ë‘ë©° ì„œë¹„ìŠ¤ë¥¼ ìš´ì˜í•˜ê³¤ í•œë‹¤. í—Œë° ìš´ì˜í•˜ëŠ” ì„œë¹„ìŠ¤ê°€ ì¸ê¸°ê°€ ë§ì•„ì ¸(?) ì‚¬ìš©ëŸ‰ì´ ë§ì•„ì§€ë‹¤ë©´ ê·¸ë§Œí¼ ì‘ë‹µì´ ëŠë ¤ (TPS ë“±) ì„œë²„ë¥¼ ëŠ˜ë ¤ì•¼ í•˜ëŠ” ìƒí™©ì´ ìƒê¸´ë‹¤ê³  ê°€ì •í•´ë³´ì.(ë¬¼ë¡  ì„œë²„ë¥¼ ëŠ˜ë¦¬ëŠ” ê²ƒë³´ë‹¤ ìºì‹œë¥¼ ì ìš©í•˜ê±°ë‚˜ ë¡œì§ì„ ë°”ê¿”ë³´ëŠ” ë…¸ë ¥ì´ ì„ í–‰ë˜ì•¼ í•˜ê² ì§€ë§Œ&hellip;) ë‹¹ì—°íˆ ì„œë²„ë¶€í„° êµ¬ë§¤í•˜ë©° &ldquo;Scale Out&quot;ì„ í•˜ë ¤ê³  í• ê²ƒì´ë‹¤. ë§Œì•½ ì›ë˜ ìš´ì˜í•˜ë˜ ì„œë²„ê°€ ë„ˆë¬´ ì¢‹ì•„ì„œ CPUë‚˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ ì´ ê±°ì˜ ë°”ë‹¥ì´ì—¬ë„ ì„œë²„ë¥¼ êµ¬ë§¤í•´ì•¼ í• ê¹Œ? ì„œë²„ë¥¼ êµ¬ë§¤í•˜ê²Œë˜ë©´ ê²°êµ­ ë‘ê°œ ì´ìƒì˜ ì„œë²„ê°€ ìš´ì˜ë í…ë° ê·¸ ì„œë²„ë“¤ì„ ì•ì—ì„œ ë¬¶ì–´ì£¼ë©° íŠ¸ë˜í”½ì„ ë¶„ì‚°ì‹œì¼œì£¼ëŠ” ë¬´ì–¸ê°€ê°€ í•„ìš”í•˜ë‹¤. ê·¸ëŸ¬í•œ ê¸°ìˆ ì„ ë°”ë¡œ ë¡œë“œë°¸ëŸ°ì‹± ì´ë¼ê³  í•œë‹¤. í†µìƒ L4 ìŠ¤ìœ„ì¹˜ë¥¼ í™œìš©í•˜ì—¬ ìš”ì²­ì„ ì—¬ëŸ¬ ì„œë²„ë“¤ë¡œ ë¶„ì‚°ì‹œí‚¤ë©° ì‚°ìˆ ì ìœ¼ë¡œëŠ” ì„œë²„ ëŒ€ìˆ˜ë§Œí¼ ì„±ëŠ¥ì´ ì¢‹ì•„ì§€ëŠ” íš¨ê³¼ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ì•ì„œ ë§í–ˆë“¯ ì„œë²„ì˜ ìì› ì‚¬ìš©ë¥ ì´ ë°”ë‹¥ì¼ ì •ë„ë¡œ ê±°ì˜ ì‚¬ìš©ì„ ì•ˆí• ê²½ìš° ì„œë²„ë¥¼ êµ¬ë§¤í•˜ëŠ”ê±´ ë„ˆë¬´ë‚˜ ë¹„íš¨ìœ¨ì ì´ë‹¤. ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” ì„œë²„ë¥¼ ëŠ˜ë¦¬ì§€ ì•Šìœ¼ë©´ì„œ ì›¹ì„œë²„ ì¤‘ ì•„íŒŒì¹˜ë¥¼ í™œìš©í•˜ì—¬ ì—¬ëŸ¬ WASë¥¼ ìš´ì˜í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ê³ ì í•œë‹¤. ì„œë²„ ëŠ˜ë ¤ì•¼ í•˜ëŠ” ìƒí™©ì—ì„œ ì‚¬ìš©í•´ ë³¼ ìˆ˜ ìˆëŠ” ë‚˜ë§Œì˜ ì¢‹ì€ ë¬´ê¸°(?)ê°€ ìƒê¸´ê²Œ ì•„ë‹ê¹Œ ìƒê°ì´ ë“ ë‹¤.
ì•„íŒŒì¹˜ëŠ” EOLì´ ë˜ì—ˆê¸° ë•Œë¬¸ì— 2.4ë²„ì „ìœ¼ë¡œ ì„¤ì¹˜í•˜ê³ , WASëŠ” í¸ì˜ìƒ í†°ì¼“ ìµœì‹ ë²„ì „ìœ¼ë¡œ ì„¤ì¹˜í•´ì„œ ë™ì¼í•œ ì„œë²„ì— ì•„íŒŒì¹˜ í•œëŒ€ì™€ í†°ì¼“ 3ëŒ€ë¥¼ ì—°ë™í•˜ëŠ”ê²ƒì„ ëª©ì ìœ¼ë¡œ í•œë‹¤. ë¡œë“œë°¸ëŸ°ì‹±ì´ ì–´ë–¤ì‹ìœ¼ë¡œ ì´ë£¨ì–´ ì§€ê³  í•˜ìœ„ì— ì—°ê²°ëœ í†°ì¼“ì„ ì»¨íŠ¸ë¡¤ í•˜ëŠ” ë°©ë²• ë˜í•œ ì•Œì•„ë³¼ ì˜ˆì •ì´ë‹¤.
 ì„œë²„ í™˜ê²½ ë° ì„¤ì¹˜í•˜ê²Œ ë  ê° ë²„ì „ì€ ë‹¤ìŒê³¼ ê°™ë‹¤. ì„œë²„ : CentOS 7.4 64Bit apache : httpd-2.4.39 tomcat : apache-tomcat-8.5.43 tomcat-connectors(mod_jk) : 1.2.46
 Apache ì™€ Tomcat ì„¤ì¹˜ í•„ìì˜ í¬ìŠ¤íŒ…ì—ì„œ ì¢…ì¢… ë‚˜ì˜¤ëŠ” ë¶€ë¶„ì´ê¸°ë„ í•˜ê³ , êµ¬ê¸€ë§ í•´ë³´ë©´ ë°”ë¡œ ì„¤ì¹˜ ë°©ë²•ì„ ì‰½ê²Œ ì°¾ì„ ìˆ˜ ìˆê² ì§€ë§Œ ê·¸ë ‡ë‹¤ê³  ì–¸ê¸‰ì„ ì•ˆí•˜ê³  ë„˜ì–´ê°€ê¸°ì—” ë„ˆë¬´ ë¶ˆì¹œì ˆí•˜ë‹ˆ&hellip; ì¹˜íŠ¸í‚¤ì²˜ëŸ¼(?) ë¹ ë¥´ê²Œ ì •ë¦¬í•´ë³´ì.
 Apache  $ wget http://apache.tt.co.kr//httpd/httpd-2.4.39.tar.gz $ tar -zxvf httpd-2.4.39.tar.gz $ ./configure --prefix=/home/~~~/apache $ make &amp;&amp; make install $ cd /home/~~~/apache/bin $ sudo chown root:ê³„ì •ëª… httpd $ sudo chmod +s httpd $ vi /home/~~~/apache/conf/httpd.conf User ê³„ì •ëª… Grop ê³„ì •ëª… $ /home/~~~/apache/bin/apachectl start â† ì‹¤í–‰ ì´ë ‡ê²Œ ì„¤ì¹˜ë¥¼ í•œë’¤ ì‹¤í–‰ì„ ì‹œí‚¤ê³  ì„œë²„ì˜ ipë¥¼ ì ‘ì†í•´ë³´ë©´ ì•„ë˜ì™€ ê°™ì€ í™”ë©´ì„ ë³¼ ìˆ˜ ìˆë‹¤.
 Tomcat  $ wget http://mirror.apache-kr.org/tomcat/tomcat-8/v8.5.43/bin/apache-tomcat-8.5.43.tar.gz $ tar -zxvf apache-tomcat-8.5.43.tar.gz $ /home/apache-tomcat-8.5.43/bin/start.sh â† ì‹¤í–‰ í†°ì¼“ì˜ ê¸°ë³¸ http í¬íŠ¸ì¸ 8080ìœ¼ë¡œ ì ‘ì†ì„ í•´ë³´ë©´ ê·€ì—¬ìš´ ê³ ì–‘ì´ê°€ ìˆëŠ” í†°ì¼“ ê¸°ë³¸í™”ë©´ì„ ë³¼ ìˆ˜ ìˆë‹¤.
ì•„íŒŒì¹˜ì™€ í†°ì¼“ ì—°ë™í•˜ê¸° ì•„íŒŒì¹˜ì™€ í†°ì¼“ì˜ ì—°ë™ì€ mod_jk ì™€ mod_proxy ë“± ë‹¤ì–‘í•œ ëª¨ë“ˆë¡œ ì—°ë™ì„ í•  ìˆ˜ ìˆëŠ”ë° ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” mod_jk ë¥¼ í™œìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ê³ ì í•œë‹¤. ìš°ì„  mod_jk ë¥¼ ì„¤ì¹˜í•˜ì.
 ê°„ë‹¨íˆ mod_jk ëŠ” ì»´íŒŒì¼, ì„¤ì • ë“± ë³µì¡í•˜ì§€ë§Œ í†°ì¼“ ì „ìš© ë°”ì´ë„ˆë¦¬ í”„ë¡œí† ì½œì¸ AJPë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ë†’ì€ ì„±ëŠ¥ì„ ê¸°ëŒ€í• ìˆ˜ê°€ ìˆë‹¤. mod_proxy ëŠ” ë°˜ë©´ ê¸°ë³¸ìœ¼ë¡œ ì•„íŒŒì¹˜ì— íƒ‘ì¬ë˜ì–´ìˆëŠ” ëª¨ë“ˆì´ê¸° ë•Œë¬¸ì— ë³„ë„ì˜ ëª¨ë“ˆ ì„¤ì¹˜ê°€ í•„ìš” ì—†ê³  ì„¤ì •ë„ ê°„ë‹¨í•˜ë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤. ê° ì—°ë™ë°©ì‹ì˜ ì¥ë‹¨ì ì´ ìˆê¸° ë•Œë¬¸ì— ë³¸ì¸ì´ ìš´ì˜í•˜ëŠ” ì„œë²„ ìƒí™©ì— ë§ì¶”ì–´ ì ìš© í•  í•„ìš”ê°€ ìˆë‹¤.
  mod_jk ì„¤ì¹˜  $ wget http://apache.tt.co.kr/tomcat/tomcat-connectors/jk/tomcat-connectors-1.2.46-src.tar.gz $ tar -zxvf tomcat-connectors-1.2.46-src.tar.gz $ cd tomcat-connectors-1.2.46-src/native $ ./configure --with-apxs=/home/~~~/apache/bin/apxs $ make &amp;&amp; make install $ /home/~~~/apache/modules í•˜ìœ„ì— mod_jk.soê°€ ìƒê¹€ mod_jk ë¥¼ í™œìš©í•˜ë©´ AJPë¼ëŠ” í†µì‹ ìœ¼ë¡œ ì•„íŒŒì¹˜ì™€ í†°ì¼“ì´ ì—°ë™ë˜ëŠ”ë° í†°ì¼“ì˜ ê¸°ë³¸ AJP í¬íŠ¸ëŠ” 8009ë²ˆì„ì„ ì•Œê³  ë‹¤ìŒì²˜ëŸ¼ ì„¤ì •ì„ í•´ì£¼ì.
 apache/conf/workers.properties  worker.list=tomcat1 worker.tomcat1.port=8009 worker.tomcat1.host=localhost worker.tomcat1.type=ajp13 worker.tomcat1.lbfactor=1  apache/conf/httpd.conf  LoadModule jk_module modules/mod_jk.so &lt;IfModule jk_module&gt; JkWorkersFile conf/workers.properties JkLogFile logs/mod_jk.log JkLogLevel info JkMount /* tomcat1 &lt;/IfModule&gt; ì´ë ‡ê²Œ í•˜ê³ ì„œ ì•„íŒŒì¹˜ì™€ í†°ì¼“ì„ ì¬ì‹œì‘ í›„ì— ì„œë²„ì˜ ipë¡œ ì ‘ì†í•´ë³´ë©´ (ë³„ë„ì˜ port ì—†ì´) í†°ì¼“ ì„¤ì •í˜ì´ì§€ë¡œ ëœë”©ì´ ë˜ëŠ”ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.]]></description></item></channel></rss>