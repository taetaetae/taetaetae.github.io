<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>user-agent - Tag - ğŸ‘¨â€ğŸ’»ê¿ˆê¾¸ëŠ” íƒœíƒœíƒœì˜ ê³µê°„</title><link>https://taetaetae.github.io/tags/user-agent/</link><description>user-agent - Tag - ğŸ‘¨â€ğŸ’»ê¿ˆê¾¸ëŠ” íƒœíƒœíƒœì˜ ê³µê°„</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Tue, 10 Apr 2018 23:20:19 +0000</lastBuildDate><atom:link href="https://taetaetae.github.io/tags/user-agent/" rel="self" type="application/rss+xml"/><item><title>ë‚´ ì„œë²„ì—ëŠ” ëˆ„ê°€ ë“¤ì–´ì˜¤ëŠ”ê±¸ê¹Œ? (ì‹¤ì‹œê°„ user-agent ë¶„ì„ê¸°)</title><link>https://taetaetae.github.io/2018/04/10/apache-access-log-user-agent/</link><pubDate>Tue, 10 Apr 2018 23:20:19 +0000</pubDate><author>Author</author><guid>https://taetaetae.github.io/2018/04/10/apache-access-log-user-agent/</guid><description><![CDATA[Desktop ë° ìŠ¤ë§ˆíŠ¸í°ì˜ ëŒ€ì¤‘í™”ë¡œ ë‹¤ì–‘í•œ OSì™€ ë¸Œë¼ìš°ì €ë“¤ì„ ì‚¬ìš©í•˜ê²Œ ë˜ì—ˆë‹¤. ì´ë•Œ, ë‚´ê°€ ìš´ì˜í•˜ëŠ” ì›¹ì„œë²„ì— ë“¤ì–´ì˜¤ëŠ” ì‚¬ëŒë“¤ì€ ë¬´ìŠ¨ ê¸°ê¸°ë¡œ ì ‘ì†ì„ í•˜ëŠ” ê²ƒì¼ê¹Œ? í˜¹ì—¬ íŠ¹ì • OSì˜ íŠ¹ì • ë¸Œë¼ìš°ì €ì—ì„œë§Œ ì•ˆë˜ëŠ” ë²„ê·¸ë¥¼ ì¡ê¸° ìœ„í•´ ëª‡ì¼ë°¤ì„ ê³ ìƒí•˜ë©° ê²¨ìš° ìˆ˜ì •í–ˆëŠ”ë°&hellip; ê³¼ì—° ê·¸ OSì˜ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ì ‘ì†ì€ í•˜ê¸°ë‚˜ í•˜ëŠ”ê±¸ê¹Œ? (ã… ã… ) ë§Œì•½, ì ‘ì† ì‚¬ìš©ìì˜ Device ì •ë³´ë¥¼ ì•Œê³ ìˆë‹¤ë©´ ê³ ìƒí•˜ë©° ë²„ê·¸ë¥¼ ì¡ê¸° ì „ì— ë¨¼ì € í•´ë‹¹ Device ì‚¬ìš©ìœ¨ì„ ì²´í¬í•´ ë³¼ìˆ˜ë„ ìˆê³ (ìˆ˜ì •ì´ ì•„ë‹Œ ê°„ë‹¨í•œ ì–¼ëŸ¿ìœ¼ë¡œ í•´ê²°í•œë‹¤ê±°ë‚˜?) ë¹„ì§€ë‹ˆìŠ¤ ëª¨ë¸ê¹Œì§€ ìƒê°í•´ì•¼í•˜ëŠ” ì„œë¹„ìŠ¤ë¼ë©´ íƒ€ê²ŸíŒ…ì„ ì •í•˜ëŠ” ë“± ë‹¤ì–‘í•œ í™œìš©ë„ê°€ ë†’ì€ ê²ƒì´ ë°”ë¡œ User-Agentë¼ê³  í•œë‹¤(ì´í•˜ UA). ì¼ë°˜ Apache ë¥¼ ì›¹ì„œë²„ë¡œ ìš´ì˜í•˜ê³  ìˆë‹¤ê³  ê°€ì •ì„ í•˜ê³  ì–´ë–»ê²Œ ë¶„ì„ì„ í• ìˆ˜ ìˆì—ˆëŠ”ì§€, ê·¸ë¦¬ê³  ë¶„ì„ì„ í•˜ë©° ì¢€ë” ìš°ì•„í•œ(?) ë°©ë²•ì€ ì—†ëŠ”ì§€ ì•Œì•„ ë³´ê³ ì í•œë‹¤.
User-Agentê°€ ë­ì•¼? ë°±ë¬¸ì´ ë¶ˆì—¬ì¼íƒ€(?)ë¼ í–ˆë˜ê°€, ìš°ì„  http://www.useragentstring.com ë¥¼ ë“¤ì–´ê°€ë³´ì. ê·¸ëŸ¬ë©´ ìì‹ ì˜ OS ë° ë¸Œë¼ìš°ì € ë“± ì •ë³´ë¥¼ íŒŒì‹±í•´ì„œ ë³´ì—¬ì£¼ëŠ”ë° ìœ„í‚¤ë°±ê³¼ì— ë”°ë¥´ë©´ &lsquo;ì‚¬ìš©ìë¥¼ ëŒ€ì‹ í•˜ì—¬ ì¼ì„ ìˆ˜í–‰í•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ì—ì´ì „íŠ¸&rsquo;ë¼ê³  í•œë‹¤. ì¦‰, UAë§Œ ì•Œì•„ë„ ì–´ë–¤ ê¸°ê¸°/ë¸Œë¼ìš°ì €ë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆë‹¤ëŠ”ê²ƒ. mozillaì— ê°€ë³´ë©´ ìŠ¤íŒ© ë“± ë‹¤ì–‘í•œ UAë¥¼ ë³¼ìˆ˜ê°€ ìˆëŠ”ë° íŠ¹íˆ ë§¨ ì•„ë˜ë³´ë©´ ê¸°ê¸°/ë¸Œë¼ìš°ì €ë³„ë¡œ ì§€ì›ì •ë³´ê°€ ë‚˜ì™€ìˆë‹¤. ì—¬ê¸°ì„œë„ ë³´ë©´ ëª¨ë“  ëª¨ë°”ì¼ ì‚¼ì„± ë¸Œë¼ìš°ì €ë¥¼ ì œì™¸í•˜ê³ ëŠ” ì „ë¶€ ì§€ì›ì´ ë˜ëŠ”ê±¸ í™•ì¸í• ìˆ˜ ìˆë‹¤.
ì¶œì²˜ : developer.mozilla.org" ì¶œì²˜ : developer.mozilla.org  ê¸°ì¡´ì˜ ë°©ë²• ê·¸ëŸ¼ ì–´ë–»ê²Œ ë‚´ ì„œë²„ì— ë“¤ì–´ì˜¨ ì‚¬ìš©ìë“¤ì˜ UAë¥¼ í™•ì¸í•  ìˆ˜ ìˆì„ê¹Œ? (ì•ì„œ Apacheë¥¼ ì›¹ì„œë²„ë¡œ ìš´ì˜í•œë‹¤ê³  í–ˆìœ¼ë‹ˆ) Apache access log ì—ëŠ” Apacheì—ì„œ ì œê³µí•´ì£¼ëŠ” ëª¨ë“ˆì„ ì´ìš©í•´ ì ‘ì†í•œ í´ë¼ì´ì–¸íŠ¸ì˜ ì •ë³´ê°€ ë‚¨ê²¨ì§€ê³¤ í•œë‹¤. ê·¸ë ‡ë‹¤ë©´ ì´ access logë¥¼ ë¦¬ëˆ…ìŠ¤ ëª…ë ¹ì–´ë“  ì—‘ì…€ë¡œ ë½‘ì•„ì„œë“ ì§€ í™œìš©í•´ì„œ ì •ê·œì‹ìœ¼ë¡œ í¬ë§·íŒ… í•˜ê³  ê·¸ ê²°ê³¼ë¥¼ ë‹¤ì‹œ ê·¸ë£¹í™” ì‹œí‚¤ë©´ ì–¼ì¶” ì›í•˜ëŠ” ë°ì´í„°ë¥¼ ì¶”ì¶œí•´ ë‚¼ìˆ˜ ìˆë‹¤. ( ë²„ê±°í˜•ë“¤ì´ ë§Œë“¤ì–´ë‘” ì •ê·œì‹ì„ ê°€ì ¸ë‹¤ ì‚¬ìš©í• ìˆ˜ë„ ìˆê² ë‹¤. https://regexr.com/?37l4e ) í•˜ì§€ë§Œ, ìš°ì„  ìë™í™”ê°€ ì•ˆë˜ì–´ìˆì–´ ë°ì´í„°ë¥¼ êµ¬í•˜ê³  ì‹¶ì„ë•Œë§ˆë‹¤ ê·€ì°¨ë‹ˆì¦˜ì— ê±¸ë¦´ìˆ˜ ìˆê³  ìŠˆí¼ ê°œë°œì íŒŒì›Œë¥¼ ê¸°ë°˜ìœ¼ë¡œ(?) ë°ì´í„° ì¶”ì¶œì„ ìë™í™” í•œë“¤ ì‹¤ì‹œê°„ìœ¼ë¡œ ë³´ê³ ì‹¶ì„ë• ì œí•œì‚¬í•­ì´ ë§ë‹¤.
ì¢€ë” ë‚˜ì€ ë°©ë²•(?) ì‹¤ì‹œê°„ ë°ì´í„°ë¥¼ ëª¨ë‹ˆí„°ë§ í•˜ëŠ”ë°ì—ëŠ” ë‹¤ì–‘í•œ ì˜¤í”ˆì†ŒìŠ¤ì™€ ë‹¤ì–‘í•œ íˆ´ì´ ìˆê² ì§€ë§Œ ê²½í—˜ì´ ë¶€ì¡±í•œê±´ì§€ ì•„ì§ê¹Œì§„ ElasticStack ë§Œí•œê±¸ ëª»ë³¸ê²ƒ ê°™ë‹¤. ê°„ë‹¨í•˜ê²Œ ì„¤ëª…ì„ í•˜ë©´ access log ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  frontë‹¨ì—ì„œ javascript ë¡œ UAë¥¼ êµ¬í•œë‹¤ìŒ ì´ëŸ¬í•œ ì •ë³´ë¥¼ ë°›ì„ìˆ˜ ìˆëŠ” APIë¥¼ ë§Œë“¤ì–´ ê·¸ìª½ìœ¼ë¡œ ë³´ë‚´ë©´ ì„œë²„ì—ì„œ í•´ë‹¹ UAë¥¼ ë¶„ì„í•´ì„œ ì¹´í”„ì¹´ë¡œ ë³´ë‚´ê³  ..!@#$%^blabla&hellip; ^^; ê·¸ë¦¼ìœ¼ë¡œ ë³´ì.
ì¢€ë” ë‚˜ì€ ë°©ë²•" ì¢€ë” ë‚˜ì€ ë°©ë²•  frontë‹¨ì—ì„œëŠ” navigator.userAgentë¥¼ í™œìš©í•˜ì—¬ UAë¥¼ êµ¬í• ìˆ˜ ìˆì—ˆê³ , APIì—ì„œëŠ” UAë¥¼ ë°›ê³  íŒŒì‹±ì„ í•˜ëŠ”ë° ê´€ë ¨ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•˜ì˜€ë‹¤.
private static final String VERSION_SEPARATOR = &#34;.&#34;; private void userAgentParsingToMap(String userAgent, Map&lt;String, Object&gt; dataMap) { HashMap browser = Browser.lookup(userAgent); HashMap os = OS.lookup(userAgent); HashMap device = Device.lookup(userAgent); dataMap.put(&#34;browserName&#34;, browser.get(&#34;family&#34;)); dataMap.put(&#34;browserVersion&#34;, getVersion(browser)); dataMap.put(&#34;osName&#34;, os.get(&#34;family&#34;)); dataMap.put(&#34;osVersion&#34;, getVersion(os)); dataMap.put(&#34;deviceModel&#34;, device.get(&#34;model&#34;)); dataMap.put(&#34;deviceBrand&#34;, device.get(&#34;brand&#34;)); } private String getVersion(HashMap dataMap) { String majorVersion = (String)dataMap.get(&#34;major&#34;); if (StringUtils.isEmpty(majorVersion)) { return StringUtils.EMPTY; } String minorVersion = (String)dataMap.get(&#34;minor&#34;); String pathVersion = (String)dataMap.get(&#34;path&#34;); StringBuffer sb = new StringBuffer(); sb.append(majorVersion); if (!StringUtils.isEmpty(minorVersion)) { sb.append(VERSION_SEPARATOR); sb.append(minorVersion); } if (!StringUtils.isEmpty(pathVersion)) { sb.append(VERSION_SEPARATOR); sb.append(pathVersion); } return sb.toString(); } ì°¸ê³ ë¡œ Javaë‹¨ì—ì„œ UAë¥¼ íŒŒì‹±í•˜ëŠ” parserê°€ ì—¬ëŸ¬ê°€ì§€ê°€ ìˆëŠ”ë° ê·¸ì¤‘ uap_cljë¼ëŠ” ëª¨ë“ˆì´ ê·¸ë‚˜ë§ˆ ì˜ íŒŒì‹±ì´ ë˜ì–´ì„œ ì‚¬ìš©í•˜ê²Œ ë˜ì—ˆë‹¤.
 ëª¨ë“ˆë³„ ë¹„êµ     ëª¨ë“ˆ Browser OS Device     eu.bitwalker.useragentutils.UserAgent O ë¶ˆëª…í™•í•¨ (Android 5.x) X   net.sf.uadetector.UserAgentStringParser O O ë¶ˆëª…í™•í•¨ (Smartphone)   uap_clj.java.api.* O O O     Parsing ë¹„êµ  UA    &#34;Mozilla/5.0 (Linux; Android 5.1.1; Nexus 6 Build/LYZ28E) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.132 Mobile Safari/537.36&#34;  ê²°ê³¼   - Browser : {patch=3239, family=Chrome Mobile, major=63, minor=0} - OS : {patch=1, patch_minor=, family=Android, major=5, minor=1} - Device : {model=Nexus 6, family=Nexus 6, brand=Generic_Android} ìœ„ì™€ ê°™ì´ êµ¬ì„±ì„ í•˜ë©´ Elasticsearchì— ì¸ë±ì‹±ëœ ë°ì´í„°ë¥¼ Kibanaì—ì„œ ì…ë§›ì— ë§ê²Œ ì‹¤ì‹œê°„ìœ¼ë¡œ ë³¼ìˆ˜ìˆê²Œ ë˜ì—ˆë‹¤!]]></description></item></channel></rss>