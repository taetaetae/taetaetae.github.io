<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>filebeat - Tag - ğŸ‘¨â€ğŸ’»ê¿ˆê¾¸ëŠ” íƒœíƒœíƒœì˜ ê³µê°„</title><link>https://taetaetae.github.io/tags/filebeat/</link><description>filebeat - Tag - ğŸ‘¨â€ğŸ’»ê¿ˆê¾¸ëŠ” íƒœíƒœíƒœì˜ ê³µê°„</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Sun, 10 Feb 2019 14:37:31 +0000</lastBuildDate><atom:link href="https://taetaetae.github.io/tags/filebeat/" rel="self" type="application/rss+xml"/><item><title>ëˆ„êµ¬ë‚˜ í•  ìˆ˜ ìˆëŠ” ì—‘ì„¸ìŠ¤ ë¡œê·¸ ë¶„ì„ ë”°ë¼ í•´ë³´ê¸° (by Elastic Stack)</title><link>https://taetaetae.github.io/2019/02/10/access-log-to-elastic-stack/</link><pubDate>Sun, 10 Feb 2019 14:37:31 +0000</pubDate><author>Author</author><guid>https://taetaetae.github.io/2019/02/10/access-log-to-elastic-stack/</guid><description><![CDATA[<div class="featured-image">
                <img src="/images/access-log-to-elastic-stack/elastic_stack.jpg" referrerpolicy="no-referrer">
            </div>í•„ìê°€ Elastic Stackì„ ì•Œê²Œëœê±´ 2017ë…„ ì–´ëŠ ì—¬ë¦„ ë™ê¸°í˜•ì´ ê³µë¶€í•˜ê³  ìˆëŠ”ê²ƒì„ ë³´ê³  í˜¸ê¸°ì‹¬ì— ë”°ë¼í•˜ë©° ì‹œì‘í•˜ê²Œ ë˜ì—ˆë‹¤. ê·¸ë•Œê¹Œì§€ë§Œ í•´ë„ ë²„ì „ì´ 2.x ì˜€ëŠ”ë° ì§€ê¸ˆ ê¸€ì„ ì“°ê³ ìˆëŠ” 2019ë…„ 2ì›”ì´ˆ ìµœì‹ ë²„ì „ì´ 6.6ì´ë‹ˆ ì •ë§ ë¹ ë¥´ê²Œ ë³€í™”í•˜ëŠ”ê²ƒ ê°™ë‹¤. ë¹ ë¥´ê²Œ ë³€í™”í•˜ëŠ” ë²„ì „ë§Œí¼ ì‚¬ëŒë“¤ì˜ ê´€ì‹¬ë„ (ë“œë¼ë§ˆí‹±í•˜ê²ŒëŠ” ì•„ë‹ˆì§€ë§Œ) ê¾¸ì¤€íˆ ëŠ˜ì–´ë‚˜ ê°œì¸ì ìœ¼ë¡œ, ê·¸ë¦¬ê³  ì‹¤ë¬´ì—ì„œë„ í™œìš©í•˜ëŠ” ë²”ìœ„ê°€ ë§ì•„ì§€ê³  ìˆëŠ”ê²ƒ ê°™ë‹¤.
 trends.embed.renderExploreWidget("TIMESERIES", {"comparisonItem":[{"keyword":"elasticsearch","geo":"KR","time":"today 5-y"}],"category":0,"property":""}, {"exploreQuery":"date=today%205-y&geo=KR&q=elasticsearch","guestPath":"https://trends.google.co.kr:443/trends/embed/"});  ê·¸ë˜ì„œ ê·¸ëŸ°ì§€ ìµœê·¼ë“¤ì–´ (ì•„ì£¼ ì½”ë”±ì§€ë§Œí¼ ì¡°ê¸ˆì´ë¼ë„ ë” í•´ë³¸) í•„ìì—ê²Œ Elastic Stack ì‚¬ìš©ë°©ë²•ì— ëŒ€í•´ ë¬¼ì–´ë³´ëŠ” ì£¼ë³€ ì§€ì¸ë“¤ì´ ëŠ˜ì–´ë‚˜ê³  ìˆë‹¤. ê·¸ë¦¬ê³  ì˜ˆì „ì— í•œì°½ ê³µë¶€í–ˆì„ë•Œì˜ ë²„ì „ë³´ë‹¤ ë§ì´ ë°”ê¼ˆê¸°ì— ì´ ê¸°íšŒì— &ldquo;ê·¸ëŒ€ë¡œ ë”°ë¼ë§Œ í•˜ë©´ Elastic Stackì„ êµ¬ì„±í•  ìˆ˜ ìˆì„ë§Œí•œ ê¸€&quot;ì„ ì¨ë³´ê³ ì í•œë‹¤. ì‚¬ì‹¤ í•„ìê°€ ì˜ˆì „ì— &ldquo;ë„íë¨¼íŠ¸ë¥¼ ë³´ê¸°ì—” ë„ˆë¬´ ì–´ë ¤ì›Œ ë³´ì´ëŠ” ëŠë‚Œì ì¸ ëŠë‚Œ&rdquo; ë•Œë¬¸ì— ì‚½ì§ˆí•˜ë©° êµ¬ì„±í•œ í˜ë“¤ì—ˆë˜ ê¸°ì–µì„ ë˜ì‚´ë ¤ ìµœëŒ€í•œ ì‹¬í”Œí•˜ê³  ì²˜ìŒ í•´ë³´ëŠ” ì‚¬ëŒë„ ë”°ë¼í•˜ê¸°ë§Œ í•˜ë©´ &ldquo;ì•„~ ì´ê²Œ Elastic Stack ì´êµ¬ë‚˜!&rdquo;, &ldquo;ì´ëŸ°ì‹ìœ¼ë¡œ ëŒì•„ê°€ëŠ” ê±°êµ¬ë‚˜!&rdquo; í•˜ëŠ” ë„ì›€ì„ ì£¼ê³  ì‹¶ë‹¤.
 + ê·¸ëŸ¬ë©´ì„œ ìµœì‹ ë²„ì „ë„ ì‚´í´ë³´ê³ &hellip; 1ì„2ì¡°, ì´ëŸ°ê²Œ ë°”ë¡œ ë¸”ë¡œê·¸ë¥¼ í•˜ëŠ” ì´ìœ ì´ì§€ ì•Šì„ê¹Œ? ë‹¤ì‹œí•œë²ˆ ë§í•˜ì§€ë§Œ ë„íë¨¼íŠ¸ê°€ ìµœê³  ì§€ì¹¨ì„œì´ê¸´ í•˜ë‹¤&hellip;
 Elastic ê³µì‹ í™ˆí˜ì´ì§€ì— ê°€ë©´ ê° ì œí’ˆêµ°ë“¤ì— ëŒ€í•´ ê·¸ë¦¼ìœ¼ë¡œ ëœ ìì„¸í•œ ì„¤ëª…ê³¼ ë„íë¨¼íŠ¸ê°€ ìˆì§€ë§Œ ì´ë“¤ì„ ì–´ë–¤ì‹ìœ¼ë¡œ ì¡°í•©í•˜ì—¬ ì‚¬ìš©í•˜ëŠ”ì§€ì— ëŒ€í•œ ì „ì²´ì ì¸ íë¦„ì„ ë³¼ ìˆ˜ ìˆëŠ” ê³³ì€ ì—†ì–´ ë³´ì¸ë‹¤. (ì§€ê¸ˆ ë³´ë©´ ë„íë¨¼íŠ¸ê°€ ê·¸ ì–´ë””ë³´ë‹¤ ì„¤ëª…ì´ ì˜ë˜ì–´ ìˆë‹¤ê³  ìƒê°ë˜ì§€ë§Œ ì‚¬ì „ ì§€ì‹ì´ ì „í˜€ì—†ëŠ” ìƒíƒœì—ì„œëŠ” ë´ë„ë´ë„ ì–´ë ¤ì›Œ ë³´ì˜€ë‹¤.) ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Apache access logë¥¼ Elasticsearchì— ì¸ë±ì‹± í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì„¤ëª…í•´ë³´ê³ ì í•œë‹¤.
ì „ì²´ì ì¸ íë¦„ í•„ìëŠ” ê¸€ë³´ë‹¤ëŠ” ê·¸ë¦¼ì„ ì¢‹ì•„í•˜ëŠ” í¸ì´ë¼ ì „ì²´ì ì¸ íë¦„ì„ ê·¸ë¦¼ìœ¼ë¡œ ë¨¼ì € ë³´ì.
  ì™¸ë¶€ì—ì„œì˜ ì ‘ê·¼ì´ ë°œìƒí•˜ë©´ apache ì›¹ì„œë²„ì—ì„œ ì„¤ì •í•œ ê²½ë¡œì— access logê°€ íŒŒì¼ë¡œ ìƒì„±ì´ ë˜ê±°ë‚˜ ìˆëŠ” íŒŒì¼ì— ì¶”ê°€ê°€ ëœë‹¤. í•´ë‹¹ íŒŒì¼ì—ëŠ” í•œì¤„ë‹¹ í•˜ë‚˜ì˜ ì—‘ì„¸ìŠ¤ ì •ë³´ê°€ ë‚¨ê²Œ ëœë‹¤. fileBeatì—ì„œ í•´ë‹¹ íŒŒì¼ì„ íŠ¸ë˜í‚¹ í•˜ê³  ìˆë‹¤ê°€ ë¼ì¸ì´ ì¶”ê°€ë˜ë©´ ì´ ì •ë³´ë¥¼ logstash ì—ê²Œ ì „ë‹¬í•´ì¤€ë‹¤. logastsh ëŠ” filebeatì—ì„œ ì „ë‹¬í•œ ì •ë³´ë¥¼ íŠ¹ì • portë¡œ input ë°›ëŠ”ë‹¤. ë°›ì€ ì •ë³´ë¥¼ filter ê³¼ì •ì„ í†µí•´ ê° ì •ë³´ë¥¼ ë¶„í•  ë° ì •ì œí•œë‹¤. (ip, uri, time ë“±) ì •ë¦¬ëœ ì •ë³´ë¥¼ elasticsearch ì— ouput ìœ¼ë¡œ ë³´ë‚¸ë‹¤. (ì •í™•íˆ ë§í•˜ë©´ ì¸ë±ì‹±ì„ í•œë‹¤.) elasticsearch ì— ì¸ë±ì‹± ëœ ì •ë³´ë¥¼ í‚¤ë°”ë‚˜ë¥¼ í†µí•´ ì†ì‰½ê²Œ ë¶„ì„ì„ í•œë‹¤.  í•œë²ˆì˜ ì„¤ì¹˜ê³  ì¼ë ¨ì˜ ê³¼ì •ì´ ëšë”± ëœë‹¤ë©´ ë„ˆë¬´ í¸í•˜ê² ì§€ë§Œ, ê°ê°ì˜ ë ˆì´ì–´ê°€ ë‚˜ë‰˜ì–´ì ¸ìˆëŠ” ì´ìœ ëŠ” í•˜ëŠ” ì—­í™œì´ ì „ë¬¸ì ìœ¼ë¡œ(?) ë‚˜ë‰˜ì–´ì ¸ ìˆê³  ê° ë ˆì´ì–´ì—ì„œëŠ” ì„¸ë¶€ ì„¤ì •ì„ í†µí•´ ë³´ë‹¤ íš¨ìœ¨ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.
 beatsë¼ëŠ” ë ˆì´ì–´ê°€ ë‚˜ì˜¤ê¸° ì „ì—ëŠ” logstashì—ì„œ ì§ì ‘ fileì„ ë°”ë¼ë³´ê³¤ í–ˆì—ˆëŠ”ë° beatsê°€ logstash ë³´ë‹¤ ê°€ë²¼ìš´ shipper ëª©ì ìœ¼ë¡œ ë‚˜ì˜¨ agent ì´ë‹¤ë³´ë‹ˆ í†µìƒ logstash ì•ë‹¨ì— filebeatë¥¼ ìœ„ì¹˜ì‹œí‚¤ê³¤ í•œë‹¤ê³  í•œë‹¤.
 ì „ì²´ì ì¸ ê·¸ë¦¼ì€ ìœ„ì™€ ê°™ê³ , ì´ì œ ì´ ê¸€ì„ ë³´ê³ ìˆëŠ” ì—¬ëŸ¬ë¶„ë“¤ì´ ë”°ë¼í•  ì°¨ë¡€ì´ë‹¤. ê° ë ˆì´ì–´ë³„ë¡œ í•˜ë‚˜ì”© ì„¤ì¹˜ë¥¼ í•´ë³´ë©° êµ¬ì„±ì„ í•´ë³´ì. ì„¤ì¹˜ìˆœì„œëŠ” ë°ì´í„° íë¦„ì˜ ìˆœì„œì— ë§ì¶° ë‹¤ìŒê³¼ ê°™ì€ ìˆœì„œë¡œ ì„¤ì¹˜ë¥¼ í•´ì•¼ íš¨ìœ¨ì ìœ¼ë¡œ ë³¼ìˆ˜ê°€ ìˆë‹¤. (ì•„ë˜ìˆœì„œëŒ€ë¡œ í•˜ì§€ ì•Šì„ê²½ìš° ì„¤ì¹˜/ì‹œì‘/ì¢…ë£Œ ë¥¼ ê°ê°ì˜ íƒ€ì´ë°ì— ë§ì¶”ì–´ í•´ì¤˜ì•¼ í• ê²ƒ ê°™ì•„ ë³µì¡í• ê²ƒê°™ë‹¤.)
elasticsearch â†’ logstash â†’ kibana â†’ filebeat ì´ í¬ìŠ¤íŒ…ì€ CentOS 7.4ì—ì„œ Java 1.8, apache 2.2ê°€ ì„¤ì¹˜ë˜ì–´ìˆë‹¤ëŠ” ê°€ì •í•˜ì— ë³´ë©´ ë ë“¯í•˜ë‹¤. ë˜í•œ ê° ë ˆì´ì–´ë³„ ì„¤ëª…ì€ êµ¬ê¸€ë§ì„ í•˜ê±°ë‚˜ Elastic ê³µì‹ í™ˆí˜ì´ì§€ì— ê°€ë³´ë©´ ìì„¸íˆ ë‚˜ì™€ìˆìœ¼ë‹ˆ ê¸°ë³¸ ì„¤ëª…ì€ ì•ˆí•˜ëŠ”ê²ƒìœ¼ë¡œ í•˜ê³ , ê° ë ˆì´ì–´ì˜ ì„¸ë¶€ ì„¤ì •ì€ í•˜ì§€ ì•ŠëŠ”ê²ƒìœ¼ë¡œ í•œë‹¤.
Elasticsearch ê³µì‹ í™ˆí˜ì´ì§€
ë‹¤ìš´ë°›ê³  ì••ì¶•í’€ê³  ì‹¬ë³¼ë¦­ ê²½ë¡œ ë§Œë“¤ê³  (ì‹¬ë³¼ë¦­ ê²½ë¡œëŠ” ì„ íƒì‚¬í•­) $ wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.6.0.tar.gz $ tar zxvf elasticsearch-6.6.0.tar.gz $ ln -s elasticsearch-6.6.0 elasticsearch ì„¤ì • íŒŒì¼ì„ ì—´ê³  ì¶”ê°€í•´ì¤€ë‹¤. $ cd elasticsearch/conf $ vi elasticsearch.yml path.data: /~~~/data/elasticsearch (ê¸°ë³¸ê²½ë¡œì—ì„œ ë³€ê²½í• ë•Œì¶”ê°€) path.logs: /~~~/logs/elasticsearch network.host: 0.0.0.0 # ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ (ì‹¤ì œ ipë¥¼ ì ì–´ì¤˜ë„ ë¨) elasticsearch ì˜ ì‹œì‘ê³¼ ì¢…ë£Œë¥¼ ì¡°ê¸ˆì´ë‚˜ë§ˆ í¸í•˜ê²Œ í•˜ê¸°ìœ„í•´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•´ì¤Œ (ì´ê²ƒë˜í•œ ì„ íƒì‚¬í•­) $ cd ../bin $ echo &#39;.]]></description></item></channel></rss>