<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>fileupload - Tag - ğŸ‘¨â€ğŸ’»ê¿ˆê¾¸ëŠ” íƒœíƒœíƒœì˜ ê³µê°„</title><link>https://taetaetae.github.io/tags/fileupload/</link><description>fileupload - Tag - ğŸ‘¨â€ğŸ’»ê¿ˆê¾¸ëŠ” íƒœíƒœíƒœì˜ ê³µê°„</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Sun, 21 Jul 2019 22:09:58 +0000</lastBuildDate><atom:link href="https://taetaetae.github.io/tags/fileupload/" rel="self" type="application/rss+xml"/><item><title>ìŠ¤í”„ë§ì„ í™œìš©í•œ ëŒ€ìš©ëŸ‰ íŒŒì¼ ì—…ë¡œë“œ êµ¬í˜„</title><link>https://taetaetae.github.io/2019/07/21/spring-file-upload/</link><pubDate>Sun, 21 Jul 2019 22:09:58 +0000</pubDate><author>Author</author><guid>https://taetaetae.github.io/2019/07/21/spring-file-upload/</guid><description><![CDATA[<div class="featured-image">
                <img src="/images/spring-file-upload/upload.png" referrerpolicy="no-referrer">
            </div>ê°œë°œì„ í•˜ë‹¤ë³´ë©´ ì‹¤ì œë¡œ ì§ì ‘ êµ¬í˜„ì„ í•´ë³¸ì ì€ ì—†ì§€ë§Œ ì—¬ê¸°ì €ê¸°ì„œ ë“¤ì–´ë³¸ ì§€ì‹ê³¼ ê·¸ ë™ì•ˆì˜ ì§¬ë°¥(?)ìœ¼ë¡œ ì¶”ì¸¡í•´ë³¼ìˆ˜ ìˆëŠ” ë¶€ë¶„ë“¤ì´ ìˆë‹¤. ë¬¼ë¡  ëª¨ë“ ì¼ì— ì •ë‹µì€ ì—†ê² ì§€ë§Œ ìš”ì¦˜ ëŠë¼ëŠ”ê±´ ì±…ì—ì„œ ê³µë¶€ë§Œ í•´ë³¸ê²ƒê³¼ ë‹¤ë¥¸ ë¸”ë¡œê·¸ë“¤ì—ì„œ ëˆˆìœ¼ë¡œë§Œ ë³´ê³  ë„˜ì–´ê°€ëŠ”ê²ƒë“¤ ê·¸ë¦¬ê³  ì§ì ‘ ì†ê°€ë½ì„ ì›€ì§ì—¬ê°€ë©° ì™œ ì—¬ê¸°ì„œëŠ” ì´ ë°©ë²•ì„ ì‚¬ìš©í•˜ì§€ ê³ ë¯¼í•˜ë©´ì„œ êµ¬í˜„ì„ í•´ë³¸ë‹¤ëŠ”ê±´ ì •ë§ ì—„ì²­ë‚˜ê²Œ í° ì°¨ì´ê°€ ìˆëŠ”ê²ƒ ê°™ë‹¤. ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•˜ë‹¤ë³´ë©´ í•œë²ˆ ì¯¤ ë§Œë‚˜ê²Œ ë˜ëŠ” íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥. í•„ìë„ ëª‡ë²ˆ êµ¬í˜„ì€ í•´ë´¤ì§€ë§Œ ê·¸ëƒ¥ ë‹¨ìˆœíˆ êµ¬í˜„ë§Œ í•´ë³¸ ìƒíƒœì˜€ë‹¤ê°€ ìµœê·¼ì— ê·¸ëƒ¥ íŒŒì¼ ì—…ë¡œë“œê°€ ì•„ë‹Œ ëŒ€ìš©ëŸ‰ íŒŒì¼ ì—…ë¡œë“œì—ì„œì˜ ë¬¸ì œê°€ ë°œìƒí•˜ì—¬ ì—¬ê¸°ì €ê¸° ì‚½ì§ˆì„ í•˜ê²Œ ë˜ì—ˆê³  ì •ë¦¬ë„ í•´ë³¼ê²¸ ìŠ¤í”„ë§ì—ì„œì˜ ëŒ€ìš©ëŸ‰ íŒŒì¼ ì—…ë¡œë“œì‹œ í•œë²ˆì¯¤ ê³ ë ¤í•´ë´ì•¼ í•  ë¶€ë¶„ì— ëŒ€í•´ ì •ë¦¬ë¥¼ í•´ë³´ë ¤ê³  í•œë‹¤.
 ë¬¼ë¡  êµ¬ê¸€ì—ì„œ ê²€ìƒ‰ì„ í•´ë³´ë©´ ì•„ë§ˆ í•„ìê°€ ì“´ê²ƒ ë³´ë‹¤ ë” ìì„¸í•˜ê³  ì¢‹ì€ ê¸€ë“¤ì´ ìˆê² ì§€ë§Œ í•„ìëŠ” ë³´ë‹¤ ëŒ€ìš©ëŸ‰ì— ì§‘ì¤‘ì—ì„œ ì‘ì„±í•´ ë³´ê³ ì í•œë‹¤. ëª…ì‹¬í•˜ì. &ldquo;ì•„ë¬´ë¦¬ íë¦° ì‰í¬ë¼ë„ ì¢‹ì€ ê¸°ì–µë ¥ë³´ë‹¤ ë‚«ë‹¤&rdquo; ë¼ëŠ” ë§ì´ ìˆë“¯ì´
 ìŠ¤í”„ë§ì„ í™œìš©í•œ íŒŒì¼ ì—…ë¡œë“œ êµ¬í˜„ ìš°ì„  ì™„ì „ ì´ˆê¸°ìƒíƒœì—ì„œ ì‹œì‘í•˜ê¸° ìœ„í•´ ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ê³  ê°„ë‹¨í•˜ê²Œ íŒŒì¼ ì—…ë¡œë“œë¥¼ í•  ìˆ˜ ìˆëŠ” form í˜ì´ì§€ì™€ ì—…ë¡œë“œ ë²„íŠ¼ì„ ëˆŒë €ì„ë•Œ ì‘ë™í•˜ê²Œ ë˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë§Œë“¤ì–´ ë³´ì.
import java.io.File; import java.io.IOException; import java.io.InputStream; import org.apache.commons.io.FileUtils; import org.springframework.stereotype.Controller; import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.RequestMethod; import org.springframework.web.bind.annotation.RequestParam; import org.springframework.web.multipart.MultipartFile; import lombok.extern.slf4j.Slf4j; @Slf4j @Controller public class FileUploadController { // ë„ˆë¬´ ê°„ë‹¨ ... 	@RequestMapping(&#34;/form&#34;) public String form() { return &#34;form&#34;; } @RequestMapping(value = &#34;/upload&#34;, method = RequestMethod.POST) public String upload(@RequestParam(&#34;file&#34;) MultipartFile multipartFile) { log.info(&#34;### upload&#34;); File targetFile = new File(&#34;/home1/irteam/&#34; + multipartFile.getOriginalFilename()); try { InputStream fileStream = multipartFile.getInputStream(); FileUtils.copyInputStreamToFile(fileStream, targetFile); } catch (IOException e) { FileUtils.deleteQuietly(targetFile); e.printStackTrace(); } return &#34;redirect:/form&#34;; } } upload ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ fileì´ë¼ëŠ” ì´ë¦„ì˜ íŒŒë¼ë¯¸í„°ë¡œ MultipartFileì„ ë°›ê³  íŒŒì¼ì˜ ì´ë¦„ì„ í™•ì¸ í›„ ìŠ¤íŠ¸ë¦¼ì„ ì½ì–´ íŠ¹ì • ê²½ë¡œì— íŒŒì¼ë¡œ ì €ì¥í•˜ëŠ” ë¡œì§ì´ë‹¤. ê·¸ë‹¤ìŒ /formì„ ì ‘ì†í•˜ê²Œ ë˜ë©´ ë‚˜ì˜¤ëŠ” í¼ í™”ë©´ì„ ë§Œë“¤ì. ì´ê²ƒë„ ì•„ì£¼ ì‹¬í”Œí•˜ê²Œ!
&lt;h1&gt;íŒŒì¼ ì—…ë¡œë“œ&lt;/h1&gt; &lt;form action=&#34;https://taetaetae.github.io/upload&#34; method=&#34;post&#34; enctype=&#34;multipart/form-data&#34;&gt; &lt;input type=&#34;file&#34; value=&#34;íŒŒì¼ ì„ íƒ&#34; name=&#34;file&#34;/&gt; &lt;input type=&#34;submit&#34; value=&#34;ì—…ë¡œë“œ&#34;/&gt; &lt;/form&gt; multipart/form-data ë¼ëŠ” Content-Type ì„ ëª…ì‹œí•´ì£¼ê³  íŒŒì¼ì„ ì„ íƒí•˜ë©´ /uploadë¡œ POSTìš”ì²­ì„ í•˜ë„ë¡ ì„¤ì •í•œë‹¤. ì´ë ‡ê²Œ ë˜ë©´ ë„ˆë¬´ ê°„ë‹¨í•˜ê²Œ + ì´ìƒì—†ì´ íŒŒì¼ì´ ì—…ë¡œë“œê°€ ì˜ ë˜ë‹ˆ ì´ê²Œ ì´ì•¼ê¸° í•  êº¼ë¦¬ì¸ê°€(?) ì‹¶ì„ì •ë„ë¡œ ì‹¬í”Œí•˜ë‹¤.
ê·¸ëŸ°ë° íŒŒì¼ í¬ê¸°ê°€ í¬ë‹¤ë©´? ì„¤ë§ˆ íŒŒì¼ ì—…ë¡œë“œ í•˜ëŠ” ìš©ëŸ‰ì´ í¬ê² ì–´?&hellip; ì™ ì§€ íŒŒì¼ì˜ ìš©ëŸ‰ì´ í¬ë©´ ë¬¸ì œìˆì„ê²ƒ ê°™ì€ë°&hellip; ì¶œì²˜ : https://m.blog.naver.com/naibbo0407/30170815180" ì„¤ë§ˆ íŒŒì¼ ì—…ë¡œë“œ í•˜ëŠ” ìš©ëŸ‰ì´ í¬ê² ì–´?&hellip; ì™ ì§€ íŒŒì¼ì˜ ìš©ëŸ‰ì´ í¬ë©´ ë¬¸ì œìˆì„ê²ƒ ê°™ì€ë°&hellip; ì¶œì²˜ : https://m.blog.naver.com/naibbo0407/30170815180  ê°œë°œì„ í•˜ë‹¤ë³´ë©´ í•­ìƒ ìƒê°í•´ì•¼ í•  ë¶€ë¶„ì¤‘ì— í•˜ë‚˜ê°€ ë°”ë¡œ í™•ì¥ì„±ì¸ê²ƒ ê°™ë‹¤. ì´ ë¶€ë¶„ì—ì„œ ì—­ì‹œ ë¬¸ì œê°€ ë˜ì—ˆë˜ ê²ƒ. í‰ì†Œë³´ë‹¤ ìš©ëŸ‰ì´ í° íŒŒì¼ì´ ì—…ë¡œë“œê°€ ë˜ë©´ì„œ (í‰ì†Œ 3~400MB ì˜€ë‹¤ê°€ 3~4GBì •ë„ì˜ íŒŒì¼ì´ ì—…ë¡œë“œê°€ ë˜ëŠ” ë§¤ì§) ì—…ë¡œë“œê°€ ì•ˆë˜ëŠ” ìƒí™©ì´ ë°œìƒí•˜ì˜€ë‹¤. ë‹¹ì—°íˆ ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ëˆ„êµ°ê°€ ë§í–ˆë“¯ ë¡œê·¸ë¶€í„° ì‚´í´ë³´ì•˜ëŠ”ë° Apache - (AJP) - Tomcat ìœ¼ë¡œ êµ¬ì„±ëœ í™˜ê²½ì—ì„œ tomcat ë¡œê·¸ì— ### uploadë¼ëŠ” ë¡œê·¸ê°€ ì—†ê³  ì•„íŒŒì¹˜ ë¡œê·¸ì—” 502 ì—ëŸ¬ê°€ ë°œìƒí•œ ê²ƒì´ì—ˆë‹¤. ì™œ í†°ì¼“ ë¡œê·¸ë„ ì•ˆë‚¨ê³  ê·¸ì „ì— ì—ëŸ¬ê°€ ë°œìƒí•˜ì˜€ì„ê¹Œ? ì´ë•Œë¶€í„° (ê·¼ê±°ì—†ëŠ” ì¶”ì¸¡ì„ í•˜ë©°&hellip;) ê³ ë‚œê³¼ ì—­ê²½ì˜ ì‚½ì§ˆì„ í•˜ê¸° ì‹œì‘í•˜ê²Œ ëœë‹¤. í†°ì¼“ ë²„ì „ì´ ë¬¸ì œì¼ê¹Œ? ë¡œê·¸ê°€ ì•ˆì°í˜”ë‹¤ë©´ ë‹¤ë¥¸ í•„í„°ë‚˜ ì¸í„°ì…‰í„°ì—ì„œ ë¬´ì–¸ê°€ë¥¼ ë¨¹ê³ (?)ìˆëŠ”ê±´ ì•„ë‹ê¹Œ? ì ê¹, ê·¼ë° ì›ë˜ ëŒ€ìš©ëŸ‰ ì—…ë¡œë“œê°€ ë˜ê¸´ í•´? íŒŒì¼ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ í•˜ëŠ” ì‚¬ì´íŠ¸ ë³´ë©´ ë³„ë„ í”„ë¡œê·¸ë¨ìœ¼ë¡œ í•˜ë˜ë°&hellip; ê¼¬ë¶ˆê¼¬ë¶ˆ ë¯¸ë¡œì†ì„ í—¤ë©”ëŠ”ê²ƒë§Œ ê°™ì•˜ë˜ ì‚½ì§ˆì˜ ë¬¸ì œëŠ” ê²°êµ­ ë©”ëª¨ë¦¬ì— ìˆì—ˆë‹¤. íŒŒì¼ì„ ì—…ë¡œë“œ í•˜ê²Œ ë˜ë©´ í•´ë‹¹ ë‚´ìš©ì„ ìš°ì„  ë©”ëª¨ë¦¬ì— ë‹´ê²Œ ë˜ê³  ë‹¤ ë‹´ì€ í›„ ë©”ëª¨ë¦¬ì— ìˆëŠ” ë‚´ìš©ì„ wasì— ì „ë‹¬í•œ ë’¤ HttpServletRequest ë¡œ ë„˜ì–´ì˜¤ê²Œ ëœë‹¤.(Apache &gt; Tomcat) ê·¸ëŸ°ë° íŒŒì¼ì„ ì—…ë¡œë“œ í•˜ë©´ì„œ ë©”ëª¨ë¦¬ì— íŒŒì¼ì´ ì¨ì§€ë‹¤ê°€ ë©”ëª¨ë¦¬ ë¶€ì¡±ìœ¼ë¡œ OOMì´ ë°œìƒí•˜ê²Œ ë˜ë²„ë¦° ê²ƒì´ì—ˆë‹¤. ë˜í•œ ìŠ¤í”„ë§ íŒŒì¼ ìµœëŒ€í¬ê¸°ë¥¼ ë³„ë„ë¡œ ì§€ì •í•˜ì§€ ì•Šê³  ìˆì—ˆê¸° ë•Œë¬¸ì— ë©”ëª¨ë¦¬ê°€ ì¶©ë¶„í–ˆë‹¤ í•˜ë”ë¼ë„ ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ìƒí™©ì´ì—ˆë‹¤.]]></description></item></channel></rss>