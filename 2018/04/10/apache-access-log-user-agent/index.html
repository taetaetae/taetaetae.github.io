<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>ë‚´ ì„œë²„ì—ëŠ” ëˆ„ê°€ ë“¤ì–´ì˜¤ëŠ”ê±¸ê¹Œ? (ì‹¤ì‹œê°„ user-agent ë¶„ì„ê¸°) -</title><meta property="og:title" content="ë‚´ ì„œë²„ì—ëŠ” ëˆ„ê°€ ë“¤ì–´ì˜¤ëŠ”ê±¸ê¹Œ? (ì‹¤ì‹œê°„ user-agent ë¶„ì„ê¸°)"><meta property="og:description" content="Desktop ë° ìŠ¤ë§ˆíŠ¸í°ì˜ ëŒ€ì¤‘í™”ë¡œ ë‹¤ì–‘í•œ OSì™€ ë¸Œë¼ìš°ì €ë“¤ì„ ì‚¬ìš©í•˜ê²Œ ë˜ì—ˆë‹¤. ì´ë•Œ, ë‚´ê°€ ìš´ì˜í•˜ëŠ” ì›¹ì„œë²„ì— ë“¤ì–´ì˜¤ëŠ” ì‚¬ëŒë“¤ì€ ë¬´ìŠ¨ ê¸°ê¸°ë¡œ ì ‘ì†ì„ í•˜ëŠ” ê²ƒì¼ê¹Œ? í˜¹ì—¬ íŠ¹ì • OSì˜ íŠ¹ì • ë¸Œë¼ìš°ì €ì—ì„œë§Œ ì•ˆë˜ëŠ” ë²„ê·¸ë¥¼ ì¡ê¸° ìœ„í•´ ëª‡ì¼ë°¤ì„ ê³ ìƒí•˜ë©° ê²¨ìš° ìˆ˜ì •í–ˆëŠ”ë°â€¦ ê³¼ì—° ê·¸ OSì˜ ë¸Œë¼ìš°ì € â€¦"><meta property="og:url" content="https://taetaetae.github.io/2018/04/10/apache-access-log-user-agent/"><meta property="og:image" content="https://taetaetae.github.io/images/apache-access-log-user-agent/user_agent_method_2.png"><meta property="og:type" content="article"><meta property="article:published_time" content="2018-04-10T23:20:19+00:00"><meta property="article:modified_time" content="2018-04-10T23:20:19+00:00"><meta property="article:author" content="map[email: link:https://taetaetae.github.io/resume name:íƒœíƒœíƒœ]"><meta property="article:section" content="posts"><meta property="article:tag" content="user-agent"><meta property="article:tag" content="apache access log"><meta property="article:tag" content="Elasitcsearch"><meta property="article:tag" content="Logstash"><meta property="article:tag" content="Kibana"><meta property="article:tag" content="archives-2018"><meta property="og:locale" content="en"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="ë‚´ ì„œë²„ì—ëŠ” ëˆ„ê°€ ë“¤ì–´ì˜¤ëŠ”ê±¸ê¹Œ? (ì‹¤ì‹œê°„ user-agent ë¶„ì„ê¸°)"><meta name=twitter:description content="Desktop ë° ìŠ¤ë§ˆíŠ¸í°ì˜ ëŒ€ì¤‘í™”ë¡œ ë‹¤ì–‘í•œ OSì™€ ë¸Œë¼ìš°ì €ë“¤ì„ ì‚¬ìš©í•˜ê²Œ ë˜ì—ˆë‹¤. ì´ë•Œ, ë‚´ê°€ ìš´ì˜í•˜ëŠ” ì›¹ì„œë²„ì— ë“¤ì–´ì˜¤ëŠ” ì‚¬ëŒë“¤ì€ ë¬´ìŠ¨ ê¸°ê¸°ë¡œ ì ‘ì†ì„ í•˜ëŠ” ê²ƒì¼ê¹Œ? í˜¹ì—¬ íŠ¹ì • OSì˜ íŠ¹ì • ë¸Œë¼ìš°ì €ì—ì„œë§Œ ì•ˆë˜ëŠ” ë²„ê·¸ë¥¼ ì¡ê¸° ìœ„í•´ ëª‡ì¼ë°¤ì„ ê³ ìƒí•˜ë©° ê²¨ìš° ìˆ˜ì •í–ˆëŠ”ë°â€¦ ê³¼ì—° ê·¸ OSì˜ ë¸Œë¼ìš°ì € â€¦"><meta name=twitter:image content="https://taetaetae.github.io/images/apache-access-log-user-agent/user_agent_method_2.png"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://taetaetae.github.io/2018/04/10/apache-access-log-user-agent/><link rel=prev href=https://taetaetae.github.io/2018/04/01/apache-gzip/><link rel=next href=https://taetaetae.github.io/2018/04/29/apache-408-response-code/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"ë‚´ ì„œë²„ì—ëŠ” ëˆ„ê°€ ë“¤ì–´ì˜¤ëŠ”ê±¸ê¹Œ? (ì‹¤ì‹œê°„ user-agent ë¶„ì„ê¸°)","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/taetaetae.github.io\/2018\/04\/10\/apache-access-log-user-agent\/"},"genre":"posts","keywords":"user-agent, apache access log, Elasitcsearch, Logstash, Kibana, archives-2018","wordcount":907,"url":"https:\/\/taetaetae.github.io\/2018\/04\/10\/apache-access-log-user-agent\/","datePublished":"2018-04-10T23:20:19+00:00","dateModified":"2018-04-10T23:20:19+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"íƒœíƒœíƒœ"},"description":""}</script></head><body data-header-desktop=auto data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title>ğŸ‘¨â€ğŸ’»ê¿ˆê¾¸ëŠ” íƒœíƒœíƒœì˜ ê³µê°„</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title>ğŸ‘¨â€ğŸ’»ê¿ˆê¾¸ëŠ” íƒœíƒœíƒœì˜ ê³µê°„</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categories</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">ë‚´ ì„œë²„ì—ëŠ” ëˆ„ê°€ ë“¤ì–´ì˜¤ëŠ”ê±¸ê¹Œ? (ì‹¤ì‹œê°„ user-agent ë¶„ì„ê¸°)</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://taetaetae.github.io/resume title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>íƒœíƒœíƒœ</a></span>&nbsp;<span class=post-category>included in <a href=/categories/tech/><i class="far fa-folder fa-fw" aria-hidden=true></i>Tech</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2018-04-10>2018-04-10</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;907 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;5 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#user-agentê°€-ë­ì•¼>User-Agentê°€ ë­ì•¼?</a></li><li><a href=#ê¸°ì¡´ì˜-ë°©ë²•>ê¸°ì¡´ì˜ ë°©ë²•</a></li><li><a href=#ì¢€ë”-ë‚˜ì€-ë°©ë²•>ì¢€ë” ë‚˜ì€ ë°©ë²•(?)</a></li><li><a href=#ì¢€ë”-ìš°ì•„í•œ-ë°©ë²•>ì¢€ë” ìš°ì•„í•œ ë°©ë²•?</a></li><li><a href=#ë§ˆì¹˜ë©°>ë§ˆì¹˜ë©°</a></li></ul></nav></div></div><div class=content id=content><p>Desktop ë° ìŠ¤ë§ˆíŠ¸í°ì˜ ëŒ€ì¤‘í™”ë¡œ ë‹¤ì–‘í•œ OSì™€ ë¸Œë¼ìš°ì €ë“¤ì„ ì‚¬ìš©í•˜ê²Œ ë˜ì—ˆë‹¤. ì´ë•Œ, ë‚´ê°€ ìš´ì˜í•˜ëŠ” ì›¹ì„œë²„ì— ë“¤ì–´ì˜¤ëŠ” ì‚¬ëŒë“¤ì€ ë¬´ìŠ¨ ê¸°ê¸°ë¡œ ì ‘ì†ì„ í•˜ëŠ” ê²ƒì¼ê¹Œ? í˜¹ì—¬ íŠ¹ì • OSì˜ íŠ¹ì • ë¸Œë¼ìš°ì €ì—ì„œë§Œ ì•ˆë˜ëŠ” ë²„ê·¸ë¥¼ ì¡ê¸° ìœ„í•´ ëª‡ì¼ë°¤ì„ ê³ ìƒí•˜ë©° ê²¨ìš° ìˆ˜ì •í–ˆëŠ”ë°&mldr; ê³¼ì—° ê·¸ OSì˜ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ì ‘ì†ì€ í•˜ê¸°ë‚˜ í•˜ëŠ”ê±¸ê¹Œ? (ã… ã… ) ë§Œì•½, ì ‘ì† ì‚¬ìš©ìì˜ Device ì •ë³´ë¥¼ ì•Œê³ ìˆë‹¤ë©´ ê³ ìƒí•˜ë©° ë²„ê·¸ë¥¼ ì¡ê¸° ì „ì— ë¨¼ì € í•´ë‹¹ Device ì‚¬ìš©ìœ¨ì„ ì²´í¬í•´ ë³¼ìˆ˜ë„ ìˆê³ (ìˆ˜ì •ì´ ì•„ë‹Œ ê°„ë‹¨í•œ ì–¼ëŸ¿ìœ¼ë¡œ í•´ê²°í•œë‹¤ê±°ë‚˜?) ë¹„ì§€ë‹ˆìŠ¤ ëª¨ë¸ê¹Œì§€ ìƒê°í•´ì•¼í•˜ëŠ” ì„œë¹„ìŠ¤ë¼ë©´ íƒ€ê²ŸíŒ…ì„ ì •í•˜ëŠ” ë“± ë‹¤ì–‘í•œ í™œìš©ë„ê°€ ë†’ì€ ê²ƒì´ ë°”ë¡œ <code>User-Agent</code>ë¼ê³  í•œë‹¤(ì´í•˜ UA). ì¼ë°˜ Apache ë¥¼ ì›¹ì„œë²„ë¡œ ìš´ì˜í•˜ê³  ìˆë‹¤ê³  ê°€ì •ì„ í•˜ê³  ì–´ë–»ê²Œ ë¶„ì„ì„ í• ìˆ˜ ìˆì—ˆëŠ”ì§€, ê·¸ë¦¬ê³  ë¶„ì„ì„ í•˜ë©° ì¢€ë” ìš°ì•„í•œ(?) ë°©ë²•ì€ ì—†ëŠ”ì§€ ì•Œì•„ ë³´ê³ ì í•œë‹¤.</p><h2 id=user-agentê°€-ë­ì•¼>User-Agentê°€ ë­ì•¼?</h2><p>ë°±ë¬¸ì´ ë¶ˆì—¬ì¼íƒ€(?)ë¼ í–ˆë˜ê°€, ìš°ì„  <a href=http://www.useragentstring.com target=_blank rel="noopener noreffer">http://www.useragentstring.com</a> ë¥¼ ë“¤ì–´ê°€ë³´ì. ê·¸ëŸ¬ë©´ ìì‹ ì˜ OS ë° ë¸Œë¼ìš°ì € ë“± ì •ë³´ë¥¼ íŒŒì‹±í•´ì„œ ë³´ì—¬ì£¼ëŠ”ë° <a href=https://en.wikipedia.org/wiki/User_agent target=_blank rel="noopener noreffer">ìœ„í‚¤ë°±ê³¼</a>ì— ë”°ë¥´ë©´ &lsquo;ì‚¬ìš©ìë¥¼ ëŒ€ì‹ í•˜ì—¬ ì¼ì„ ìˆ˜í–‰í•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ì—ì´ì „íŠ¸&rsquo;ë¼ê³  í•œë‹¤. ì¦‰, UAë§Œ ì•Œì•„ë„ ì–´ë–¤ ê¸°ê¸°/ë¸Œë¼ìš°ì €ë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆë‹¤ëŠ”ê²ƒ.
<a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/User-Agent target=_blank rel="noopener noreffer">mozilla</a>ì— ê°€ë³´ë©´ ìŠ¤íŒ© ë“± ë‹¤ì–‘í•œ UAë¥¼ ë³¼ìˆ˜ê°€ ìˆëŠ”ë° íŠ¹íˆ ë§¨ ì•„ë˜ë³´ë©´ ê¸°ê¸°/ë¸Œë¼ìš°ì €ë³„ë¡œ ì§€ì›ì •ë³´ê°€ ë‚˜ì™€ìˆë‹¤. ì—¬ê¸°ì„œë„ ë³´ë©´ ëª¨ë“  ëª¨ë°”ì¼ ì‚¼ì„± ë¸Œë¼ìš°ì €ë¥¼ ì œì™¸í•˜ê³ ëŠ” ì „ë¶€ ì§€ì›ì´ ë˜ëŠ”ê±¸ í™•ì¸í• ìˆ˜ ìˆë‹¤.</p><figure><a class=lightgallery href=/images/apache-access-log-user-agent/browser_compatibility.png title=/images/apache-access-log-user-agent/browser_compatibility.png data-thumbnail=/images/apache-access-log-user-agent/browser_compatibility.png data-sub-html="<h2>ì¶œì²˜ : developer.mozilla.org</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/images/apache-access-log-user-agent/browser_compatibility.png data-srcset="/images/apache-access-log-user-agent/browser_compatibility.png, /images/apache-access-log-user-agent/browser_compatibility.png 1.5x, /images/apache-access-log-user-agent/browser_compatibility.png 2x" data-sizes=auto alt=/images/apache-access-log-user-agent/browser_compatibility.png></a><figcaption class=image-caption>ì¶œì²˜ : developer.mozilla.org</figcaption></figure><h2 id=ê¸°ì¡´ì˜-ë°©ë²•>ê¸°ì¡´ì˜ ë°©ë²•</h2><p>ê·¸ëŸ¼ ì–´ë–»ê²Œ ë‚´ ì„œë²„ì— ë“¤ì–´ì˜¨ ì‚¬ìš©ìë“¤ì˜ UAë¥¼ í™•ì¸í•  ìˆ˜ ìˆì„ê¹Œ? (ì•ì„œ Apacheë¥¼ ì›¹ì„œë²„ë¡œ ìš´ì˜í•œë‹¤ê³  í–ˆìœ¼ë‹ˆ) Apache access log ì—ëŠ” Apacheì—ì„œ ì œê³µí•´ì£¼ëŠ” ëª¨ë“ˆì„ ì´ìš©í•´ ì ‘ì†í•œ í´ë¼ì´ì–¸íŠ¸ì˜ ì •ë³´ê°€ ë‚¨ê²¨ì§€ê³¤ í•œë‹¤. ê·¸ë ‡ë‹¤ë©´ ì´ access logë¥¼ ë¦¬ëˆ…ìŠ¤ ëª…ë ¹ì–´ë“  ì—‘ì…€ë¡œ ë½‘ì•„ì„œë“ ì§€ í™œìš©í•´ì„œ ì •ê·œì‹ìœ¼ë¡œ í¬ë§·íŒ… í•˜ê³  ê·¸ ê²°ê³¼ë¥¼ ë‹¤ì‹œ ê·¸ë£¹í™” ì‹œí‚¤ë©´ ì–¼ì¶” ì›í•˜ëŠ” ë°ì´í„°ë¥¼ ì¶”ì¶œí•´ ë‚¼ìˆ˜ ìˆë‹¤. ( ë²„ê±°í˜•ë“¤ì´ ë§Œë“¤ì–´ë‘” ì •ê·œì‹ì„ ê°€ì ¸ë‹¤ ì‚¬ìš©í• ìˆ˜ë„ ìˆê² ë‹¤. <a href=https://regexr.com/?37l4e target=_blank rel="noopener noreffer">https://regexr.com/?37l4e</a> )
í•˜ì§€ë§Œ, ìš°ì„  ìë™í™”ê°€ ì•ˆë˜ì–´ìˆì–´ ë°ì´í„°ë¥¼ êµ¬í•˜ê³  ì‹¶ì„ë•Œë§ˆë‹¤ ê·€ì°¨ë‹ˆì¦˜ì— ê±¸ë¦´ìˆ˜ ìˆê³  ìŠˆí¼ ê°œë°œì íŒŒì›Œë¥¼ ê¸°ë°˜ìœ¼ë¡œ(?) ë°ì´í„° ì¶”ì¶œì„ ìë™í™” í•œë“¤ <code>ì‹¤ì‹œê°„</code>ìœ¼ë¡œ ë³´ê³ ì‹¶ì„ë• ì œí•œì‚¬í•­ì´ ë§ë‹¤.</p><h2 id=ì¢€ë”-ë‚˜ì€-ë°©ë²•>ì¢€ë” ë‚˜ì€ ë°©ë²•(?)</h2><p>ì‹¤ì‹œê°„ ë°ì´í„°ë¥¼ ëª¨ë‹ˆí„°ë§ í•˜ëŠ”ë°ì—ëŠ” ë‹¤ì–‘í•œ ì˜¤í”ˆì†ŒìŠ¤ì™€ ë‹¤ì–‘í•œ íˆ´ì´ ìˆê² ì§€ë§Œ ê²½í—˜ì´ ë¶€ì¡±í•œê±´ì§€ ì•„ì§ê¹Œì§„ ElasticStack ë§Œí•œê±¸ ëª»ë³¸ê²ƒ ê°™ë‹¤. ê°„ë‹¨í•˜ê²Œ ì„¤ëª…ì„ í•˜ë©´ access log ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  frontë‹¨ì—ì„œ javascript ë¡œ UAë¥¼ êµ¬í•œë‹¤ìŒ ì´ëŸ¬í•œ ì •ë³´ë¥¼ ë°›ì„ìˆ˜ ìˆëŠ” APIë¥¼ ë§Œë“¤ì–´ ê·¸ìª½ìœ¼ë¡œ ë³´ë‚´ë©´ ì„œë²„ì—ì„œ í•´ë‹¹ UAë¥¼ ë¶„ì„í•´ì„œ ì¹´í”„ì¹´ë¡œ ë³´ë‚´ê³  ..!@#$%^blabla&mldr;
^^; ê·¸ë¦¼ìœ¼ë¡œ ë³´ì.</p><figure><a class=lightgallery href=/images/apache-access-log-user-agent/user_agent_method_1.png title=/images/apache-access-log-user-agent/user_agent_method_1.png data-thumbnail=/images/apache-access-log-user-agent/user_agent_method_1.png data-sub-html="<h2>ì¢€ë” ë‚˜ì€ ë°©ë²•</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/images/apache-access-log-user-agent/user_agent_method_1.png data-srcset="/images/apache-access-log-user-agent/user_agent_method_1.png, /images/apache-access-log-user-agent/user_agent_method_1.png 1.5x, /images/apache-access-log-user-agent/user_agent_method_1.png 2x" data-sizes=auto alt=/images/apache-access-log-user-agent/user_agent_method_1.png></a><figcaption class=image-caption>ì¢€ë” ë‚˜ì€ ë°©ë²•</figcaption></figure><p>frontë‹¨ì—ì„œëŠ” <code>navigator.userAgent</code>ë¥¼ í™œìš©í•˜ì—¬ UAë¥¼ êµ¬í• ìˆ˜ ìˆì—ˆê³ , APIì—ì„œëŠ” UAë¥¼ ë°›ê³  íŒŒì‹±ì„ í•˜ëŠ”ë° ê´€ë ¨ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•˜ì˜€ë‹¤.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>VERSION_SEPARATOR</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;.&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>private</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>userAgentParsingToMap</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>userAgent</span><span class=p>,</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>Object</span><span class=o>&gt;</span><span class=w> </span><span class=n>dataMap</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>HashMap</span><span class=w> </span><span class=n>browser</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Browser</span><span class=p>.</span><span class=na>lookup</span><span class=p>(</span><span class=n>userAgent</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>HashMap</span><span class=w> </span><span class=n>os</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>OS</span><span class=p>.</span><span class=na>lookup</span><span class=p>(</span><span class=n>userAgent</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>HashMap</span><span class=w> </span><span class=n>device</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Device</span><span class=p>.</span><span class=na>lookup</span><span class=p>(</span><span class=n>userAgent</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>dataMap</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;browserName&#34;</span><span class=p>,</span><span class=w> </span><span class=n>browser</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&#34;family&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>dataMap</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;browserVersion&#34;</span><span class=p>,</span><span class=w> </span><span class=n>getVersion</span><span class=p>(</span><span class=n>browser</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>dataMap</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;osName&#34;</span><span class=p>,</span><span class=w> </span><span class=n>os</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&#34;family&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>dataMap</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;osVersion&#34;</span><span class=p>,</span><span class=w> </span><span class=n>getVersion</span><span class=p>(</span><span class=n>os</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>dataMap</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;deviceModel&#34;</span><span class=p>,</span><span class=w> </span><span class=n>device</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&#34;model&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>dataMap</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;deviceBrand&#34;</span><span class=p>,</span><span class=w> </span><span class=n>device</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&#34;brand&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>getVersion</span><span class=p>(</span><span class=n>HashMap</span><span class=w> </span><span class=n>dataMap</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>majorVersion</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>String</span><span class=p>)</span><span class=n>dataMap</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&#34;major&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>StringUtils</span><span class=p>.</span><span class=na>isEmpty</span><span class=p>(</span><span class=n>majorVersion</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>StringUtils</span><span class=p>.</span><span class=na>EMPTY</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>minorVersion</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>String</span><span class=p>)</span><span class=n>dataMap</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&#34;minor&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>pathVersion</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>String</span><span class=p>)</span><span class=n>dataMap</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&#34;path&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>StringBuffer</span><span class=w> </span><span class=n>sb</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>StringBuffer</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>sb</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=n>majorVersion</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>StringUtils</span><span class=p>.</span><span class=na>isEmpty</span><span class=p>(</span><span class=n>minorVersion</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>sb</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=n>VERSION_SEPARATOR</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>sb</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=n>minorVersion</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>StringUtils</span><span class=p>.</span><span class=na>isEmpty</span><span class=p>(</span><span class=n>pathVersion</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>sb</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=n>VERSION_SEPARATOR</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>sb</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=n>pathVersion</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>sb</span><span class=p>.</span><span class=na>toString</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>ì°¸ê³ ë¡œ Javaë‹¨ì—ì„œ UAë¥¼ íŒŒì‹±í•˜ëŠ” parserê°€ ì—¬ëŸ¬ê°€ì§€ê°€ ìˆëŠ”ë° ê·¸ì¤‘ <code>uap_clj</code>ë¼ëŠ” ëª¨ë“ˆì´ ê·¸ë‚˜ë§ˆ ì˜ íŒŒì‹±ì´ ë˜ì–´ì„œ ì‚¬ìš©í•˜ê²Œ ë˜ì—ˆë‹¤.</p><ul><li>ëª¨ë“ˆë³„ ë¹„êµ</li></ul><table><thead><tr><th>ëª¨ë“ˆ</th><th>Browser</th><th>OS</th><th>Device</th></tr></thead><tbody><tr><td>eu.bitwalker.useragentutils.UserAgent</td><td>O</td><td>ë¶ˆëª…í™•í•¨ (Android 5.x)</td><td>X</td></tr><tr><td>net.sf.uadetector.UserAgentStringParser</td><td>O</td><td>O</td><td>ë¶ˆëª…í™•í•¨ (Smartphone)</td></tr><tr><td>uap_clj.java.api.*</td><td>O</td><td>O</td><td>O</td></tr></tbody></table><ul><li>Parsing ë¹„êµ<ul><li>UA</li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=line><span class=cl>&#34;Mozilla/5.0 (Linux; Android 5.1.1; Nexus 6 Build/LYZ28E) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.132 Mobile Safari/537.36&#34;
</span></span></code></pre></div><ul><li>ê²°ê³¼</li></ul><pre tabindex=0><code>  - Browser : {patch=3239, family=Chrome Mobile, major=63, minor=0}
  - OS : {patch=1, patch_minor=, family=Android, major=5, minor=1}
  - Device : {model=Nexus 6, family=Nexus 6, brand=Generic_Android}
</code></pre><p>ìœ„ì™€ ê°™ì´ êµ¬ì„±ì„ í•˜ë©´ Elasticsearchì— ì¸ë±ì‹±ëœ ë°ì´í„°ë¥¼ Kibanaì—ì„œ ì…ë§›ì— ë§ê²Œ ì‹¤ì‹œê°„ìœ¼ë¡œ ë³¼ìˆ˜ìˆê²Œ ë˜ì—ˆë‹¤!
í•˜ì§€ë§Œ APIë¥¼ ë§Œë“œëŠ” ë¶€ë¶„ + frontì—ì„œ ë³„ë„ì˜ javascriptê°€ ë“¤ì–´ê°„ë‹¤ëŠ” ë¶€ë¶„ + ìš´ì˜í•˜ëŠ” ëª¨ë“  í˜ì´ì§€ì— í•´ë‹¹ javascriptë¥¼ ë„£ì–´ì•¼ì§€ë§Œ ë³¼ìˆ˜ìˆëŠ” ë¶€ë¶„ ë“± ì•½ê°„ ì•„ì‰¬ìš´ ê°ì´ ìˆë‹¤. ë­”ê°€ ë” ì¢‹ì€ ë°©ë²•ì´ ì—†ì„ê¹Œ? ê¹”ë”í•˜ë©´ì„œë„ <code>ìš°ì•„í•œ</code> ë°©ë²•. ì§±êµ¬ë¥¼ ì—´ì‹¬íˆ ë” êµ´ë ¤ë³´ì.</p><h2 id=ì¢€ë”-ìš°ì•„í•œ-ë°©ë²•>ì¢€ë” ìš°ì•„í•œ ë°©ë²•?</h2><p>Logstash ì—ëŠ” UAë¥¼ íŒŒì‹±í•´ì£¼ëŠ” filter plugin ì´ ìˆë‹¤ê³  í•œë‹¤. (<a href=https://www.elastic.co/guide/en/logstash/current/plugins-filters-useragent.html target=_blank rel="noopener noreffer">ë§í¬</a>) ì´ ë°©ë²•ê³¼ ì˜ˆì „ì— í¬ìŠ¤íŒ…í•œ access log ë¥¼ elasticsearch ì— ì¸ë±ì‹± í•˜ëŠ” ë°©ë²•ì„ í˜¼í•©í•˜ë©´ ìœ„ì—ì„œ ê±±ì •í–ˆë˜ ë¬¸ì œë“¤ì„ ì•„ì£¼ ê¹”ë”í•˜ê²Œ í•´ê²°í•  ìˆ˜ ìˆì„ê²ƒ ê°™ë‹¤.</p><blockquote><p>ì§€ë‚œ í¬ìŠ¤íŒ… : <a href=https://taetaetae.github.io/2018/01/25/apache-access-log-to-es target=_blank rel="noopener noreffer">ë§í¬</a></p><div class=post-adsense style="margin:2em 0"><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block;height:150px data-ad-client=ca-pub-5788330009690816 data-ad-slot=9180895229 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></blockquote><p>ë¬¼ë¡  ê¸€ë³´ë‹¤ëŠ” ê·¸ë¦¼ì„¤ëª…ì´ ë” ë¹ ë¥´ë‹ˆ ì „ì²´ì ì¸ íë¦„ì„ ê·¸ë¦¼ìœ¼ë¡œ ë³´ì.</p><figure><a class=lightgallery href=/images/apache-access-log-user-agent/user_agent_method_2.png title=/images/apache-access-log-user-agent/user_agent_method_2.png data-thumbnail=/images/apache-access-log-user-agent/user_agent_method_2.png data-sub-html="<h2>ì¢€ë” ìš°ì•„í•œ ë°©ë²•</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/images/apache-access-log-user-agent/user_agent_method_2.png data-srcset="/images/apache-access-log-user-agent/user_agent_method_2.png, /images/apache-access-log-user-agent/user_agent_method_2.png 1.5x, /images/apache-access-log-user-agent/user_agent_method_2.png 2x" data-sizes=auto alt=/images/apache-access-log-user-agent/user_agent_method_2.png></a><figcaption class=image-caption>ì¢€ë” ìš°ì•„í•œ ë°©ë²•</figcaption></figure><p>â‘  front ë‹¨ì—ì„œ javascriptë¡œ UAë¥¼ êµ¬í•˜ê³  â‘¡ ë³„ë„ë¡œ ë§Œë“  APIì— ë°ì´í„°ë¥¼ ì „ì†¡í•œë’¤ â‘¢ APIì—ì„œëŠ” ì´ë¥¼ ë˜ íŒŒì‹±í•˜ëŠ” ì‘ì—…ì„ logstash ì˜ <code>user-agent filter plugin</code>ìœ¼ë¡œ ê¹”ë”í•˜ê²Œ í•´ê²°í•  ìˆ˜ ìˆì—ˆë‹¤.
ìš°ì„  apacheì—ì„œ access log format ì€ ë‹¤ìŒê³¼ ê°™ê³ </p><pre tabindex=0><code>&#34;%h %l %u %t \&#34;%r\&#34; %&gt;s %b %D \&#34;%{Referer}i\&#34; \&#34;%{User-Agent}i\&#34;&#34;
</code></pre><p>logstashìª½ ì„¤ì •ì€ ë‹¤ìŒê³¼ ê°™ì´ í•´ì£¼ì—ˆë‹¤.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=line><span class=cl>input {
</span></span><span class=line><span class=cl>        file {
</span></span><span class=line><span class=cl>                path =&gt; &#34;/~~~/access.log.*&#34;
</span></span><span class=line><span class=cl>                start_position =&gt; &#34;beginning&#34;
</span></span><span class=line><span class=cl>                codec =&gt; multiline {
</span></span><span class=line><span class=cl>                    pattern =&gt; &#34;^%{IPORHOST}&#34;
</span></span><span class=line><span class=cl>                    negate =&gt; true
</span></span><span class=line><span class=cl>                    what =&gt; previous
</span></span><span class=line><span class=cl>                    auto_flush_interval =&gt; 1
</span></span><span class=line><span class=cl>                }
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>filter {
</span></span><span class=line><span class=cl>        grok {
</span></span><span class=line><span class=cl>                match =&gt; { &#34;message&#34; =&gt; [&#34;%{IPORHOST:clientip} (?:-|%{USER:ident}) (?:-|%{USER:auth}) \[%{HTTPDATE:timestamp}\] \&#34;(?:%{WORD:httpMethod} %{NOTSPACE:uri}(?: HTTP/%{NUMBER:httpversion})?|-)\&#34; %{NUMBER:responseCode} (?:-|%{NUMBER:bytes}) (?:-|%{NUMBER:bytes2})( \&#34;%{DATA:referrer}\&#34;)?( \&#34;%{DATA:user-agent}\&#34;)?&#34;] }
</span></span><span class=line><span class=cl>                remove_field =&gt; [&#34;timestamp&#34;,&#34;<span class=ni>@version</span>&#34;,&#34;path&#34;,&#34;tags&#34;,&#34;httpversion&#34;,&#34;bytes2&#34;]
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>        useragent {
</span></span><span class=line><span class=cl>                source =&gt; &#34;user-agent&#34;
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>        if [os_major]  {
</span></span><span class=line><span class=cl>                mutate {
</span></span><span class=line><span class=cl>                        add_field =&gt; {
</span></span><span class=line><span class=cl>                                os_combine =&gt; &#34;%{os} %{os_major}.%{os_minor}&#34;
</span></span><span class=line><span class=cl>                        }
</span></span><span class=line><span class=cl>                }
</span></span><span class=line><span class=cl>        } else {
</span></span><span class=line><span class=cl>                 mutate {
</span></span><span class=line><span class=cl>                        add_field =&gt; {
</span></span><span class=line><span class=cl>                                os_combine =&gt; &#34;%{os}&#34;
</span></span><span class=line><span class=cl>                        }
</span></span><span class=line><span class=cl>                }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>        if [os] =~ &#34;Windows&#34; {
</span></span><span class=line><span class=cl>                mutate {
</span></span><span class=line><span class=cl>                        update =&gt; {
</span></span><span class=line><span class=cl>                                &#34;os_name&#34; =&gt; &#34;Windows&#34;
</span></span><span class=line><span class=cl>                        }
</span></span><span class=line><span class=cl>                }
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>        if [os] =~ &#34;Mac&#34; {
</span></span><span class=line><span class=cl>                mutate {
</span></span><span class=line><span class=cl>                        update =&gt; {
</span></span><span class=line><span class=cl>                                &#34;os_name&#34; =&gt; &#34;Mac&#34;
</span></span><span class=line><span class=cl>                        }
</span></span><span class=line><span class=cl>                }
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>output {
</span></span><span class=line><span class=cl>        if [user-agent] != &#34;-&#34; and [user-agent] !~ &#34;Java&#34; {
</span></span><span class=line><span class=cl>                kafka {
</span></span><span class=line><span class=cl>                        bootstrap_servers =&gt; &#34;~~~&#34;
</span></span><span class=line><span class=cl>                        topic_id =&gt; &#34;~~~&#34;
</span></span><span class=line><span class=cl>                        codec =&gt; json{}
</span></span><span class=line><span class=cl>                }
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>ì„¤ì •í•˜ëŠ”ë° ê°€ì¥ í° ì–´ë ¤ì› ë˜ ì ì€ grok filter íŒ¨í„´ì„ ì‘ì„±í•˜ëŠ”ë° ë§ì€ ì‹œê°„ì„ í• í•´ì•¼ë§Œ í–ˆë‹¤. ê°œì¸ì ìœ¼ë¡œ <a href="http://grokconstructor.appspot.com/do/match?example=2" target=_blank rel="noopener noreffer">http://grokconstructor.appspot.com/do/match?example=2</a> ì—ì„œ í…ŒìŠ¤íŠ¸ í•´ë³´ë©´ì„œ íŒ¨í„´ì„ ì‘ì„±í• ìˆ˜ ìˆì–´ ê·¸ë‚˜ë§ˆ ë‹¤í–‰ì´ì˜€ë‹¤.
ë˜í•œ logstashì—ì„œ íŒŒì‹±í•´ì£¼ëŠ” ì •ë³´ë¥¼ ì¡°ê¸ˆ ë‹¤ë“¬ê¸° ìœ„í•´ <code>mutate</code> filter ë¥¼ ì‚¬ìš©í•´ì„œ í•„ë“œë¥¼ ì¡°í•©/ìˆ˜ì • í•˜ì˜€ë‹¤.
ìœ„ì²˜ëŸ¼ ì ìš©ì„ í•˜ê³  í•œë‘ì‹œê°„ ìˆ˜ì§‘ì„ í•´ë³´ë‹ˆ Elasticsearchì— ì•„ë˜ì™€ ê°™ì€ ë„íë¨¼íŠ¸ê°€ ìƒì„±ì´ ëœê²ƒì„ í™•ì¸í• ìˆ˜ ìˆì—ˆë‹¤.</p><figure><a class=lightgallery href=/images/apache-access-log-user-agent/user_agent_elasticsearch_document.jpg title=/images/apache-access-log-user-agent/user_agent_elasticsearch_document.jpg data-thumbnail=/images/apache-access-log-user-agent/user_agent_elasticsearch_document.jpg data-sub-html="<h2>ì´ ì–¼ë§ˆë‚˜ ìš°ì•„í•œê°€&mldr;</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/images/apache-access-log-user-agent/user_agent_elasticsearch_document.jpg data-srcset="/images/apache-access-log-user-agent/user_agent_elasticsearch_document.jpg, /images/apache-access-log-user-agent/user_agent_elasticsearch_document.jpg 1.5x, /images/apache-access-log-user-agent/user_agent_elasticsearch_document.jpg 2x" data-sizes=auto alt=/images/apache-access-log-user-agent/user_agent_elasticsearch_document.jpg></a><figcaption class=image-caption>ì´ ì–¼ë§ˆë‚˜ ìš°ì•„í•œê°€&mldr;</figcaption></figure><p>ì´ ì •ë³´ë“¤ì„ ì˜ ì¡°í•©í•´ì„œ Kibanaì—ì„œ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë³¼ìˆ˜ ìˆë‹¤.</p><figure><a class=lightgallery href=/images/apache-access-log-user-agent/kibana_1.png title=/images/apache-access-log-user-agent/kibana_1.png data-thumbnail=/images/apache-access-log-user-agent/kibana_1.png data-sub-html="<h2>user-agent ì•„ ëª¨ë°”ì¼ ì—ì„œë„ ì•ˆë“œë¡œì´ë“œ 7.0ì—ì„œ ë§ì´ ë“¤ì–´ì˜¤ëŠ”êµ¬ë‚˜!</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/images/apache-access-log-user-agent/kibana_1.png data-srcset="/images/apache-access-log-user-agent/kibana_1.png, /images/apache-access-log-user-agent/kibana_1.png 1.5x, /images/apache-access-log-user-agent/kibana_1.png 2x" data-sizes=auto alt=/images/apache-access-log-user-agent/kibana_1.png></a><figcaption class=image-caption>user-agent ì•„ ëª¨ë°”ì¼ ì—ì„œë„ ì•ˆë“œë¡œì´ë“œ 7.0ì—ì„œ ë§ì´ ë“¤ì–´ì˜¤ëŠ”êµ¬ë‚˜!</figcaption></figure><p>UAëŠ” ì•„ë‹ˆì§€ë§Œ ê¸°ì™• í•œê¹€ì— Access logì˜ urië¥¼ ë¶„ì„í•´ë³´ë©´ ì•„ë˜ì²˜ëŸ¼ ë³¼ìˆ˜ë„ ìˆê² ë‹¤.</p><figure><a class=lightgallery href=/images/apache-access-log-user-agent/kibana_2.png title=/images/apache-access-log-user-agent/kibana_2.png data-thumbnail=/images/apache-access-log-user-agent/kibana_2.png data-sub-html="<h2>ì™¸ë¶€ì—ì„œ ë§‰ ì°”ëŸ¬ ëŒ€ëŠ”êµ¬ë‚˜ã…  ì‹œìŠ¤í…œì— ì˜í–¥ì¤„ ì •ë„ë©´ ë§‰ì•„ì•¼ì§€!</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/images/apache-access-log-user-agent/kibana_2.png data-srcset="/images/apache-access-log-user-agent/kibana_2.png, /images/apache-access-log-user-agent/kibana_2.png 1.5x, /images/apache-access-log-user-agent/kibana_2.png 2x" data-sizes=auto alt=/images/apache-access-log-user-agent/kibana_2.png></a><figcaption class=image-caption>ì™¸ë¶€ì—ì„œ ë§‰ ì°”ëŸ¬ ëŒ€ëŠ”êµ¬ë‚˜ã…  ì‹œìŠ¤í…œì— ì˜í–¥ì¤„ ì •ë„ë©´ ë§‰ì•„ì•¼ì§€!</figcaption></figure><h2 id=ë§ˆì¹˜ë©°>ë§ˆì¹˜ë©°</h2><p>ì‚¬ì‹¤ logstash filter pluginì„ ì‘ì„±í•˜ë©´ì„œ ë­”ê°€ if-elseë¡œ ë¶„ê¸°ì²˜ë¦¬í•œê²Œ ì•„ì‰½ê¸´ í•˜ì§€ë§Œ ë§Œì¡±í• ë§Œí•œ ê²°ê³¼ë¥¼ ì–»ì„ìˆ˜ ìˆì–´ì„œ ë‹¤í–‰ì´ë¼ê³  ìƒê°í•˜ê³ , ì—­ì‹œ ë°ì´í„°ë¥¼ rawí˜•íƒœë¡œ ë³´ëŠ”ê²ƒë³´ë‹¤ ì‹œê°í™”í•´ì„œ ë³´ëŠ”ê²Œ í›¨ì”¬ë” ì´í•´ë„ë¥¼ ë†’ì¼ìˆ˜ ìˆë‹¤ëŠ”ê±¸ ë‹¤ì‹œê¸ˆ ì‹¤ê°í• ìˆ˜ ìˆì—ˆë˜ ì¢‹ì€ ì‹œê°„ì´ì˜€ë‹¤.
ê·¸ëŸ°ë°.. ì´ ë°©ë²•ë§ê³  ë” ìš°ì•„í•œ ë°©ë²•ì€ ì—†ìœ¼ë ¤ë‚˜..?;;</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2018-04-10</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://taetaetae.github.io/2018/04/10/apache-access-log-user-agent/ data-title="ë‚´ ì„œë²„ì—ëŠ” ëˆ„ê°€ ë“¤ì–´ì˜¤ëŠ”ê±¸ê¹Œ? (ì‹¤ì‹œê°„ user-agent ë¶„ì„ê¸°)" data-hashtags="user-agent,apache access log,Elasitcsearch,Logstash,Kibana,archives-2018"><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://taetaetae.github.io/2018/04/10/apache-access-log-user-agent/ data-hashtag=user-agent><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://taetaetae.github.io/2018/04/10/apache-access-log-user-agent/><i class="fab fa-linkedin fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://taetaetae.github.io/2018/04/10/apache-access-log-user-agent/ data-title="ë‚´ ì„œë²„ì—ëŠ” ëˆ„ê°€ ë“¤ì–´ì˜¤ëŠ”ê±¸ê¹Œ? (ì‹¤ì‹œê°„ user-agent ë¶„ì„ê¸°)"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://taetaetae.github.io/2018/04/10/apache-access-log-user-agent/ data-title="ë‚´ ì„œë²„ì—ëŠ” ëˆ„ê°€ ë“¤ì–´ì˜¤ëŠ”ê±¸ê¹Œ? (ì‹¤ì‹œê°„ user-agent ë¶„ì„ê¸°)"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on å¾®åš" data-sharer=weibo data-url=https://taetaetae.github.io/2018/04/10/apache-access-log-user-agent/ data-title="ë‚´ ì„œë²„ì—ëŠ” ëˆ„ê°€ ë“¤ì–´ì˜¤ëŠ”ê±¸ê¹Œ? (ì‹¤ì‹œê°„ user-agent ë¶„ì„ê¸°)"><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Blogger" data-sharer=blogger data-url=https://taetaetae.github.io/2018/04/10/apache-access-log-user-agent/ data-title="ë‚´ ì„œë²„ì—ëŠ” ëˆ„ê°€ ë“¤ì–´ì˜¤ëŠ”ê±¸ê¹Œ? (ì‹¤ì‹œê°„ user-agent ë¶„ì„ê¸°)" data-description><i class="fab fa-blogger fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/user-agent/>User-Agent</a>,&nbsp;<a href=/tags/apache-access-log/>Apache Access Log</a>,&nbsp;<a href=/tags/elasitcsearch/>Elasitcsearch</a>,&nbsp;<a href=/tags/logstash/>Logstash</a>,&nbsp;<a href=/tags/kibana/>Kibana</a>,&nbsp;<a href=/tags/archives-2018/>Archives-2018</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/2018/04/01/apache-gzip/ class=prev rel=prev title="gzip ì„¤ì •ìœ¼ë¡œ ì†ë„ë¥¼ ë” ë¹ ë¥´ê²Œ!"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>gzip ì„¤ì •ìœ¼ë¡œ ì†ë„ë¥¼ ë” ë¹ ë¥´ê²Œ!</a>
<a href=/2018/04/29/apache-408-response-code/ class=next rel=next title="ì•„íŒŒì¹˜ ì—‘ì„¸ìŠ¤ ë¡œê·¸ì— 408ì½”ë“œê°€?">ì•„íŒŒì¹˜ ì—‘ì„¸ìŠ¤ ë¡œê·¸ì— 408ì½”ë“œê°€?<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=utterances class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://utteranc.es/>utterances</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.147.9">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.3.0"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2016 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://taetaetae.github.io/resume target=_blank>íƒœíƒœíƒœ</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:500},comment:{utterances:{darkTheme:"github-dark",issueTerm:"pathname",label:"Comment",lightTheme:"github-light",repo:"taetaetae/blog-comment"}},lightgallery:!0}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-86432198-1",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=UA-86432198-1" async></script></body></html>