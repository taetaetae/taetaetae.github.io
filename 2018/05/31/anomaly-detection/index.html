<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>ì‹œê³„ì—´ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ë¯¸ë˜ ì˜ˆì¸¡ í•˜ê¸°(Anomaly Detection) - ğŸ‘¨â€ğŸ’»ê¿ˆê¾¸ëŠ” íƒœíƒœíƒœì˜ ê³µê°„</title><meta name=Description content><meta property="og:title" content="ì‹œê³„ì—´ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ë¯¸ë˜ ì˜ˆì¸¡ í•˜ê¸°(Anomaly Detection)"><meta property="og:description" content="ê¸‰ë³€í•˜ëŠ” ë‚ ì”¨ë¥¼ ì˜ˆì¸¡í•˜ë ¤ë©´ ì–´ë– í•œ ì •ë³´ê°€ ìˆì–´ì•¼ í• ê¹Œ? ë˜ëŠ” ë§ˆíŠ¸ë¥¼ ìš´ì˜í•˜ëŠ” ë‹´ë‹¹ìì¸ ê²½ìš° ë§¤ì¥ ìš´ì˜ì‹œê°„ì„ ì •í•´ì•¼ í•œë‹¤ë©´ ì–´ë– í•œ ê¸°ì¤€ìœ¼ë¡œ? ëœ¨ê±°ìš´ ê°ìì¸ ë¹„íŠ¸ì½”ì¸ ì‹œì¥ì—ì„œ ìˆ˜ìµì„ ì–»ìœ¼ë ¤ë©´ ì–´ë–¤ ì •ë³´ë“¤ì´ ìˆì–´ì•¼ ë¬¼ë¦¬ì§€(?) ì•Šì„ìˆ˜ ìˆì„ê¹Œ?
ìœ„ ì§ˆë¬¸ì— ê³µí†µëœ ì •ë‹µì€ ì˜ˆì „ ê¸°ë¡ë“¤ì¸ê²ƒ ê°™ë‹¤. ë‚ ì”¨ì˜ˆì¸¡ì€ ê¸°ìƒì²­ì—ì„œ ê³¼ê±° ê¸°ë¡ë“¤ì„ ë³´ê³  ë¹„ê°€ ì˜¬ì§€ ë§ì§€ë¥¼ ê²°ì •í•˜ê³  ( ê³¼ê±° ë‚ ì”¨ ì„œë¹„ìŠ¤ë¥¼ ë‹´ë‹¹í•´ë´¤ì§€ë§Œ ë‹¨ìˆœíˆ ê³¼ê±° ê¸°ë¡ë“¤ë¡œ ì˜ˆì¸¡í•œë‹¤ëŠ”ê±´ ë¶ˆê°€ëŠ¥ì— ê°€ê¹ê¸´ í•˜ë‹¤. ) ë§¤ì¥ ìš´ì˜ì‹œê°„ì€ ì˜ˆì „ì— ì†ë‹˜ë“¤ì´ ì–¸ì œì™”ëŠ”ì§€ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ë³´ê³ . ë¹„íŠ¸ì½”ì¸ì´ë‚˜ ì£¼ì‹ì€ ì°¨íŠ¸ë¥¼ ë³´ê³  ì–´ëŠì •ë„ëŠ” ìƒìŠ¹ì¥ì¼ì§€ í•˜ë½ì¥ì¼ì§€ ì¶”ì¸¡ì´ ê°€ëŠ¥í•˜ë‹¤ê³  í•œë‹¤."><meta property="og:type" content="article"><meta property="og:url" content="https://taetaetae.github.io/2018/05/31/anomaly-detection/"><meta property="og:image" content="https://taetaetae.github.io/images/anomaly-detection/kiyoung_chart.png"><meta property="article:published_time" content="2018-05-31T17:03:41+00:00"><meta property="article:modified_time" content="2018-05-31T17:03:41+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://taetaetae.github.io/images/anomaly-detection/kiyoung_chart.png"><meta name=twitter:title content="ì‹œê³„ì—´ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ë¯¸ë˜ ì˜ˆì¸¡ í•˜ê¸°(Anomaly Detection)"><meta name=twitter:description content="ê¸‰ë³€í•˜ëŠ” ë‚ ì”¨ë¥¼ ì˜ˆì¸¡í•˜ë ¤ë©´ ì–´ë– í•œ ì •ë³´ê°€ ìˆì–´ì•¼ í• ê¹Œ? ë˜ëŠ” ë§ˆíŠ¸ë¥¼ ìš´ì˜í•˜ëŠ” ë‹´ë‹¹ìì¸ ê²½ìš° ë§¤ì¥ ìš´ì˜ì‹œê°„ì„ ì •í•´ì•¼ í•œë‹¤ë©´ ì–´ë– í•œ ê¸°ì¤€ìœ¼ë¡œ? ëœ¨ê±°ìš´ ê°ìì¸ ë¹„íŠ¸ì½”ì¸ ì‹œì¥ì—ì„œ ìˆ˜ìµì„ ì–»ìœ¼ë ¤ë©´ ì–´ë–¤ ì •ë³´ë“¤ì´ ìˆì–´ì•¼ ë¬¼ë¦¬ì§€(?) ì•Šì„ìˆ˜ ìˆì„ê¹Œ?
ìœ„ ì§ˆë¬¸ì— ê³µí†µëœ ì •ë‹µì€ ì˜ˆì „ ê¸°ë¡ë“¤ì¸ê²ƒ ê°™ë‹¤. ë‚ ì”¨ì˜ˆì¸¡ì€ ê¸°ìƒì²­ì—ì„œ ê³¼ê±° ê¸°ë¡ë“¤ì„ ë³´ê³  ë¹„ê°€ ì˜¬ì§€ ë§ì§€ë¥¼ ê²°ì •í•˜ê³  ( ê³¼ê±° ë‚ ì”¨ ì„œë¹„ìŠ¤ë¥¼ ë‹´ë‹¹í•´ë´¤ì§€ë§Œ ë‹¨ìˆœíˆ ê³¼ê±° ê¸°ë¡ë“¤ë¡œ ì˜ˆì¸¡í•œë‹¤ëŠ”ê±´ ë¶ˆê°€ëŠ¥ì— ê°€ê¹ê¸´ í•˜ë‹¤. ) ë§¤ì¥ ìš´ì˜ì‹œê°„ì€ ì˜ˆì „ì— ì†ë‹˜ë“¤ì´ ì–¸ì œì™”ëŠ”ì§€ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ë³´ê³ . ë¹„íŠ¸ì½”ì¸ì´ë‚˜ ì£¼ì‹ì€ ì°¨íŠ¸ë¥¼ ë³´ê³  ì–´ëŠì •ë„ëŠ” ìƒìŠ¹ì¥ì¼ì§€ í•˜ë½ì¥ì¼ì§€ ì¶”ì¸¡ì´ ê°€ëŠ¥í•˜ë‹¤ê³  í•œë‹¤."><meta name=application-name content="ğŸ‘¨â€ğŸ’»ê¿ˆê¾¸ëŠ” íƒœíƒœíƒœì˜ ê³µê°„"><meta name=apple-mobile-web-app-title content="ğŸ‘¨â€ğŸ’»ê¿ˆê¾¸ëŠ” íƒœíƒœíƒœì˜ ê³µê°„"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://taetaetae.github.io/2018/05/31/anomaly-detection/><link rel=prev href=https://taetaetae.github.io/2018/04/29/apache-408-response-code/><link rel=next href=https://taetaetae.github.io/2018/06/27/apache-vs-nginx/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"ì‹œê³„ì—´ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ë¯¸ë˜ ì˜ˆì¸¡ í•˜ê¸°(Anomaly Detection)","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/taetaetae.github.io\/2018\/05\/31\/anomaly-detection\/"},"genre":"posts","keywords":"python, anomaly detection, elasticsearch, prophet, facebook, archives-2018","wordcount":1089,"url":"https:\/\/taetaetae.github.io\/2018\/05\/31\/anomaly-detection\/","datePublished":"2018-05-31T17:03:41+00:00","dateModified":"2018-05-31T17:03:41+00:00","publisher":{"@type":"Organization","name":"íƒœíƒœíƒœ"},"author":{"@type":"Person","name":"íƒœíƒœíƒœ"},"description":""}</script></head><body header-desktop=auto header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':('auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark'))&&document.body.setAttribute('theme','dark');</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="ğŸ‘¨â€ğŸ’»ê¿ˆê¾¸ëŠ” íƒœíƒœíƒœì˜ ê³µê°„">ğŸ‘¨â€ğŸ’»ê¿ˆê¾¸ëŠ” íƒœíƒœíƒœì˜ ê³µê°„</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="ğŸ‘¨â€ğŸ’»ê¿ˆê¾¸ëŠ” íƒœíƒœíƒœì˜ ê³µê°„">ğŸ‘¨â€ğŸ’»ê¿ˆê¾¸ëŠ” íƒœíƒœíƒœì˜ ê³µê°„</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/>Posts</a><a class=menu-item href=/tags/>Tags</a><a class=menu-item href=/categories/>Categories</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:inline-block;width:260px;height:600px data-ad-client=ca-pub-5788330009690816 data-ad-slot=2248955907></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><article class="page single"><h1 class="single-title animated flipInX">ì‹œê³„ì—´ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ë¯¸ë˜ ì˜ˆì¸¡ í•˜ê¸°(Anomaly Detection)</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://taetaetae.github.io title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw"></i>íƒœíƒœíƒœ</a></span>&nbsp;<span class=post-category>included in <a href=/categories/tech/><i class="far fa-folder fa-fw"></i>Tech</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2018-05-31>2018-05-31</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;1089 words&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;6 minutes&nbsp;</div></div><div class=featured-image><img class=lazyload src=/svg/loading.min.svg data-src=/images/anomaly-detection/kiyoung_chart.png data-srcset="/images/anomaly-detection/kiyoung_chart.png, /images/anomaly-detection/kiyoung_chart.png 1.5x, /images/anomaly-detection/kiyoung_chart.png 2x" data-sizes=auto alt=/images/anomaly-detection/kiyoung_chart.png title=/images/anomaly-detection/kiyoung_chart.png></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#ìƒí™©íŒŒì•…ë¶€í„°>ìƒí™©íŒŒì•…ë¶€í„°</a></li><li><a href=#ìš”êµ¬ì‚¬í•­-ë°-ê³¼ê±°-ë°ì´í„°-ë¶„ì„>ìš”êµ¬ì‚¬í•­ ë° ê³¼ê±° ë°ì´í„° ë¶„ì„</a></li><li><a href=#ì¥ì• ë°œìƒ-ì „ì—-ë¨¼ì €-ì°¾ì•„ë³´ì>ì¥ì• ë°œìƒ ì „ì— ë¨¼ì € ì°¾ì•„ë³´ì!</a></li><li><a href=#ì§€ë‚œ-ë°ì´í„°ì™€-ë¹„êµí•˜ê¸°>ì§€ë‚œ ë°ì´í„°ì™€ ë¹„êµí•˜ê¸°</a></li><li><a href=#ì¡°ê¸ˆë”-ìš°ì•„í•˜ê²Œ-ì–¸ì œë¶€í„´ê°€-ìš°ì•„í•˜ë‹¨-ë§ì„-ì¢‹ì•„í•˜ëŠ”ê²ƒ-ê°™ë‹¤>ì¡°ê¸ˆë” ìš°ì•„í•˜ê²Œ! <code>(ì–¸ì œë¶€í„´ê°€ ìš°ì•„í•˜ë‹¨ ë§ì„ ì¢‹ì•„í•˜ëŠ”ê²ƒ ê°™ë‹¤..)</code></a></li><li><a href=#ë§ˆì¹˜ë©°>ë§ˆì¹˜ë©°</a></li></ul></nav></div></div><div class=content id=content><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block;height:150px data-ad-client=ca-pub-5788330009690816 data-ad-slot=9180895229 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script><p>ê¸‰ë³€í•˜ëŠ” ë‚ ì”¨ë¥¼ ì˜ˆì¸¡í•˜ë ¤ë©´ ì–´ë– í•œ ì •ë³´ê°€ ìˆì–´ì•¼ í• ê¹Œ?
ë˜ëŠ” ë§ˆíŠ¸ë¥¼ ìš´ì˜í•˜ëŠ” ë‹´ë‹¹ìì¸ ê²½ìš° ë§¤ì¥ ìš´ì˜ì‹œê°„ì„ ì •í•´ì•¼ í•œë‹¤ë©´ ì–´ë– í•œ ê¸°ì¤€ìœ¼ë¡œ?
ëœ¨ê±°ìš´ ê°ìì¸ ë¹„íŠ¸ì½”ì¸ ì‹œì¥ì—ì„œ ìˆ˜ìµì„ ì–»ìœ¼ë ¤ë©´ ì–´ë–¤ ì •ë³´ë“¤ì´ ìˆì–´ì•¼ ë¬¼ë¦¬ì§€(?) ì•Šì„ìˆ˜ ìˆì„ê¹Œ?</p><p>ìœ„ ì§ˆë¬¸ì— ê³µí†µëœ ì •ë‹µì€ <code>ì˜ˆì „ ê¸°ë¡ë“¤</code>ì¸ê²ƒ ê°™ë‹¤. ë‚ ì”¨ì˜ˆì¸¡ì€ ê¸°ìƒì²­ì—ì„œ ê³¼ê±° ê¸°ë¡ë“¤ì„ ë³´ê³  ë¹„ê°€ ì˜¬ì§€ ë§ì§€ë¥¼ ê²°ì •í•˜ê³  ( ê³¼ê±° ë‚ ì”¨ ì„œë¹„ìŠ¤ë¥¼ ë‹´ë‹¹í•´ë´¤ì§€ë§Œ ë‹¨ìˆœíˆ ê³¼ê±° ê¸°ë¡ë“¤ë¡œ ì˜ˆì¸¡í•œë‹¤ëŠ”ê±´ ë¶ˆê°€ëŠ¥ì— ê°€ê¹ê¸´ í•˜ë‹¤. ) ë§¤ì¥ ìš´ì˜ì‹œê°„ì€ ì˜ˆì „ì— ì†ë‹˜ë“¤ì´ ì–¸ì œì™”ëŠ”ì§€ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ë³´ê³ . ë¹„íŠ¸ì½”ì¸ì´ë‚˜ ì£¼ì‹ì€ ì°¨íŠ¸ë¥¼ ë³´ê³  ì–´ëŠì •ë„ëŠ” ìƒìŠ¹ì¥ì¼ì§€ í•˜ë½ì¥ì¼ì§€ ì¶”ì¸¡ì´ ê°€ëŠ¥í•˜ë‹¤ê³  í•œë‹¤. ( ë¬¼ë¡  í˜¸ì¬/ì•…ì¬ì— ë”°ë¼ í”ë“¤ë¦¬ì§€ë§Œ..ã… ã… ..?? )
ì´ì²˜ëŸ¼ ì‹œê°„ì˜ íë¦„ì— ë”°ë¼ ë§Œë“¤ì–´ì§„ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ëŠ”ê²ƒì„ <code>ì‹œê³„ì—´ ë°ì´í„° ë¶„ì„</code>ì´ë¼ ë¶€ë¥´ê³  ìˆë‹¤. í•„ìê°€ ìš´ì˜í•˜ëŠ” ì„œë¹„ìŠ¤ì—ì„œ ì‹œê³„ì—´ ë°ì´í„° ë¶„ì„ì„ í†µí•´ ì¥ì• ë¥¼ ì‚¬ì „ì— ë°©ì§€í•˜ëŠ” ì‚¬ë¡€ë¥¼ ê³µìœ  í•´ë³´ê³ ì í•œë‹¤.</p><h2 id=ìƒí™©íŒŒì•…ë¶€í„°>ìƒí™©íŒŒì•…ë¶€í„°</h2><p>ì†ìë³‘ë²•ì—ëŠ” ì§€í”¼ì§€ê¸° ë°±ì „ë¶ˆíƒœ ë¼ëŠ” ë§ì´ ìˆë‹¤. ê·¸ë§Œí¼ í˜„ ìƒí™©ì„ ì˜ ì•Œì•„ì•¼ ëŒ€ì‘ì„ ì˜í• ìˆ˜ ìˆë‹¤ëŠ”ê²ƒ. í•„ìê°€ ìš´ì˜í•˜ëŠ” ì„œë¹„ìŠ¤ëŠ” PG(Payment Gateway) ì„œë¹„ìŠ¤ë¡œ ì‡¼í•‘ëª°ê°™ì€ ì˜¨/ì˜¤í”„ë¼ì¸ ì‚¬ì—…ìì™€ ì‹¤ì œ ì¹´ë“œì‚¬ì™€ì˜ ì¤‘ê°„ ì—­í™œì„ í•´ì£¼ê³  ìˆë‹¤. ì´ë¥¼í…Œë©´ ì‚¬ìš©ìê°€ <code>ìƒìˆ˜ë¥¼ 10,000ì›ì— XXì¹´ë“œë¡œ êµ¬ë§¤í•´ì¤˜</code> ë¼ê³  ìš”ì²­ì´ ì˜¤ë©´ ê·¸ ì •ë³´ë¥¼ ë‹¤ì‹œ í˜•ì‹ì— ë§ì¶° ì¹´ë“œì‚¬ë¡œ ì „ë‹¬í•˜ì—¬ ì‚¬ìš©ìê°€ ë¬¼ê±´ì„ êµ¬ë§¤í• ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤.</p><figure><a class=lightgallery href=/images/anomaly-detection/pg.png title=/images/anomaly-detection/pg.png data-thumbnail=/images/anomaly-detection/pg.png data-sub-html="<h2>PGì„œë¹„ìŠ¤ : ì‡¼í•‘ëª°ê³¼ ì¹´ë“œì‚¬ì˜ ì¤‘ê°„ì—ì„œ ë¦´ë ˆì´ í•´ì£¼ëŠ” ì—­í™œì´ë¼ ë³´ë©´ëœë‹¤.</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/images/anomaly-detection/pg.png data-srcset="/images/anomaly-detection/pg.png, /images/anomaly-detection/pg.png 1.5x, /images/anomaly-detection/pg.png 2x" data-sizes=auto alt=/images/anomaly-detection/pg.png></a><figcaption class=image-caption>PGì„œë¹„ìŠ¤ : ì‡¼í•‘ëª°ê³¼ ì¹´ë“œì‚¬ì˜ ì¤‘ê°„ì—ì„œ ë¦´ë ˆì´ í•´ì£¼ëŠ” ì—­í™œì´ë¼ ë³´ë©´ëœë‹¤.</figcaption></figure><h2 id=ìš”êµ¬ì‚¬í•­-ë°-ê³¼ê±°-ë°ì´í„°-ë¶„ì„>ìš”êµ¬ì‚¬í•­ ë° ê³¼ê±° ë°ì´í„° ë¶„ì„</h2><p>ì„œë¹„ìŠ¤ë¥¼ ìš´ì˜í•´ë³´ë‹ˆ ê°ì§€í•˜ê¸° ì–´ë ¤ìš´ ìƒí™©ë“¤ì´ ìˆì—ˆë‹¤.</p><ul><li>ì—°ë™í•˜ëŠ” ì‡¼í•‘ëª°ì—ì„œ ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜ ë„¤íŠ¸ì›Œí¬ ë¬¸ì œê°€ ë°œìƒí• ê²½ìš° ì¦‰, íŠ¸ë˜í”½ì´ í‰ì†Œë³´ë‹¤ ì ê²Œ ë“¤ì–´ì˜¬ ê²½ìš°</li><li>ì •ìƒì ì¸ ì—ëŸ¬(e.g. ì”ì•¡ë¶€ì¡±) ê°€ ê°‘ìê¸° ë§ì´ ë°œìƒí•  ê²½ìš°</li></ul><p>ì´ë¥¼ ë¶„ì„í•˜ê¸°ìœ„í•´ ê¸°ì¡´ì˜ íŠ¸ë˜í”½/ë°ì´í„°ë¥¼ ë¶„ì„í•´ë´ì•¼ í–ˆë‹¤.</p><figure><a class=lightgallery href=/images/anomaly-detection/trade_count.png title=/images/anomaly-detection/trade_count.png data-thumbnail=/images/anomaly-detection/trade_count.png data-sub-html="<h2>ê²°ì œê±´ìˆ˜ Kibana Visualize, ê¸°ì˜ì´ íŒ¨í„´</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/images/anomaly-detection/trade_count.png data-srcset="/images/anomaly-detection/trade_count.png, /images/anomaly-detection/trade_count.png 1.5x, /images/anomaly-detection/trade_count.png 2x" data-sizes=auto alt=/images/anomaly-detection/trade_count.png></a><figcaption class=image-caption>ê²°ì œê±´ìˆ˜ Kibana Visualize, ê¸°ì˜ì´ íŒ¨í„´</figcaption></figure><p>ìœ„ ê·¸ë˜í”„ëŠ” ê²°ì œë°ì´í„° ì¹´ìš´íŠ¸ ì¸ë° ì–´ëŠì •ë„ íŒ¨í„´ì„ ì°¾ì„ìˆ˜ ìˆë‹¤.</p><figure><a class=lightgallery href=/images/anomaly-detection/error_count.png title=/images/anomaly-detection/error_count.png data-thumbnail=/images/anomaly-detection/error_count.png data-sub-html="<h2>ì—ëŸ¬ê±´ìˆ˜ Kibana Visualize, ì•…ì–´ íŒ¨í„´..(ë¬´ë¦¬ìˆ˜..)</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/images/anomaly-detection/error_count.png data-srcset="/images/anomaly-detection/error_count.png, /images/anomaly-detection/error_count.png 1.5x, /images/anomaly-detection/error_count.png 2x" data-sizes=auto alt=/images/anomaly-detection/error_count.png></a><figcaption class=image-caption>ì—ëŸ¬ê±´ìˆ˜ Kibana Visualize, ì•…ì–´ íŒ¨í„´..(ë¬´ë¦¬ìˆ˜..)</figcaption></figure><p>ìœ„ ê·¸ë˜í”„ëŠ” ì—ëŸ¬ì¹´ìš´íŠ¸ ì¸ë° ì¼ì •í•œ íŒ¨í„´ ì†ì—ì„œ ì–´ëŠ ì§€ì ì—ì„œëŠ” íŠ€ëŠ”ê²ƒì„ í™•ì¸í• ìˆ˜ ìˆë‹¤. (ë¹¨ê°„ìƒ‰ ì˜ì—­) ê·¸ë ‡ë‹¤ë©´ ì–´ë–¤ ë°©ë²•ìœ¼ë¡œ ì¥ì• ìƒí™©ë³´ë‹¤ ì•ì„œì„œ ê°ì§€ë¥¼ í• ìˆ˜ ìˆì„ê¹Œ? ( ì¥ì•  : ì–´ë– í•œ ë‚´/ì™¸ë¶€ ìš”ì¸ìœ¼ë¡œ ì¸í•´ ì •ìƒì ì¸ ì„œë¹„ìŠ¤ê°€ ë˜ì§€ ì•ŠëŠ” ìƒíƒœ )</p><h2 id=ì¥ì• ë°œìƒ-ì „ì—-ë¨¼ì €-ì°¾ì•„ë³´ì>ì¥ì• ë°œìƒ ì „ì— ë¨¼ì € ì°¾ì•„ë³´ì!</h2><p>ê°€ì¥ ê°„ë‹¨í•˜ê²ŒëŠ” ê¸°ì¡´ ë°ì´í„°ë¥¼ ë³´ê³  ìˆ˜ë™ìœ¼ë¡œ ì„¤ì •í•˜ëŠ” ë°©ë²•ì´ ìˆì„ìˆ˜ ìˆë‹¤. ì˜ˆë¡œë“¤ì–´ ìì • ì¦ˆìŒì—ëŠ” ê²°ì œëŸ‰ì´ ê°€ì¥ ë§ê¸°ë•Œë¬¸ì— ì•½ xxê±´ìœ¼ë¡œ ì„¤ì •í•´ë‘ê³ , ìƒˆë²½ì—ëŠ” ê²°ì œëŸ‰ì´ ê°€ì¥ ì ê¸° ë•Œë¬¸ì— ì•½ yyê±´ìœ¼ë¡œ ì„¤ì •í•´ë‘” í›„ ì—ëŸ¬ ê±´ìˆ˜ë‚˜ ê²°ì œê±´ìˆ˜ì— ëŒ€í•´ ì‹¤ì‹œê°„ìœ¼ë¡œ ê²€ì‚¬ë¥¼ í•´ê°€ë©´ì„œ ì„¤ì •í•œ ê°’ë³´ë‹¤ ë²—ì–´ë‚  ê²½ìš° ì•Œë¦¼ì„ ì£¼ëŠ” ë°©ë²•ì´ë‹¤.
í•˜ì§€ë§Œ ì•„ë¬´ë¦¬ ê³¼ê±° ë°ì´í„°ë¥¼ ì™„ë²½í•˜ê²Œ ë¶„ì„í–ˆë‹¤ í• ì§€ë¼ë„ 24ì‹œê°„ ëª¨ë“  ì‹œì ì—ì„œ ì˜ˆì¸¡ì€ ë²—ì–´ë‚  ìˆ˜ë°–ì— ì—†ë‹¤. (ì˜ˆë¡œë“¤ì–´ ì‡¼í•‘ ì´ë²¤íŠ¸ë¥¼ ê°‘ì‘ìŠ¤ëŸ½ê²Œ í•˜ê²Œë˜ë©´ ê²°ì œëŸ‰ì€ ì˜ˆì¸¡í•˜ì§€ ëª»í• ì •ë„ë¡œ ëŠ˜ì–´ë‚ í…Œê³ &mldr;) ë˜í•œ ì„¤ì •í•œ ì˜ˆì¸¡ê°’ì„ ë²—ì–´ë‚  ê²½ìš° ìˆ˜ë™ìœ¼ë¡œ ë‹¤ì‹œ ì˜ˆì¸¡ê°’ì„ ì¡°ì •í•´ì¤˜ì•¼ í•˜ëŠ”ë°, ì´ëŸ´êº¼ë©´ 24ì‹œê°„ ì¢…í•© ìƒí™©ì‹¤ì—ì„œ ì‚¬ëŒì´ ì§ì ‘ ëˆˆìœ¼ë¡œ ë³´ëŠ”ê²ƒ ë³´ë‹¤ ëª»í• ê²ƒ ê°™ë‹¤. (ì¸ë ¥ ë¦¬ì†ŒìŠ¤ê°€ ì¶©ë¶„í•˜ë‹¤ë©´ ë­&mldr; ê·¸ë ‡ê²Œ í•´ë„ ëœë‹¤.)</p><h2 id=ì§€ë‚œ-ë°ì´í„°ì™€-ë¹„êµí•˜ê¸°>ì§€ë‚œ ë°ì´í„°ì™€ ë¹„êµí•˜ê¸°</h2><p>ì¼ì£¼ì¼ ê¸°ì¤€ìœ¼ë¡œ ì§€ë‚œ ì¼ì£¼ì¼ê³¼ì˜ ë°ì´í„°ë¥¼ ë¹„êµí•´ë³´ëŠ” ë°©ë²•ë˜í•œ ìˆë‹¤. ê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•˜ë©´ ì´ë²ˆì£¼ ì›”ìš”ì¼ 10ì‹œì˜ ë°ì´í„°ì™€ ì§€ë‚œì£¼ ì›”ìš”ì¼ 10ì‹œì˜ ë°ì´í„°ì˜ ì°¨ì´ë¥¼ ë¹„êµí•´ë³´ëŠ” ë°©ë²•ì´ë‹¤. í‚¤ë°”ë‚˜ì—ì„œ í´ë¦­ ëª‡ë²ˆë§Œìœ¼ë¡œ ì‹œê°í™”ë¥¼ ë„ì™€ì£¼ëŠ” Visualize ê¸°ëŠ¥ì„ í†µí•´ ì§€ë‚œ ì¼ì£¼ì¼ê³¼ ì´ë²ˆì£¼ë¥¼ ë¹„êµí•´ë³´ë©´ ì•„ë˜ ê·¸ë˜í”„ì²˜ëŸ¼ í‘œí˜„ì´ ê°€ëŠ¥í•˜ë‹¤.</p><figure><a class=lightgallery href=/images/anomaly-detection/visualize.png title=/images/anomaly-detection/visualize.png data-thumbnail=/images/anomaly-detection/visualize.png data-sub-html="<h2>ì¼ì£¼ì¼ ì „ ë°ì´í„°ì™€ ë‹¨ìˆœ ë¹„êµ</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/images/anomaly-detection/visualize.png data-srcset="/images/anomaly-detection/visualize.png, /images/anomaly-detection/visualize.png 1.5x, /images/anomaly-detection/visualize.png 2x" data-sizes=auto alt=/images/anomaly-detection/visualize.png></a><figcaption class=image-caption>ì¼ì£¼ì¼ ì „ ë°ì´í„°ì™€ ë‹¨ìˆœ ë¹„êµ</figcaption></figure><p>ì´ ê²½ìš°ë„ ì§€ë‚œì£¼ ìƒí™©ê³¼ ì´ë²ˆì£¼ ìƒí™©ì´ ë‹¤ë¥¸ ê²½ìš°ì—ëŠ” ì›í•˜ëŠ” ë¹„êµ í•­ëª© ì™¸ì— ë‹¤ë¥¸ ìš”ì¸ì´ ì¶”ê°€ë˜ê¸° ë•Œë¬¸ì— ì›í•˜ëŠ” ë¹„êµë¥¼ í• ìˆ˜ê°€ ì—†ê³  ìœ„ì—ì„œ ìˆ˜ë™ìœ¼ë¡œ ì„¤ì •í•˜ëŠ” ë°©ë²•ê³¼ ë³„ë°˜ ë‹¤ë¥¼ë°” ì—†ì„ê²ƒìœ¼ë¡œ ìƒê°ëœë‹¤.</p><h2 id=ì¡°ê¸ˆë”-ìš°ì•„í•˜ê²Œ-ì–¸ì œë¶€í„´ê°€-ìš°ì•„í•˜ë‹¨-ë§ì„-ì¢‹ì•„í•˜ëŠ”ê²ƒ-ê°™ë‹¤>ì¡°ê¸ˆë” ìš°ì•„í•˜ê²Œ! <code>(ì–¸ì œë¶€í„´ê°€ ìš°ì•„í•˜ë‹¨ ë§ì„ ì¢‹ì•„í•˜ëŠ”ê²ƒ ê°™ë‹¤..)</code></h2><p>ê°œë°œìëŠ” ë¬¸ì œì— ëŒ€í•´ì„œ ì–¸ì œë‚˜ ë¶„ì„ì„ í† ëŒ€ë¡œ ì ‘ê·¼ì„ í•˜ëŠ”ê²ƒì„ ëª©í‘œë¡œ í•´ì•¼í•œë‹¤. ì–¸ì œë¶€í„´ê°€ Hotí•œ ë¨¸ì‹ ëŸ¬ë‹ì„ ë„ì…í•´ ë³´ê³  ì‹¶ì—ˆìœ¼ë‚˜ ì•„ì§ ê·¸ëŸ° ì‹¤ë ¥ì´ ë˜ì§ˆ ëª»í•˜ê³ &mldr; í­í’ êµ¬ê¸€ë§ì„ í†µí•´ ì•Œê²Œëœ Facebookì—ì„œ ë§Œë“  <a href=https://facebook.github.io/prophet/ target=_blank rel="noopener noreffer">Prophet</a>ì´ë¼ëŠ” ëª¨ë“ˆì„ í™œìš©í•´ë³´ê³ ì í•œë‹¤.
<a href=https://opensource.fb.com/#artificial>https://opensource.fb.com/#artificial</a> ì´ê³³ì— ê°€ë³´ë©´ ì—¬ëŸ¬ Artificial Intelligence ê´€ë ¨ëœ ì˜¤í”ˆì†ŒìŠ¤ë“¤ì¤‘ì— Prophet ëª¨ë“ˆì„ ì°¾ì„ìˆ˜ ìˆë‹¤. ë‹¤í–‰íˆë„ <a href=https://namu.wiki/w/BSD%20%EB%9D%BC%EC%9D%B4%EC%84%A0%EC%8A%A4 target=_blank rel="noopener noreffer">BSD License</a>ë¼ì„œ ì‹¤ë¬´ì—ì„œë„ ë‹¤ì–‘í•˜ê²Œ í™œìš©í• ìˆ˜ ìˆì„ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤. ì¹œì ˆí•˜ê²Œë„ <code>Quick Start</code>ì„ í†µí•´ ì–´ë–¤ì‹ìœ¼ë¡œ ì˜ˆì¸¡ì„ í•˜ëŠ”ì§€ ë³´ì—¬ì¤€ë‹¤. ì°¸ê³ ë¡œ Python ê³¼ R ì„ ì§€ì›í•œë‹¤. (python ì˜ ëŒ€ë‹¨í•¨ì„ ë‹¤ì‹œê¸ˆ ëŠë¼ë©°&mldr;)
êµ¬ì„±ì€ CentOS 7 + python3.6 + jenkins ë¥¼ í™œìš©í•œë‹¤. (python ê²½í—˜ì´ ë¶€ì¡±í•˜ë¯€ë¡œ ì½”ë“œê°€ í—ˆì ‘í• ìˆ˜ë„ ìˆìœ¼ë‹ˆ ì–‘í•´ë°”ë€ë‹¤.)
ë°ì´í„° ë¶„ì„ì‹œ ê°€ì¥ ë§ì´ ì‚¬ìš©ëœë‹¤ëŠ” <code>Pandas</code>ì™€ ëŒ€ê·œëª¨ ë‹¤ì°¨ì› ë°°ì—´ì„ ì‰½ê²Œ ì²˜ë¦¬ í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” <code>numpy</code>, ê·¸ë¦¬ê³  <code>bprophet</code>ë¥¼ ë¹„ë¡¯í•œ í•„ìš”í•œ ëª¨ë“ˆë“¤ì„ pipë¡œ ì„¤ì¹˜í•´ì¤€ë‹¤.</p><div class=highlight><pre class=chroma><code class=language-shell data-lang=shell>pip install pandas
pip install fbprophet
pip install numpy
</code></pre></div><p>í•„ìš”í•œ ëª¨ë“ˆë“¤ì„ importë¥¼ í•œë‹¤.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>import</span> <span class=nn>matplotlib</span>
<span class=n>matplotlib</span><span class=o>.</span><span class=n>use</span><span class=p>(</span><span class=s1>&#39;Agg&#39;</span><span class=p>)</span> <span class=o>//</span> <span class=n>centos</span> <span class=err>ì„œë²„</span> <span class=err>í™˜ê²½ì—ì„œ</span> <span class=err>ëŒë¦´ê²½ìš°</span> <span class=err>ì˜ˆì¸¡ê²°ê³¼ë¥¼</span> <span class=err>ê·¸ë˜í”„ë¡œ</span> <span class=err>ë³´ëŠ”</span> <span class=err>ê³¼ì •ì—ì„œ</span> <span class=err>ì˜¤ë¥˜ê°€</span> <span class=err>ë°œìƒí•œë‹¤</span><span class=o>.</span> <span class=err>ì´ë¥¼</span> <span class=err>ë°©ì§í•˜ê¸°</span> <span class=err>ìœ„í•´</span> <span class=err>í•´ë‹¹</span> <span class=err>ì½”ë“œë¥¼</span> <span class=err>ì ì–´ì¤€ë‹¤</span><span class=o>.</span>

<span class=kn>import</span> <span class=nn>pandas</span> <span class=kn>as</span> <span class=nn>pd</span>
<span class=kn>import</span> <span class=nn>requests</span><span class=o>,</span> <span class=nn>datetime</span>
<span class=kn>from</span> <span class=nn>fbprophet</span> <span class=kn>import</span> <span class=n>Prophet</span>
</code></pre></div><p>ê¸°ì¡´ì— ë°ì´í„°ë“¤ì€ ëª¨ë‘ ì‹¤ì‹œê°„ìœ¼ë¡œ elasticserachì— ì¸ë±ì‹± ì¤‘ì´ê¸° ë•Œë¬¸ì— rest api ë¥¼ í™œìš©í•˜ë©´ ì‰½ê²Œ ë°ì´í„°ë¥¼ ì–»ì„ìˆ˜ê°€ ìˆë‹¤. (RDBë¡œ ê´€ë¦¬ë¥¼ í–ˆë”ë¼ë©´&mldr; ë°°ë³´ë‹¤ ë°°ê¼½ì´ ë” í° ìƒí™©ì´ì˜€ì§€ ì•Šì•˜ì„ê¹Œ í•˜ëŠ” ìƒê°ì´ ë“ ë‹¤.)</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=c1># í˜„ì¬ ì‹œ ê¸°ì¤€ 2ì£¼ (24 x 14 ì‹œê°„) ì „ì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤.</span>
<span class=n>day_gap</span> <span class=o>=</span> <span class=mi>14</span>

<span class=n>now_datetime</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span>
<span class=n>end_time</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>datetime</span><span class=p>(</span><span class=n>now_datetime</span><span class=o>.</span><span class=n>year</span><span class=p>,</span> <span class=n>now_datetime</span><span class=o>.</span><span class=n>month</span><span class=p>,</span> <span class=n>now_datetime</span><span class=o>.</span><span class=n>day</span><span class=p>,</span> <span class=n>now_datetime</span><span class=o>.</span><span class=n>hour</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>)</span>
<span class=n>end_time_stamp</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>end_time</span><span class=o>.</span><span class=n>timestamp</span><span class=p>()</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>))</span>
<span class=n>start_time</span> <span class=o>=</span> <span class=n>end_time</span> <span class=o>-</span> <span class=n>datetime</span><span class=o>.</span><span class=n>timedelta</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=n>day_gap</span><span class=p>)</span>
<span class=n>start_time_stamp</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>start_time</span><span class=o>.</span><span class=n>timestamp</span><span class=p>()</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>))</span>

<span class=n>url</span> <span class=o>=</span> <span class=s1>&#39;http://elasticsearch:9200/_msearch&#39;</span>
<span class=n>headers</span> <span class=o>=</span> <span class=p>{</span>
    <span class=s2>&#34;Content-Type&#34;</span> <span class=p>:</span> <span class=s2>&#34;application/x-ndjson&#34;</span>
<span class=p>}</span>
<span class=n>es_data</span> <span class=o>=</span> <span class=s1>&#39;{&#34;index&#34;:[&#34;index_name&#34;]}</span><span class=se>\n</span><span class=s1>{&#34;size&#34;:0,&#34;query&#34;:{&#34;bool&#34;:{&#34;must&#34;:[{&#34;range&#34;:{&#34;log_time&#34;:{&#34;gte&#34;:&#39;</span> <span class=o>+</span> <span class=n>start_time_stamp</span> <span class=o>+</span> <span class=s1>&#39;,&#34;lte&#34;:&#39;</span> <span class=o>+</span> <span class=n>end_time_stamp</span> <span class=o>+</span> <span class=s1>&#39;}}}]}},&#34;aggs&#34;:{&#34;2&#34;:{&#34;date_histogram&#34;:{&#34;field&#34;:&#34;log_time&#34;,&#34;interval&#34;:&#34;1h&#34;, &#34;time_zone&#34;:&#34;Asia/Tokyo&#34;}}}}</span><span class=se>\n</span><span class=s1>&#39;</span>
<span class=n>response_list</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>post</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=n>url</span><span class=p>,</span> <span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=n>es_data</span><span class=o>.</span><span class=n>encode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>))</span><span class=o>.</span><span class=n>json</span><span class=p>()[</span><span class=s1>&#39;responses&#39;</span><span class=p>][</span><span class=mi>0</span><span class=p>][</span><span class=s1>&#39;aggregations&#39;</span><span class=p>][</span><span class=s1>&#39;2&#39;</span><span class=p>][</span><span class=s1>&#39;buckets&#39;</span><span class=p>]</span>
<span class=k>print</span><span class=p>(</span><span class=s1>&#39;ê¸°ì¤€ : &#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>start_time</span><span class=p>)</span> <span class=o>+</span> <span class=s1>&#39; ~ &#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>end_time</span><span class=p>))</span>

<span class=c1># es ë°ì´í„° ì¤‘ ì‹œê°„ê°’ì„ í˜•ì‹ì— ë°”ê¾¸ë©´ì„œ key-value í˜•íƒœë¡œ ì •ì œí•œë‹¤.</span>
<span class=n>query_result</span> <span class=o>=</span> <span class=p>{}</span>
<span class=k>for</span> <span class=n>data</span> <span class=ow>in</span> <span class=n>response_list</span> <span class=p>:</span>
    <span class=n>query_result</span><span class=p>[</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;key_as_string&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s1>&#39;T&#39;</span><span class=p>,</span><span class=s1>&#39; &#39;</span><span class=p>)</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s1>&#39;.000+09:00&#39;</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>)]</span> <span class=o>=</span> <span class=n>data</span><span class=p>[</span><span class=s1>&#39;doc_count&#39;</span><span class=p>]</span>
</code></pre></div><p>elasticsearchì—ì„œ aggregationì„ í™œìš©í•˜ì—¬ ë°ì´í„°ë¥¼ 1ì‹œê°„ ë‹¨ìœ„ë¡œ ê°€ì ¸ì˜¬ê²½ìš° ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ ë¹„ì–´ìˆëŠ” ì‹œê°„ì— í•´ë‹¹í•˜ëŠ” ì¹´ìš´íŠ¸ë¥¼ 0ìœ¼ë¡œ ë§ì¶°ì£¼ê¸° ìœ„í•˜ì—¬ loopë¥¼ ëŒë©° ë°ì´í„°ë¥¼ ì •ì œí•´ì¤€ë‹¤. (ì´ ë°©ë²•ë³´ë‹¤ ë” ì¢‹ì€ ë°©ë²•ì´ ë¶„ëª… ìˆì„ê²ƒì´ë‹¤&mldr;)</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=n>anomaly_detection_base_data</span> <span class=o>=</span> <span class=p>{}</span>

<span class=k>for</span> <span class=n>data</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>24</span> <span class=o>*</span> <span class=n>day_gap</span><span class=p>)</span> <span class=p>:</span>
    <span class=n>key_date_time</span> <span class=o>=</span> <span class=n>start_time</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s1>&#39;%Y-%m-</span><span class=si>%d</span><span class=s1> %H:00:00&#39;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>key_date_time</span> <span class=ow>in</span> <span class=n>query_result</span> <span class=p>:</span>
        <span class=n>anomaly_detection_base_data</span><span class=p>[</span><span class=n>key_date_time</span><span class=p>]</span> <span class=o>=</span> <span class=n>query_result</span><span class=p>[</span><span class=n>key_date_time</span><span class=p>]</span>
    <span class=k>else</span> <span class=p>:</span>
        <span class=n>anomaly_detection_base_data</span><span class=p>[</span><span class=n>key_date_time</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span>
    <span class=n>start_time</span> <span class=o>=</span> <span class=n>start_time</span> <span class=o>+</span> <span class=n>datetime</span><span class=o>.</span><span class=n>timedelta</span><span class=p>(</span><span class=n>hours</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
</code></pre></div><p>pandas ë¥¼ í™œìš©í•˜ì—¬ ë°ì´í„°ë¥¼ DataFrame í˜•ì‹ì— ë§ì¶°ì¤€ ë‹¤ìŒ <code>ì‹œê°„</code>ê¸°ì¤€ìœ¼ë¡œ ë‹¤ìŒ 24ì‹œê°„ì˜ ë°ì´í„°ë¥¼ ì˜ˆì¸¡í•˜ë„ë¡ í•œë‹¤.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=nb>list</span><span class=p>(</span><span class=n>anomaly_detection_base_data</span><span class=o>.</span><span class=n>items</span><span class=p>()),</span> <span class=n>columns</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;ds&#39;</span><span class=p>,</span> <span class=s1>&#39;y&#39;</span><span class=p>])</span>
<span class=n>m</span> <span class=o>=</span> <span class=n>Prophet</span><span class=p>()</span>
<span class=n>m</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>df</span><span class=p>)</span>
<span class=n>future</span> <span class=o>=</span> <span class=n>m</span><span class=o>.</span><span class=n>make_future_dataframe</span><span class=p>(</span><span class=n>periods</span><span class=o>=</span><span class=mi>24</span> <span class=p>,</span> <span class=n>freq</span><span class=o>=</span><span class=s1>&#39;H&#39;</span><span class=p>)</span>
<span class=n>forecast</span> <span class=o>=</span> <span class=n>m</span><span class=o>.</span><span class=n>predict</span><span class=p>(</span><span class=n>future</span><span class=p>)</span>
</code></pre></div><p>ì‹¤ì œ ì§‘ê³„í•œ ê°’ê³¼ ì˜ˆì¸¡ê°’ì„ ë¹„êµí•˜ì—¬ ì•Œë¦¼ë°œìƒ ìœ ë¬´ë¥¼ ê²°ì •í•œë‹¤.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=c1># í˜„ì¬ì‹œê°„ -1ì‹œê°„ ì „ ì‹¤ì œ ì§‘ê³„</span>
<span class=n>check_datetime</span> <span class=o>=</span> <span class=n>now_datetime</span> <span class=o>-</span> <span class=n>datetime</span><span class=o>.</span><span class=n>timedelta</span><span class=p>(</span><span class=n>hours</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
<span class=n>check_datetime</span> <span class=o>=</span> <span class=n>check_datetime</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s1>&#39;%Y-%m-</span><span class=si>%d</span><span class=s1> %H:00:00&#39;</span><span class=p>)</span>
<span class=n>check_datetime_count</span> <span class=o>=</span> <span class=n>query_result</span><span class=p>[</span><span class=n>check_datetime</span><span class=p>]</span>
<span class=k>print</span><span class=p>(</span><span class=s1>&#39;ì‹¤ì œ ì§‘ê³„ìˆ˜ : &#39;</span> <span class=o>+</span> <span class=n>check_datetime</span> <span class=o>+</span> <span class=s1>&#39; â†’ &#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>check_datetime_count</span><span class=p>))</span>

<span class=c1># ì˜ˆì¸¡ ìµœëŒ€ì¹˜</span>
<span class=n>forecast_max_count</span> <span class=o>=</span> <span class=n>forecast</span><span class=p>[</span><span class=n>forecast</span><span class=o>.</span><span class=n>ds</span> <span class=o>==</span> <span class=n>check_datetime</span><span class=p>][</span><span class=s1>&#39;yhat_upper&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>values</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
<span class=k>print</span><span class=p>(</span><span class=s1>&#39;ì˜ˆì¸¡ ìµœëŒ€ì¹˜ : &#39;</span> <span class=o>+</span> <span class=n>check_datetime</span>  <span class=o>+</span> <span class=s1>&#39; â†’ &#39;</span> <span class=o>+</span>  <span class=nb>str</span><span class=p>(</span><span class=n>forecast_max_count</span><span class=p>))</span> 
</code></pre></div><p>ì—¬ê¸°ì„œëŠ” ì—ëŸ¬ ì¹´ìš´íŠ¸ê°€ í‰ì†Œì™€ëŠ” ë‹¤ë¥´ê²Œ ë°œìƒí•  ê²½ìš°ì— ì•Œë¦¼ì„ ë°œì†¡ì„ í•˜ë ¤ í•˜ê¸°ë•Œë¬¸ì— ì•„ë˜ì²˜ëŸ¼ êµ¬ì„±ì„ í•´ì¤€ë‹¤.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>if</span> <span class=n>check_datetime_count</span> <span class=o>&gt;</span> <span class=n>forecast_max_count</span> <span class=p>:</span>
  <span class=c1># ì˜ˆì¸¡í•œ ê²°ê³¼ë¥¼ ì´ë¯¸ì§€ë¡œ ì €ì¥í›„ ì•Œë¦¼ì— í¬í•¨ì‹œì¼œì¤€ë‹¤.</span>
  <span class=n>forecast_graph</span> <span class=o>=</span> <span class=n>m</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>forecast</span><span class=p>,</span> <span class=n>plot_cap</span><span class=o>=</span><span class=bp>False</span><span class=p>,</span> <span class=n>xlabel</span><span class=o>=</span><span class=s1>&#39;time&#39;</span><span class=p>,</span> <span class=n>ylabel</span><span class=o>=</span><span class=s1>&#39;count&#39;</span><span class=p>);</span>
  <span class=n>file_name</span> <span class=o>=</span> <span class=s1>&#39;forecast_graph.png&#39;</span>
  <span class=n>forecast_graph</span><span class=o>.</span><span class=n>savefig</span><span class=p>(</span><span class=n>file_name</span><span class=p>)</span>
</code></pre></div><p>ì´ëŸ° python scriptë¥¼ jenkins ë¥¼ í™œìš©í•˜ì—¬ 1ì‹œê°„ì— í•œë²ˆì”© ì‹¤í–‰ë ìˆ˜ìˆë„ë¡ êµ¬ì„±í•´ ë‘ê³  ë¬¸ì œê°€ ë°œìƒí• ë•ŒëŠ” ì•„ë˜ì²˜ëŸ¼ ë©”ì¼ë¡œ ì•Œë¦¼ì„ ë°›ëŠ”ë‹¤.</p><figure><a class=lightgallery href=/images/anomaly-detection/forecast_graph.png title=/images/anomaly-detection/forecast_graph.png data-thumbnail=/images/anomaly-detection/forecast_graph.png data-sub-html="<h2>ì˜ˆì¸¡ê²°ê³¼</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/images/anomaly-detection/forecast_graph.png data-srcset="/images/anomaly-detection/forecast_graph.png, /images/anomaly-detection/forecast_graph.png 1.5x, /images/anomaly-detection/forecast_graph.png 2x" data-sizes=auto alt=/images/anomaly-detection/forecast_graph.png></a><figcaption class=image-caption>ì˜ˆì¸¡ê²°ê³¼</figcaption></figure><p>ìœ„ ê·¸ë˜í”„ë¥¼ ë¶„ì„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><ul><li>ê²€ì •ìƒ‰ ì  : ì‹¤ì œ ë°ì´í„°</li><li>íŒŒë€ ì‹¤ì„  : íŠ¸ëœë“œ ê·¸ë˜í”„</li><li>í•˜ëŠ˜ìƒ‰ ìŒì˜ : ì˜ˆì¸¡í•œ ìµœëŒ€/ìµœì†Œì¹˜ì˜ ì˜ì—­
ë¹¨ê°„ìƒ‰ìœ¼ë¡œ í‘œì‹œí•œ ì  ë‘ê°œë¥¼ ë³´ë©´ ì˜ˆì¸¡ì„ ë²—ì–´ë‚œê²ƒì„ í™•ì¸í• ìˆ˜ ìˆê³  ì‹¤ì œë¡œ ì € ì‹œê°„ëŒ€ì— ë‚´ë¶€ì  ì´ìŠˆë¡œ ì¸í•´ ì—ëŸ¬ê°€ ë§ì´ ë°œìƒí•œ ê²½ìš°ì´ë‹¤. (ì¥ì•  ë°œìƒ ì‹œì )</li></ul><p>ì´ëŸ°ì‹ìœ¼ë¡œ êµ¬ì„±ì„ í•´ë‘ë©´ ì•ì„œ ìˆ˜ë™ìœ¼ë¡œ ìµœëŒ€/ìµœì†Œ ìˆ˜ì¹˜ë¥¼ ì •í•´ë‘ê³  ì´íƒˆí–ˆëŠ”ì§€ì— ëŒ€í•´ì„œ ëª¨ë‹ˆí„°ë§ í•˜ëŠ”ê²ƒë³´ë‹¤ í›¨ì”¬ë” ìš°ì•„í•˜ê²Œ ëª¨ë‹ˆí„°ë§ì„ í• ìˆ˜ìˆë‹¤.
ë¬¼ë¡  í•´ë‹¹ ëª¨ë“ˆì´ ì™„ë²½í•˜ë‹¤ëŠ” ì†Œë¦¬ëŠ” ì•„ë‹ˆë‹¤. í•„ìë„ í•´ë‹¹ ëª¨ë“ˆì„ ì‚¬ìš©í•˜ë‹¤ë³´ë‹ˆ ì–´ë–¤ ê²½ìš°ì—ì„œëŠ” ì˜ˆì¸¡ìˆ˜ì¹˜ì™€ ì‹¤ì œ ë°ì´í„°ê°€ ë¹„ìŠ·í•œ ê²½ìš°ê°€ ìˆì–´ ì•ŒëŒì„ ë°›ì€ ê²½ìš°ë„ ìˆë‹¤. ì˜ˆì „ í¬ìŠ¤íŒ…ì—ì„œë„ ì´ì•¼ê¸° í–ˆë“¯ ì •ë‹µì€ ì—†ëŠ”ê²ƒ ê°™ë‹¤. ìƒí™©ì— ë§ì¶°ì„œ ì§€ì†ì ìœ¼ë¡œ ì»¤ìŠ¤í„°ë§ˆì´ì§•ì„ í•´ì•¼í•˜ëŠ”ê²Œ ê°œë°œìì˜ ìˆ™ëª… ì•„ë‹ê¹Œ ì‹¶ë‹¤.</p><h2 id=ë§ˆì¹˜ë©°>ë§ˆì¹˜ë©°</h2><p>ì‚¬ì‹¤ ì´ë ‡ê²Œ <code>ì‹œê³„ì—´ ë°ì´í„°</code>ë¼ëŠ” ë‹¨ì–´ë‚˜ <code>Prophet</code>ê°™ì€ ì˜¤í”ˆì†ŒìŠ¤ë¥¼ ê²€ìƒ‰í• ìˆ˜ ìˆì—ˆë˜ê±´ ì‘ë…„ <a href=https://taetaetae.github.io/2017/12/14/elastic-on-tour/ target=_blank rel="noopener noreffer">Elastic{ON}Tour ì—ì„œ ë´¤ë˜ Elastic X-packì˜ ë¨¸ì‹ ëŸ¬ë‹ ê¸°ëŠ¥</a> ë•Œë¬¸ì´ë‹¤. ê·¸ë•Œ ë°›ì€ ì¶©ê²©(?)ì´ ì•„ì§ê¹Œì§€ ìˆëŠ”ê±´ì§€ ì´ë ‡ê²Œ ì˜¤í”ˆì†ŒìŠ¤ë¡œ ë¹„ìŠ·í•˜ê²Œë‚˜ë§ˆ êµ¬í˜„í• ìˆ˜ ìˆì—ˆë˜ ì›ë™ë ¥ì´ ëœê²ƒ ê°™ë‹¤. ê¸°íšŒê°€ ë˜ë©´ X-packì„ êµ¬ë§¤í•´ì„œ ìš´ì˜í•˜ëŠ” ì„œë¹„ìŠ¤ì— ë¨¸ì‹ ëŸ¬ë‹ì„ í™œìš©í•´ì„œ ì´ëŸ¬í•œ ì‹œê³„ì—´ ë°ì´í„°ì— ëŒ€í•´ ë¶„ì„í•´ë³´ê³ ì‹¶ë‹¤.</p><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block;height:150px data-ad-client=ca-pub-5788330009690816 data-ad-slot=9180895229 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><center><style>.bmc-button img{width:27px!important;margin-bottom:1px!important;box-shadow:none!important;border:none!important;vertical-align:middle!important}.bmc-button{line-height:29px!important;height:30px!important;text-decoration:none!important;display:inline-flex!important;color:#000!important;background-color:#fd0!important;border-radius:3px!important;border:1px solid transparent!important;padding:1px 9px!important;font-size:22px!important;letter-spacing:.6px!important;box-shadow:0 1px 2px rgba(190,190,190,.5)!important;-webkit-box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;margin:0 auto!important;font-family:cookie,cursive!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;-o-transition:.3s all linear!important;-webkit-transition:.3s all linear!important;-moz-transition:.3s all linear!important;-ms-transition:.3s all linear!important;transition:.3s all linear!important}.bmc-button:hover,.bmc-button:active,.bmc-button:focus{-webkit-box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;text-decoration:none!important;box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;opacity:.85!important;color:#000!important}</style><link href="https://fonts.googleapis.com/css?family=Cookie" rel=stylesheet><center><br><a class=bmc-button target=_blank href=https://www.buymeacoffee.com/taetaetae><img src=https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg alt="Buy me a coffee"><span style=margin-left:5px>Buy me a coffee</span></a>
<a href=https://bit.ly/ddbSupport target=_blank><img src=https://i.imgur.com/peaYpjh.png style=height:28px></a></center><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2018-05-31</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://taetaetae.github.io/2018/05/31/anomaly-detection/ data-title="ì‹œê³„ì—´ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ë¯¸ë˜ ì˜ˆì¸¡ í•˜ê¸°(Anomaly Detection)" data-hashtags="python,anomaly detection,elasticsearch,prophet,facebook,archives-2018"><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://taetaetae.github.io/2018/05/31/anomaly-detection/ data-hashtag=python><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://taetaetae.github.io/2018/05/31/anomaly-detection/><i class="fab fa-linkedin fa-fw"></i></a><a href=javascript:void(0); title="Share on Blogger" data-sharer=blogger data-url=https://taetaetae.github.io/2018/05/31/anomaly-detection/ data-title="ì‹œê³„ì—´ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ë¯¸ë˜ ì˜ˆì¸¡ í•˜ê¸°(Anomaly Detection)" data-description><i class="fab fa-blogger fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/python/>python</a>,&nbsp;<a href=/tags/anomaly-detection/>anomaly detection</a>,&nbsp;<a href=/tags/elasticsearch/>elasticsearch</a>,&nbsp;<a href=/tags/prophet/>prophet</a>,&nbsp;<a href=/tags/facebook/>facebook</a>,&nbsp;<a href=/tags/archives-2018/>archives-2018</a></section><section><span><a href=javascript:void(0); onclick=window.history.back();>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/2018/04/29/apache-408-response-code/ class=prev rel=prev title="ì•„íŒŒì¹˜ ì—‘ì„¸ìŠ¤ ë¡œê·¸ì— 408ì½”ë“œê°€?"><i class="fas fa-angle-left fa-fw"></i>ì•„íŒŒì¹˜ ì—‘ì„¸ìŠ¤ ë¡œê·¸ì— 408ì½”ë“œê°€?</a>
<a href=/2018/06/27/apache-vs-nginx/ class=next rel=next title="Apacheëƒ Nginxëƒ, ê·¸ê²ƒì´ ì•Œê³ ì‹¶ë‹¤.">Apacheëƒ Nginxëƒ, ê·¸ê²ƒì´ ì•Œê³ ì‹¶ë‹¤.<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments><div id=utterances></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://utteranc.es/>Utterances</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.74.3">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i>LoveIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2016 - 2020</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://taetaetae.github.io target=_blank>íƒœíƒœíƒœ</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i></a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=/lib/lightgallery/lightgallery.min.css><script type=text/javascript src=/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/lightgallery/lightgallery.min.js></script><script type=text/javascript src=/lib/lightgallery/lg-thumbnail.min.js></script><script type=text/javascript src=/lib/lightgallery/lg-zoom.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript>window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":500},"comment":{"utterances":{"darkTheme":"github-dark","issueTerm":"pathname","label":"Comment","lightTheme":"github-light","repo":"taetaetae/blog-comment"}},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true}};</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','UA-86432198-1',{'anonymize_ip':true});</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=UA-86432198-1" async></script></body></html>