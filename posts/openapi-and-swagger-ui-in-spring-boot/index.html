<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>OpenAPI 와 Swagger-ui 적용하기 - 👨‍💻꿈꾸는 태태태의 공간</title><meta name=Description content><meta property="og:title" content="OpenAPI 와 Swagger-ui 적용하기"><meta property="og:description" content="﻿API를 개발하고 사용방법에 대한 명세를 작성하는 방법은 여러 가지가 있다. 가장 심플하게 개발 코드와는 별도로 직접 수기로 작성하여 파일 혹은 문서 링크를 전달하는 방법이 있다. 하지만 개발 코드와 별도로 직접 작성을 한다는 점에서 오타/실수가 발생할 수 있고 최신화가 안되는 여러 가지 문제가 발생한다. 그에 등장한 API 문서화 자동화 툴의 양대 산맥인 SpringRestDocs 와 Swagger.
　﻿과거 SpringRestDocs 에 대한 포스팅을 했기에 이번엔 Swagger에 대한 사용방법에 대해 정리해보고자 한다. 이 둘의 장단점은 너무 뚜렷하기에 API문서를 제공하는 상황에 따라 적절하게 선택하여 사용할 수 있었으면 좋겠다.
﻿SpringBoot에 Swagger 적용 　기본 SpringBoot 가 셋팅되어 있다는 가정하에 Swagger 관련 dependency를 추가해주자. 아참, 이제부터의 프로젝트 셋팅은 Gradle로 하려한다. (물론 Maven으로 해도 무방하지만&mldr;)
dependencies { implementation &#34;io.springfox:springfox-boot-starter:3.0.0&#34; } 　﻿이후 JavaConfig 을 아래와 같이 설정하는데 아래 내용은 아주 기본 세팅이니 자세한 내용은 공식 도큐문서를 참고해 보면 좋을 것 같다. (물론 샘플 프로젝트를 만들며 필요할 것 같은 내용은 아래에서 설명하겠다.)﻿
@EnableSwagger2 @Configuration public class SwaggerConfig { @Bean public Docket api() { return new Docket(DocumentationType.SWAGGER_2) .select() .apis(RequestHandlerSelectors.any()) .paths(PathSelectors.any()) .build(); } } 　﻿테스트할 컨트롤러를 아래처럼 심플하게 작성하고(사칙연산&mldr;) 실행을 시킨 후 /swagger-ui/에 접속을 해보면 swagger 관련 javaConfig 하나만 추가했는데 문서가 만들어진 것을 확인할 수 있다. (http method는 편의상 다양하게 작성했으니 왜 DELETE 인가라는 의문은 접어두자.)
@RestController public class SampleController { @GetMapping(value = &#34;/addition&#34;) public Integer addition(Integer num1, Integer num2) { return num1 + num2; } @PostMapping(value = &#34;/subtraction&#34;) public Integer subtraction(Integer num1, Integer num2) { return num1 - num2; } @PutMapping(value = &#34;/multiplication&#34;) public Integer multiplication(Integer num1, Integer num2) { return num1 * num2; } @DeleteMapping(value = &#34;/division&#34;) public Integer division(Integer num1, Integer num2) { return num1 / num2; } } 기본 셋팅만 했는데 이런 화면이 나타났다.&#34; 기본 셋팅만 했는데 이런 화면이 나타났다.  　﻿위에서 했던 설정들 중 몇 가지만 좀 더 자세히 살펴보자.
   설정 설명     Docket ﻿Springfox 프레임 워크의 기본 인터페이스가 될 빌더로 구성을 위한 여러 가지 기본값과 편리한 방법을 제공하고 있다. 이후 select()로 ApiSelectorBuilder를 반환받아 사용할 수 있도록 해준다.   apis ﻿어떤 위치에 있는 API들을 가져올 것인가에 대한 정의. RequestHandlerSelectors.any()이라고 했으니 SpringBoot에서 기본으로 제공하는 basic-error-controller 도 API 문서로 만들어진 것을 확인할 수 있다. 특정 패키지만 적용하기 위해서는 RequestHandlerSelectors.basePackage(&#34;com.taetaetae.swagger.api&#34;) 와 같은 형식으로 지정하면 해당 패키지 하위에 있는 Controller를 기준으로 문서를 만들어 준다﻿.   paths ﻿이름에서도 눈치를 챌 수 있듯이 특정 path만 필터링해서 문서를 만들어 준다.   useDefaultResponseMessages ﻿기본 http 응답 코드를 사용해야 하는지를 나타내는 플래그    ﻿이외에도 security 나 공통으로 사용되는 파라미터 등 다양한 옵션을 설정할 수 있으니 가능하면 상황에 맞게 설정을 변경해 보는 것도 좋을 것 같다. 다른 설정들을 추가시켜서 좀 더 친절하게 만들어 보면 아래처럼 만들 수 있고 해당 코드는 Github에서 확인 가능하다.
API 문서화는 최대한 친절하게!!&#34; API 문서화는 최대한 친절하게!!  OpenAPI 　﻿Swagger 공식 홈페이지를 이리저리 둘러보면 OpenAPI라는 내용이 많이 나온다. 그렇다면 OpenAPI는 무엇일까? 문서에 나와있는 내용을 직역해보면 Swagger 사양으로 알려져 있으며 RESTful 웹 서비스를 설명, 생성, 소비 및 시각화하기 위한 기계 판독 가능 인터페이스 파일에 대한 사양이라고 한다. 즉, API 자체를 설명하는 인터페이스 스펙이라고 이해를 해볼 수 있다. 위에서 만들어졌던 Swagger를 보면 http://localhost:8080/v2/api-docs?group=Test API 라고 나와있는데 이를 클릭해보면 아래와 같이 json 형태로 보인다."><meta property="og:type" content="article"><meta property="og:url" content="https://taetaetae.github.io/posts/openapi-and-swagger-ui-in-spring-boot/"><meta property="og:image" content="https://taetaetae.github.io/images/openapi-and-swagger-ui-in-spring-boot/main.png"><meta property="article:published_time" content="2020-12-20T11:42:40+09:00"><meta property="article:modified_time" content="2020-12-20T11:42:40+09:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://taetaetae.github.io/images/openapi-and-swagger-ui-in-spring-boot/main.png"><meta name=twitter:title content="OpenAPI 와 Swagger-ui 적용하기"><meta name=twitter:description content="﻿API를 개발하고 사용방법에 대한 명세를 작성하는 방법은 여러 가지가 있다. 가장 심플하게 개발 코드와는 별도로 직접 수기로 작성하여 파일 혹은 문서 링크를 전달하는 방법이 있다. 하지만 개발 코드와 별도로 직접 작성을 한다는 점에서 오타/실수가 발생할 수 있고 최신화가 안되는 여러 가지 문제가 발생한다. 그에 등장한 API 문서화 자동화 툴의 양대 산맥인 SpringRestDocs 와 Swagger.
　﻿과거 SpringRestDocs 에 대한 포스팅을 했기에 이번엔 Swagger에 대한 사용방법에 대해 정리해보고자 한다. 이 둘의 장단점은 너무 뚜렷하기에 API문서를 제공하는 상황에 따라 적절하게 선택하여 사용할 수 있었으면 좋겠다.
﻿SpringBoot에 Swagger 적용 　기본 SpringBoot 가 셋팅되어 있다는 가정하에 Swagger 관련 dependency를 추가해주자. 아참, 이제부터의 프로젝트 셋팅은 Gradle로 하려한다. (물론 Maven으로 해도 무방하지만&mldr;)
dependencies { implementation &#34;io.springfox:springfox-boot-starter:3.0.0&#34; } 　﻿이후 JavaConfig 을 아래와 같이 설정하는데 아래 내용은 아주 기본 세팅이니 자세한 내용은 공식 도큐문서를 참고해 보면 좋을 것 같다. (물론 샘플 프로젝트를 만들며 필요할 것 같은 내용은 아래에서 설명하겠다.)﻿
@EnableSwagger2 @Configuration public class SwaggerConfig { @Bean public Docket api() { return new Docket(DocumentationType.SWAGGER_2) .select() .apis(RequestHandlerSelectors.any()) .paths(PathSelectors.any()) .build(); } } 　﻿테스트할 컨트롤러를 아래처럼 심플하게 작성하고(사칙연산&mldr;) 실행을 시킨 후 /swagger-ui/에 접속을 해보면 swagger 관련 javaConfig 하나만 추가했는데 문서가 만들어진 것을 확인할 수 있다. (http method는 편의상 다양하게 작성했으니 왜 DELETE 인가라는 의문은 접어두자.)
@RestController public class SampleController { @GetMapping(value = &#34;/addition&#34;) public Integer addition(Integer num1, Integer num2) { return num1 + num2; } @PostMapping(value = &#34;/subtraction&#34;) public Integer subtraction(Integer num1, Integer num2) { return num1 - num2; } @PutMapping(value = &#34;/multiplication&#34;) public Integer multiplication(Integer num1, Integer num2) { return num1 * num2; } @DeleteMapping(value = &#34;/division&#34;) public Integer division(Integer num1, Integer num2) { return num1 / num2; } } 기본 셋팅만 했는데 이런 화면이 나타났다.&#34; 기본 셋팅만 했는데 이런 화면이 나타났다.  　﻿위에서 했던 설정들 중 몇 가지만 좀 더 자세히 살펴보자.
   설정 설명     Docket ﻿Springfox 프레임 워크의 기본 인터페이스가 될 빌더로 구성을 위한 여러 가지 기본값과 편리한 방법을 제공하고 있다. 이후 select()로 ApiSelectorBuilder를 반환받아 사용할 수 있도록 해준다.   apis ﻿어떤 위치에 있는 API들을 가져올 것인가에 대한 정의. RequestHandlerSelectors.any()이라고 했으니 SpringBoot에서 기본으로 제공하는 basic-error-controller 도 API 문서로 만들어진 것을 확인할 수 있다. 특정 패키지만 적용하기 위해서는 RequestHandlerSelectors.basePackage(&#34;com.taetaetae.swagger.api&#34;) 와 같은 형식으로 지정하면 해당 패키지 하위에 있는 Controller를 기준으로 문서를 만들어 준다﻿.   paths ﻿이름에서도 눈치를 챌 수 있듯이 특정 path만 필터링해서 문서를 만들어 준다.   useDefaultResponseMessages ﻿기본 http 응답 코드를 사용해야 하는지를 나타내는 플래그    ﻿이외에도 security 나 공통으로 사용되는 파라미터 등 다양한 옵션을 설정할 수 있으니 가능하면 상황에 맞게 설정을 변경해 보는 것도 좋을 것 같다. 다른 설정들을 추가시켜서 좀 더 친절하게 만들어 보면 아래처럼 만들 수 있고 해당 코드는 Github에서 확인 가능하다.
API 문서화는 최대한 친절하게!!&#34; API 문서화는 최대한 친절하게!!  OpenAPI 　﻿Swagger 공식 홈페이지를 이리저리 둘러보면 OpenAPI라는 내용이 많이 나온다. 그렇다면 OpenAPI는 무엇일까? 문서에 나와있는 내용을 직역해보면 Swagger 사양으로 알려져 있으며 RESTful 웹 서비스를 설명, 생성, 소비 및 시각화하기 위한 기계 판독 가능 인터페이스 파일에 대한 사양이라고 한다. 즉, API 자체를 설명하는 인터페이스 스펙이라고 이해를 해볼 수 있다. 위에서 만들어졌던 Swagger를 보면 http://localhost:8080/v2/api-docs?group=Test API 라고 나와있는데 이를 클릭해보면 아래와 같이 json 형태로 보인다."><meta name=application-name content="👨‍💻꿈꾸는 태태태의 공간"><meta name=apple-mobile-web-app-title content="👨‍💻꿈꾸는 태태태의 공간"><meta name=naver-site-verification content="2d1cdbb963ba178aa7cbf58500afc668cae1e645"><meta name=google-site-verification content="vvFCdv0-GuQhEWG8vtNJfA7YSY2HYQ1hpHh9P-a6Pv8"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://taetaetae.github.io/posts/openapi-and-swagger-ui-in-spring-boot/><link rel=prev href=https://taetaetae.github.io/posts/jenkins-job-parallel-processing-by-pipeline/><link rel=next href=https://taetaetae.github.io/posts/a-combination-of-swagger-and-spring-restdocs/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"OpenAPI 와 Swagger-ui 적용하기","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/taetaetae.github.io\/posts\/openapi-and-swagger-ui-in-spring-boot\/"},"genre":"posts","keywords":"Swagger, Swagger-ui, OpenAPI, archives-2020","wordcount":895,"url":"https:\/\/taetaetae.github.io\/posts\/openapi-and-swagger-ui-in-spring-boot\/","datePublished":"2020-12-20T11:42:40+09:00","dateModified":"2020-12-20T11:42:40+09:00","publisher":{"@type":"Organization","name":"태태태"},"author":{"@type":"Person","name":"태태태"},"description":""}</script></head><body header-desktop=auto header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':('auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark'))&&document.body.setAttribute('theme','dark');</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="👨‍💻꿈꾸는 태태태의 공간">👨‍💻꿈꾸는 태태태의 공간</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="👨‍💻꿈꾸는 태태태의 공간">👨‍💻꿈꾸는 태태태의 공간</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/>Posts</a><a class=menu-item href=/tags/>Tags</a><a class=menu-item href=/categories/>Categories</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:inline-block;width:260px;height:600px data-ad-client=ca-pub-5788330009690816 data-ad-slot=2248955907></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><article class="page single"><h1 class="single-title animated flipInX">OpenAPI 와 Swagger-ui 적용하기</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://taetaetae.github.io/resume title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw"></i>태태태</a></span>&nbsp;<span class=post-category>included in <a href=/categories/tech/><i class="far fa-folder fa-fw"></i>Tech</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2020-12-20>2020-12-20</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;895 words&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;5 minutes&nbsp;</div></div><div class=featured-image><img class=lazyload src=/svg/loading.min.svg data-src=/images/openapi-and-swagger-ui-in-spring-boot/main.png data-srcset="/images/openapi-and-swagger-ui-in-spring-boot/main.png, /images/openapi-and-swagger-ui-in-spring-boot/main.png 1.5x, /images/openapi-and-swagger-ui-in-spring-boot/main.png 2x" data-sizes=auto alt=/images/openapi-and-swagger-ui-in-spring-boot/main.png title=/images/openapi-and-swagger-ui-in-spring-boot/main.png></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#springboot에-swagger-적용>﻿SpringBoot에 Swagger 적용</a></li><li><a href=#openapi>OpenAPI</a></li><li><a href=#swaggerui>SwaggerUI</a></li><li><a href=#마치며>마치며</a></li></ul></nav></div></div><div class=content id=content><p>　﻿API를 개발하고 사용방법에 대한 명세를 작성하는 방법은 여러 가지가 있다. 가장 심플하게 개발 코드와는 별도로 직접 수기로 작성하여 파일 혹은 문서 링크를 전달하는 방법이 있다. 하지만 개발 코드와 별도로 직접 작성을 한다는 점에서 오타/실수가 발생할 수 있고 최신화가 안되는 여러 가지 문제가 발생한다. 그에 등장한 API 문서화 자동화 툴의 양대 산맥인 SpringRestDocs 와 Swagger.</p><p>　﻿과거 <a href=/2020/03/08/spring-rest-docs-in-spring-boot/ rel>SpringRestDocs 에 대한 포스팅</a>을 했기에 이번엔 Swagger에 대한 사용방법에 대해 정리해보고자 한다. 이 둘의 장단점은 너무 뚜렷하기에 API문서를 제공하는 상황에 따라 적절하게 선택하여 사용할 수 있었으면 좋겠다.</p><h2 id=springboot에-swagger-적용>﻿SpringBoot에 Swagger 적용</h2><p>　기본 SpringBoot 가 셋팅되어 있다는 가정하에 Swagger 관련 dependency를 추가해주자. 아참, 이제부터의 프로젝트 셋팅은 Gradle로 하려한다. (물론 Maven으로 해도 무방하지만&mldr;)</p><div class=highlight><pre class=chroma><code class=language-gradle data-lang=gradle><span class=n>dependencies</span> <span class=o>{</span>
    <span class=n>implementation</span> <span class=s2>&#34;io.springfox:springfox-boot-starter:3.0.0&#34;</span>
<span class=o>}</span>
</code></pre></div><p>　﻿이후 JavaConfig 을 아래와 같이 설정하는데 아래 내용은 아주 기본 세팅이니 자세한 내용은 <a href=https://springfox.github.io/springfox/docs/current/#springfox-spring-mvc-and-spring-boot target=_blank rel="noopener noreffer">공식 도큐문서</a>를 참고해 보면 좋을 것 같다. (물론 샘플 프로젝트를 만들며 필요할 것 같은 내용은 아래에서 설명하겠다.)﻿</p><div class=highlight><pre class=chroma><code class=language-java data-lang=java><span class=nd>@EnableSwagger2</span>
<span class=nd>@Configuration</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>SwaggerConfig</span> <span class=o>{</span>

	<span class=nd>@Bean</span>
	<span class=kd>public</span> <span class=n>Docket</span> <span class=nf>api</span><span class=o>()</span> <span class=o>{</span>
		<span class=k>return</span> <span class=k>new</span> <span class=n>Docket</span><span class=o>(</span><span class=n>DocumentationType</span><span class=o>.</span><span class=na>SWAGGER_2</span><span class=o>)</span>
			<span class=o>.</span><span class=na>select</span><span class=o>()</span>
			<span class=o>.</span><span class=na>apis</span><span class=o>(</span><span class=n>RequestHandlerSelectors</span><span class=o>.</span><span class=na>any</span><span class=o>())</span>
			<span class=o>.</span><span class=na>paths</span><span class=o>(</span><span class=n>PathSelectors</span><span class=o>.</span><span class=na>any</span><span class=o>())</span>
			<span class=o>.</span><span class=na>build</span><span class=o>();</span>
	<span class=o>}</span>
<span class=o>}</span>
</code></pre></div><p>　﻿테스트할 컨트롤러를 아래처럼 심플하게 작성하고(사칙연산&mldr;) 실행을 시킨 후 <code>/swagger-ui/</code>에 접속을 해보면 swagger 관련 javaConfig 하나만 추가했는데 문서가 만들어진 것을 확인할 수 있다. (http method는 편의상 다양하게 작성했으니 왜 DELETE 인가라는 의문은 접어두자.)</p><div class=highlight><pre class=chroma><code class=language-java data-lang=java><span class=nd>@RestController</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>SampleController</span> <span class=o>{</span>

	<span class=nd>@GetMapping</span><span class=o>(</span><span class=n>value</span> <span class=o>=</span> <span class=s>&#34;/addition&#34;</span><span class=o>)</span>
	<span class=kd>public</span> <span class=n>Integer</span> <span class=nf>addition</span><span class=o>(</span><span class=n>Integer</span> <span class=n>num1</span><span class=o>,</span> <span class=n>Integer</span> <span class=n>num2</span><span class=o>)</span> <span class=o>{</span>
		<span class=k>return</span> <span class=n>num1</span> <span class=o>+</span> <span class=n>num2</span><span class=o>;</span>
	<span class=o>}</span>

	<span class=nd>@PostMapping</span><span class=o>(</span><span class=n>value</span> <span class=o>=</span> <span class=s>&#34;/subtraction&#34;</span><span class=o>)</span>
	<span class=kd>public</span> <span class=n>Integer</span> <span class=nf>subtraction</span><span class=o>(</span><span class=n>Integer</span> <span class=n>num1</span><span class=o>,</span> <span class=n>Integer</span> <span class=n>num2</span><span class=o>)</span> <span class=o>{</span>
		<span class=k>return</span> <span class=n>num1</span> <span class=o>-</span> <span class=n>num2</span><span class=o>;</span>
	<span class=o>}</span>

	<span class=nd>@PutMapping</span><span class=o>(</span><span class=n>value</span> <span class=o>=</span> <span class=s>&#34;/multiplication&#34;</span><span class=o>)</span>
	<span class=kd>public</span> <span class=n>Integer</span> <span class=nf>multiplication</span><span class=o>(</span><span class=n>Integer</span> <span class=n>num1</span><span class=o>,</span> <span class=n>Integer</span> <span class=n>num2</span><span class=o>)</span> <span class=o>{</span>
		<span class=k>return</span> <span class=n>num1</span> <span class=o>*</span> <span class=n>num2</span><span class=o>;</span>
	<span class=o>}</span>

	<span class=nd>@DeleteMapping</span><span class=o>(</span><span class=n>value</span> <span class=o>=</span> <span class=s>&#34;/division&#34;</span><span class=o>)</span>
	<span class=kd>public</span> <span class=n>Integer</span> <span class=nf>division</span><span class=o>(</span><span class=n>Integer</span> <span class=n>num1</span><span class=o>,</span> <span class=n>Integer</span> <span class=n>num2</span><span class=o>)</span> <span class=o>{</span>
		<span class=k>return</span> <span class=n>num1</span> <span class=o>/</span> <span class=n>num2</span><span class=o>;</span>
	<span class=o>}</span>
<span class=o>}</span>
</code></pre></div><figure><a class=lightgallery href=/images/openapi-and-swagger-ui-in-spring-boot/default-config.png title=/images/openapi-and-swagger-ui-in-spring-boot/default-config.png data-thumbnail=/images/openapi-and-swagger-ui-in-spring-boot/default-config.png data-sub-html="<h2>기본 셋팅만 했는데 이런 화면이 나타났다.</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/images/openapi-and-swagger-ui-in-spring-boot/default-config.png data-srcset="/images/openapi-and-swagger-ui-in-spring-boot/default-config.png, /images/openapi-and-swagger-ui-in-spring-boot/default-config.png 1.5x, /images/openapi-and-swagger-ui-in-spring-boot/default-config.png 2x" data-sizes=auto alt=/images/openapi-and-swagger-ui-in-spring-boot/default-config.png width=80%></a><figcaption class=image-caption>기본 셋팅만 했는데 이런 화면이 나타났다.</figcaption></figure><p>　﻿위에서 했던 설정들 중 몇 가지만 좀 더 자세히 살펴보자.</p><table><thead><tr><th>설정</th><th>설명</th></tr></thead><tbody><tr><td>Docket</td><td>﻿Springfox 프레임 워크의 기본 인터페이스가 될 빌더로 구성을 위한 여러 가지 기본값과 편리한 방법을 제공하고 있다. 이후 <code>select()</code>로 ApiSelectorBuilder를 반환받아 사용할 수 있도록 해준다.</td></tr><tr><td>apis</td><td>﻿어떤 위치에 있는 API들을 가져올 것인가에 대한 정의. <code>RequestHandlerSelectors.any()</code>이라고 했으니 SpringBoot에서 기본으로 제공하는 <code>basic-error-controller</code> 도 API 문서로 만들어진 것을 확인할 수 있다. 특정 패키지만 적용하기 위해서는 <code>RequestHandlerSelectors.basePackage("com.taetaetae.swagger.api")</code> 와 같은 형식으로 지정하면 해당 패키지 하위에 있는 Controller를 기준으로 문서를 만들어 준다﻿.</td></tr><tr><td>paths</td><td>﻿이름에서도 눈치를 챌 수 있듯이 특정 path만 필터링해서 문서를 만들어 준다.</td></tr><tr><td>useDefaultResponseMessages</td><td>﻿기본 http 응답 코드를 사용해야 하는지를 나타내는 플래그</td></tr></tbody></table><p>﻿이외에도 security 나 공통으로 사용되는 파라미터 등 다양한 옵션을 설정할 수 있으니 가능하면 상황에 맞게 설정을 변경해 보는 것도 좋을 것 같다. 다른 설정들을 추가시켜서 좀 더 친절하게 만들어 보면 아래처럼 만들 수 있고 해당 코드는 <a href=https://github.com/taetaetae/Swagger-In-SpringBoot target=_blank rel="noopener noreffer">Github</a>에서 확인 가능하다.</p><figure><a class=lightgallery href=/images/openapi-and-swagger-ui-in-spring-boot/change-config.png title=/images/openapi-and-swagger-ui-in-spring-boot/change-config.png data-thumbnail=/images/openapi-and-swagger-ui-in-spring-boot/change-config.png data-sub-html="<h2>API 문서화는 최대한 친절하게!!</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/images/openapi-and-swagger-ui-in-spring-boot/change-config.png data-srcset="/images/openapi-and-swagger-ui-in-spring-boot/change-config.png, /images/openapi-and-swagger-ui-in-spring-boot/change-config.png 1.5x, /images/openapi-and-swagger-ui-in-spring-boot/change-config.png 2x" data-sizes=auto alt=/images/openapi-and-swagger-ui-in-spring-boot/change-config.png width=80%></a><figcaption class=image-caption>API 문서화는 최대한 친절하게!!</figcaption></figure><h2 id=openapi>OpenAPI</h2><p>　﻿Swagger 공식 홈페이지를 이리저리 둘러보면 OpenAPI라는 내용이 많이 나온다. 그렇다면 OpenAPI는 무엇일까? 문서에 나와있는 내용을 직역해보면 Swagger 사양으로 알려져 있으며 RESTful 웹 서비스를 설명, 생성, 소비 및 시각화하기 위한 기계 판독 가능 인터페이스 파일에 대한 사양이라고 한다. 즉, API 자체를 설명하는 인터페이스 스펙이라고 이해를 해볼 수 있다. 위에서 만들어졌던 Swagger를 보면 http://localhost:8080/v2/api-docs?group=Test API 라고 나와있는데 이를 클릭해보면 아래와 같이 json 형태로 보인다. 다시 보면 우리가 이제까지 Swagger으로 만든 API 문서를 설명하는 인터페이스 스펙으로 이해할 수 있다. (꽤 길어서 덧셈 API를 제외하고 지웠다.) 그렇다면 이 JSON 파일을 어떻게 활용할 수 있을까?﻿</p><div class=highlight><pre class=chroma><code class=language-json data-lang=json><span class=p>{</span>
  <span class=nt>&#34;swagger&#34;</span><span class=p>:</span> <span class=s2>&#34;2.0&#34;</span><span class=p>,</span>
  <span class=nt>&#34;info&#34;</span><span class=p>:</span> <span class=p>{</span>
    <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;스웨거를 활용해서 API문서를 만들어보아요&#34;</span><span class=p>,</span>
    <span class=nt>&#34;version&#34;</span><span class=p>:</span> <span class=s2>&#34;1.0.1&#34;</span><span class=p>,</span>
    <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;사칙연산 API&#34;</span><span class=p>,</span>
    <span class=nt>&#34;termsOfService&#34;</span><span class=p>:</span> <span class=s2>&#34;https://taetaetae.github.io&#34;</span><span class=p>,</span>
    <span class=nt>&#34;contact&#34;</span><span class=p>:</span> <span class=p>{</span>
      <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;taetaetae&#34;</span><span class=p>,</span>
      <span class=nt>&#34;url&#34;</span><span class=p>:</span> <span class=s2>&#34;https://taetaetae.github.io/resume&#34;</span><span class=p>,</span>
      <span class=nt>&#34;email&#34;</span><span class=p>:</span> <span class=s2>&#34;taetaetae_@naver.com&#34;</span>
    <span class=p>}</span>
  <span class=p>},</span>
  <span class=nt>&#34;host&#34;</span><span class=p>:</span> <span class=s2>&#34;localhost:8080&#34;</span><span class=p>,</span>
  <span class=nt>&#34;basePath&#34;</span><span class=p>:</span> <span class=s2>&#34;/&#34;</span><span class=p>,</span>
  <span class=nt>&#34;tags&#34;</span><span class=p>:</span> <span class=p>[</span>
    <span class=p>{</span>
      <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;sample-controller&#34;</span><span class=p>,</span>
      <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;Sample Controller&#34;</span>
    <span class=p>}</span>
  <span class=p>],</span>
  <span class=nt>&#34;paths&#34;</span><span class=p>:</span> <span class=p>{</span>
    <span class=nt>&#34;/addition&#34;</span><span class=p>:</span> <span class=p>{</span>
      <span class=nt>&#34;get&#34;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&#34;tags&#34;</span><span class=p>:</span> <span class=p>[</span>
          <span class=s2>&#34;sample-controller&#34;</span>
        <span class=p>],</span>
        <span class=nt>&#34;summary&#34;</span><span class=p>:</span> <span class=s2>&#34;덧셈&#34;</span><span class=p>,</span>
        <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;num1 과 num2 를 더합니다.&#34;</span><span class=p>,</span>
        <span class=nt>&#34;operationId&#34;</span><span class=p>:</span> <span class=s2>&#34;additionUsingGET&#34;</span><span class=p>,</span>
        <span class=nt>&#34;produces&#34;</span><span class=p>:</span> <span class=p>[</span>
          <span class=s2>&#34;*/*&#34;</span>
        <span class=p>],</span>
        <span class=nt>&#34;parameters&#34;</span><span class=p>:</span> <span class=p>[</span>
          <span class=p>{</span>
            <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;num1&#34;</span><span class=p>,</span>
            <span class=nt>&#34;in&#34;</span><span class=p>:</span> <span class=s2>&#34;query&#34;</span><span class=p>,</span>
            <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;num1&#34;</span><span class=p>,</span>
            <span class=nt>&#34;required&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
            <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;integer&#34;</span><span class=p>,</span>
            <span class=nt>&#34;format&#34;</span><span class=p>:</span> <span class=s2>&#34;int32&#34;</span>
          <span class=p>},</span>
          <span class=p>{</span>
            <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;num2&#34;</span><span class=p>,</span>
            <span class=nt>&#34;in&#34;</span><span class=p>:</span> <span class=s2>&#34;query&#34;</span><span class=p>,</span>
            <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;num2&#34;</span><span class=p>,</span>
            <span class=nt>&#34;required&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
            <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;integer&#34;</span><span class=p>,</span>
            <span class=nt>&#34;format&#34;</span><span class=p>:</span> <span class=s2>&#34;int32&#34;</span>
          <span class=p>}</span>
        <span class=p>],</span>
        <span class=nt>&#34;responses&#34;</span><span class=p>:</span> <span class=p>{</span>
          <span class=nt>&#34;200&#34;</span><span class=p>:</span> <span class=p>{</span>
            <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;OK&#34;</span><span class=p>,</span>
            <span class=nt>&#34;schema&#34;</span><span class=p>:</span> <span class=p>{</span>
              <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;integer&#34;</span><span class=p>,</span>
              <span class=nt>&#34;format&#34;</span><span class=p>:</span> <span class=s2>&#34;int32&#34;</span>
            <span class=p>}</span>
          <span class=p>}</span>
        <span class=p>}</span>
      <span class=p>}</span>
    <span class=p>}</span>
  <span class=p>}</span>
<span class=p>}</span>
</code></pre></div><h2 id=swaggerui>SwaggerUI</h2><p>　﻿이것도 <a href=https://swagger.io/tools/swagger-ui/ target=_blank rel="noopener noreffer">공식 홈페이지</a>를 보면, 별도 구현 로직 없이도 API 리소스를 시각화할 수 있다고 나와있다. 즉, 위에서 했던 것들은 문서화가 포함되어 있는 application 을 별도의 서버로 띄워야 했지만 SwaggerUI를 사용하면 그럴 필요가 없다는 것. 다시 말하면, A라는 application 과 B라는 application 이 있다고 가정했을 때 위에서 했던 방식으로 하면 A, B 각각 서버를 띄워서 API 문서를 시각화할 수 있었지만 SwaggerUI를 사용하면 공통으로 하나의 서버에서 (SwaggerUI 가 운영되는 서버) OpenAPI 스펙에 맞춘 문서만 있으면 모두 표현이 가능하다는 것. 이러면 OpenAPI 스펙에 맞춰서 API 문서를 만들면 한곳에서 볼 수 있으니 너무 편하지 않을까? (특히 MSA 환경에서.) 당장 해보자.﻿</p><p>　﻿<a href=https://github.com/swagger-api/swagger-ui/blob/master/docs/usage/installation.md target=_blank rel="noopener noreffer">도큐먼트</a>에는 NPM Registry, Docker, unpkg 방법을 제시하고 있는데 필자는 Docker로 설치해보고자 한다. (Docker 좀 자주 접해보고 싶어서&mldr;) CentOS 환경에서 아무것도 설치되어 있지 않아있다는 가정하에 설치를 해보면 다음과 같은 순서로 진행된다.﻿</p><div class=highlight><pre class=chroma><code class=language-markdown data-lang=markdown><span class=gh># yum 최신 업데이트
</span><span class=gh></span>sudo yum update

<span class=gh># docker 설치 및 시작
</span><span class=gh></span>sudo yum install docker
sudo systemctl start docker

<span class=gh># swagger-ui docker 이미지 pull 
</span><span class=gh></span>sudo docker pull swaggerapi/swagger-ui

<span class=gh># docker 이미지 run, 백그라운드 모드로, 
</span><span class=gh></span>docker run -d -p 80:8080 -e SWAGGER_JSON=/mnt/api.json -v /home/test:/mnt swaggerapi/swagger-ui
</code></pre></div><p>　﻿앞서 json 을 <code>/home/test</code>하위에 <code>api.json</code>이라는 파일로 만들어두고 이미지를 띄운 뒤 서버의 80 port로 접근을 해보면 아래와 같이 앞서 직접 서버를 띄워서 했던 것처럼 동일하게 보인다. (wow)</p><figure><a class=lightgallery href=/images/openapi-and-swagger-ui-in-spring-boot/swagger-ui-docker.png title=/images/openapi-and-swagger-ui-in-spring-boot/swagger-ui-docker.png data-thumbnail=/images/openapi-and-swagger-ui-in-spring-boot/swagger-ui-docker.png data-sub-html="<h2>한 곳으로 모을수 있다는 큰 장점이 있다.</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/images/openapi-and-swagger-ui-in-spring-boot/swagger-ui-docker.png data-srcset="/images/openapi-and-swagger-ui-in-spring-boot/swagger-ui-docker.png, /images/openapi-and-swagger-ui-in-spring-boot/swagger-ui-docker.png 1.5x, /images/openapi-and-swagger-ui-in-spring-boot/swagger-ui-docker.png 2x" data-sizes=auto alt=/images/openapi-and-swagger-ui-in-spring-boot/swagger-ui-docker.png width=80%></a><figcaption class=image-caption>한 곳으로 모을수 있다는 큰 장점이 있다.</figcaption></figure><h2 id=마치며>마치며</h2><p>　﻿사실 Swagger를 SpringBoot에 적용하기까지만 포스팅하려다 SwaggerUI까지 해보게 되었다. 새로운 기술이 있으면 감으로만 수박 겉핥기 식으로 보는 것보다 직접 내가 해보았는지가 정말 중요한 것 같다. SpringRestDocs 보다 훨씬 빠르고 가벼운 설정으로 문서화가 가능했지만 테스트 코드 없이 검증되지 않은 API 문서가 만들어진다는 불안함은 감출 수 없었다. 이게 정답이다 할 건 아니지만 둘 다 각자의 장점이 뚜렷하기 때문에 상황에 따라 잘 선택해서 사용해야 하겠다.</p></div><center><style>.bmc-button img{width:27px!important;margin-bottom:1px!important;box-shadow:none!important;border:none!important;vertical-align:middle!important}.bmc-button{line-height:29px!important;height:30px!important;text-decoration:none!important;display:inline-flex!important;color:#000!important;background-color:#fd0!important;border-radius:3px!important;border:1px solid transparent!important;padding:1px 9px!important;font-size:22px!important;letter-spacing:.6px!important;box-shadow:0 1px 2px rgba(190,190,190,.5)!important;-webkit-box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;margin:0 auto!important;font-family:cookie,cursive!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;-o-transition:.3s all linear!important;-webkit-transition:.3s all linear!important;-moz-transition:.3s all linear!important;-ms-transition:.3s all linear!important;transition:.3s all linear!important}.bmc-button:hover,.bmc-button:active,.bmc-button:focus{-webkit-box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;text-decoration:none!important;box-shadow:0 1px 2px 2px rgba(190,190,190,.5)!important;opacity:.85!important;color:#000!important}</style><link href="https://fonts.googleapis.com/css?family=Cookie" rel=stylesheet><center><br><a class=bmc-button target=_blank href=https://www.buymeacoffee.com/taetaetae><img src=https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg alt="Buy me a coffee"><span style=margin-left:5px>Buy me a coffee</span></a>
<a href=https://bit.ly/ddbSupport target=_blank><img src=https://i.imgur.com/peaYpjh.png style=height:28px></a></center><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2020-12-20</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://taetaetae.github.io/posts/openapi-and-swagger-ui-in-spring-boot/ data-title="OpenAPI 와 Swagger-ui 적용하기" data-hashtags=Swagger,Swagger-ui,OpenAPI,archives-2020><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://taetaetae.github.io/posts/openapi-and-swagger-ui-in-spring-boot/ data-hashtag=Swagger><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://taetaetae.github.io/posts/openapi-and-swagger-ui-in-spring-boot/><i class="fab fa-linkedin fa-fw"></i></a><a href=javascript:void(0); title="Share on Blogger" data-sharer=blogger data-url=https://taetaetae.github.io/posts/openapi-and-swagger-ui-in-spring-boot/ data-title="OpenAPI 와 Swagger-ui 적용하기" data-description><i class="fab fa-blogger fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/swagger/>Swagger</a>,&nbsp;<a href=/tags/swagger-ui/>Swagger-ui</a>,&nbsp;<a href=/tags/openapi/>OpenAPI</a>,&nbsp;<a href=/tags/archives-2020/>archives-2020</a></section><section><span><a href=javascript:void(0); onclick=window.history.back();>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/jenkins-job-parallel-processing-by-pipeline/ class=prev rel=prev title="Jenkins Job을 병렬로 실행해서 속도를 개선해보자. (by. Pipeline)"><i class="fas fa-angle-left fa-fw"></i>Jenkins Job을 병렬로 실행해서 속도를 개선해보자. (by. Pipeline)</a>
<a href=/posts/a-combination-of-swagger-and-spring-restdocs/ class=next rel=next title="Swagger와 Spring Restdocs의 우아한 조합 (by OpenAPI Spec)">Swagger와 Spring Restdocs의 우아한 조합 (by OpenAPI Spec)<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments><div id=utterances></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://utteranc.es/>Utterances</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.74.3">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i>LoveIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2016 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://taetaetae.github.io/resume target=_blank>태태태</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i></a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=/lib/lightgallery/lightgallery.min.css><script type=text/javascript src=/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/lightgallery/lightgallery.min.js></script><script type=text/javascript src=/lib/lightgallery/lg-thumbnail.min.js></script><script type=text/javascript src=/lib/lightgallery/lg-zoom.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript>window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":500},"comment":{"utterances":{"darkTheme":"github-dark","issueTerm":"pathname","label":"Comment","lightTheme":"github-light","repo":"taetaetae/blog-comment"}},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true}};</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','UA-86432198-1',{'anonymize_ip':true});</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=UA-86432198-1" async></script></body></html>