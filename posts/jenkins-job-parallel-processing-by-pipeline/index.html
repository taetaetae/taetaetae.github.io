<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Jenkins Job을 병렬로 실행해서 속도를 개선해보자. (by. Pipeline) -</title><meta property="og:title" content="Jenkins Job을 병렬로 실행해서 속도를 개선해보자. (by. Pipeline)"><meta property="og:description" content="﻿　관리하는 URL이 200응답을 주고 있는지 모니터링을 한다고 가정해보자. 다양한 방법이 생각나겠지만 가장 처음으로 떠오른 건 단연 Jenkins. 간단하게 사용할 언어에 맞춰 Execute Script를 작성하고 스케줄링을 걸어 놓으면 큰 수고 없이 모니터링을 구성할 수 있게 된다. …"><meta property="og:url" content="https://taetaetae.github.io/posts/jenkins-job-parallel-processing-by-pipeline/"><meta property="og:image" content="https://taetaetae.github.io/images/jenkins-job-parallel-processing-by-pipeline/pipeline.jpg"><meta property="og:type" content="article"><meta property="article:published_time" content="2020-12-06T20:19:47+09:00"><meta property="article:modified_time" content="2020-12-06T20:19:47+09:00"><meta property="article:author" content="map[email: link:https://taetaetae.github.io/resume name:태태태]"><meta property="article:section" content="posts"><meta property="article:tag" content="jenkins"><meta property="article:tag" content="pipeline"><meta property="article:tag" content="archives-2020"><meta property="og:locale" content="en"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Jenkins Job을 병렬로 실행해서 속도를 개선해보자. (by. Pipeline)"><meta name=twitter:description content="﻿　관리하는 URL이 200응답을 주고 있는지 모니터링을 한다고 가정해보자. 다양한 방법이 생각나겠지만 가장 처음으로 떠오른 건 단연 Jenkins. 간단하게 사용할 언어에 맞춰 Execute Script를 작성하고 스케줄링을 걸어 놓으면 큰 수고 없이 모니터링을 구성할 수 있게 된다. …"><meta name=twitter:image content="https://taetaetae.github.io/images/jenkins-job-parallel-processing-by-pipeline/pipeline.jpg"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://taetaetae.github.io/posts/jenkins-job-parallel-processing-by-pipeline/><link rel=prev href=https://taetaetae.github.io/posts/blog-reorganization-by-hugo/><link rel=next href=https://taetaetae.github.io/posts/openapi-and-swagger-ui-in-spring-boot/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Jenkins Job을 병렬로 실행해서 속도를 개선해보자. (by. Pipeline)","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/taetaetae.github.io\/posts\/jenkins-job-parallel-processing-by-pipeline\/"},"genre":"posts","keywords":"jenkins, pipeline, archives-2020","wordcount":935,"url":"https:\/\/taetaetae.github.io\/posts\/jenkins-job-parallel-processing-by-pipeline\/","datePublished":"2020-12-06T20:19:47+09:00","dateModified":"2020-12-06T20:19:47+09:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"태태태"},"description":""}</script></head><body data-header-desktop=auto data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title>👨‍💻꿈꾸는 태태태의 공간</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title>👨‍💻꿈꾸는 태태태의 공간</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categories</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Jenkins Job을 병렬로 실행해서 속도를 개선해보자. (by. Pipeline)</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://taetaetae.github.io/resume title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>태태태</a></span>&nbsp;<span class=post-category>included in <a href=/categories/tech/><i class="far fa-folder fa-fw" aria-hidden=true></i>Tech</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2020-12-06>2020-12-06</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;935 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;5 minutes&nbsp;</div></div><div class=featured-image><img class=lazyload src=/svg/loading.min.svg data-src=/images/jenkins-job-parallel-processing-by-pipeline/pipeline.jpg data-srcset="/images/jenkins-job-parallel-processing-by-pipeline/pipeline.jpg, /images/jenkins-job-parallel-processing-by-pipeline/pipeline.jpg 1.5x, /images/jenkins-job-parallel-processing-by-pipeline/pipeline.jpg 2x" data-sizes=auto alt=/images/jenkins-job-parallel-processing-by-pipeline/pipeline.jpg title=/images/jenkins-job-parallel-processing-by-pipeline/pipeline.jpg></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#기존상황>기존상황</a></li><li><a href=#개선을-해보자>개선을 해보자</a><ul><li><a href=#job을-범용적으로-jenkins-paramters-활용>Job을 범용적으로 (Jenkins paramters 활용)</a></li><li><a href=#병렬-실행을-위한-jenkins-설정>병렬 실행을 위한 Jenkins 설정</a></li><li><a href=#jenkins-pipeline>Jenkins Pipeline</a></li></ul></li><li><a href=#개선-결과>개선 결과</a></li><li><a href=#마치며>마치며</a></li></ul></nav></div></div><div class=content id=content><p>﻿　관리하는 URL이 <code>200</code>응답을 주고 있는지 모니터링을 한다고 가정해보자. 다양한 방법이 생각나겠지만 가장 처음으로 떠오른 건 단연 <code>Jenkins</code>. 간단하게 사용할 언어에 맞춰 <code>Execute Script</code>를 작성하고 스케줄링을 걸어 놓으면 큰 수고 없이 모니터링을 구성할 수 있게 된다. 아래는 python script로 작성해 보았다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl><span class=n>url</span><span class=o>=</span><span class=s2>&#34;http://모니터링url&#34;</span>
</span></span><span class=line><span class=cl><span class=n>status_code</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>)</span><span class=o>.</span><span class=n>status_code</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>status_code</span> <span class=o>!=</span> <span class=mi>200</span><span class=p>:</span>
</span></span><span class=line><span class=cl>	<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;응답 실패 :</span><span class=si>{</span><span class=n>url</span><span class=si>}</span><span class=s1>, status : </span><span class=si>{</span><span class=n>status_code</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=n>exit</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span></code></pre></div><p>﻿　하지만 모니터링을 해야 하는 URL이 1개에서 여러 개로 늘어난다면 어떻게 될까? 단순하게 작성한 Script를 아래처럼 약간 수정하면 되긴 하지만 URL마다 응답속도가 다를 경우 순차적으로 실행하다 보니 실행 속도는 느릴 수밖에 없다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl><span class=n>urls</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;http://모니터링url-1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;http://모니터링url-2&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;http://모니터링url-3&#34;</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>url</span> <span class=ow>in</span> <span class=n>urls</span><span class=p>:</span>
</span></span><span class=line><span class=cl>	<span class=n>status_code</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>)</span><span class=o>.</span><span class=n>status_code</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=n>status_code</span> <span class=o>!=</span> <span class=mi>200</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;응답 실패 :</span><span class=si>{</span><span class=n>url</span><span class=si>}</span><span class=s1>, status : </span><span class=si>{</span><span class=n>status_code</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=n>exit</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span></code></pre></div><p>﻿
　이러한 경우, 빠른 속도를 보장하기 위해서는 병렬로 실행을 해야 한다는 건 누구나 다 알지만 그렇다고 Thread를 사용하기엔 벌써부터 덜컥 부담이 된다. 그렇다고 Job을 URL 개수만큼 늘리기에는 배보다 배꼽이 더 커버리고&mldr; 그러다 발견한 기능이 바로 Jenkins Pipeline!</p><p>　이번 포스팅에서는 Jenkins Job을 동시에 여러 번 사용해야 하는 경우를 Pipeline을 통해서 개선한 내용에 대하여 공유해보려 한다. Jenkins Pipeline에 대해 들어만 봤는데 이번에 실제로 사용해보니 생각보다 쉽게 개선할 수 있었고 옵션들을 상황에 맞게 조합을 잘 한다면 상당히 활용성이 높아 보이는 기능인 것 같다.</p><h2 id=기존상황>기존상황</h2><p>　테﻿스트를 위해 임의로 느린 응답을 생성하도록 URL을 구성하고 위에서 이야기했던 것처럼 Job 하나에 아주 심플하게 Python script를 작성하고 실행해보도록 하자. 임의로 느린 응답은 <a href=http://slowwly.robertomurray.co.uk/ target=_blank rel="noopener noreffer">http://slowwly.robertomurray.co.uk/</a> 에서 제공하는 기능을 활용하였다.﻿</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl><span class=n>urls</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;http://slowwly.robertomurray.co.uk/delay/0/url/https://www.naver.com/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;http://slowwly.robertomurray.co.uk/delay/100/url/https://www.naver.com/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;http://slowwly.robertomurray.co.uk/delay/200/url/https://www.naver.com/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;http://slowwly.robertomurray.co.uk/delay/500/url/https://www.naver.com/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;http://slowwly.robertomurray.co.uk/delay/1000/url/https://www.naver.com/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;http://slowwly.robertomurray.co.uk/delay/2000/url/https://www.naver.com/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;http://slowwly.robertomurray.co.uk/delay/5000/url/https://www.naver.com/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;http://slowwly.robertomurray.co.uk/delay/10000/url/https://www.naver.com/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;http://slowwly.robertomurray.co.uk/delay/20000/url/https://www.naver.com/&#34;</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>url</span> <span class=ow>in</span> <span class=n>urls</span><span class=p>:</span>
</span></span><span class=line><span class=cl>	<span class=n>status_code</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>)</span><span class=o>.</span><span class=n>status_code</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=n>status_code</span> <span class=o>!=</span> <span class=mi>200</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;응답 실패 :</span><span class=si>{</span><span class=n>url</span><span class=si>}</span><span class=s1>, status : </span><span class=si>{</span><span class=n>status_code</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=n>exit</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;응답성공 : </span><span class=si>{</span><span class=n>url</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span></code></pre></div><p>그래서 실행해보면 50초가 소요되었다. 자, 이제 개선을 해보자!</p><h2 id=개선을-해보자>개선을 해보자</h2><p>　﻿전체적인 개선의 흐름은 하나의 Job에 모니터링하고자 하는 url을 파라미터로 받아서 처리할 수 있도록 설정하고, 이를 Jenkins Pipeline 을 통해 여러 URL을 동시에 모니터링하게 구성하는 것이다. 그러면 두 개의 Job(파라미터로 받아 모니터링하는 Job, Jenkins Pipeline Job) 만으로 보다 빠르고 효율적인 구성을 할 수 있을 것으로 상상을 하고.</p><h3 id=job을-범용적으로-jenkins-paramters-활용>Job을 범용적으로 (Jenkins paramters 활용)</h3><p>　﻿위에서 샘플로 작성하였던 Python script는 url 이 늘어날수록 Job 안에 script를 수정해야 한다. 그렇게 해도 무방하지만 이번 개선의 목표는 하나의 Job을 Pipeline 이 병렬로 컨트롤하도록 설정해야 했기 때문에 Jenkins Job에 파라미터를 받을 수 있도록 아래처럼 Jenkins Job 설정에 파라미터를 설정하고 Python script 또한 수정해 주자.</p><figure><a class=lightgallery href=/images/jenkins-job-parallel-processing-by-pipeline/jenkins-parameter-option.jpg title=/images/jenkins-job-parallel-processing-by-pipeline/jenkins-parameter-option.jpg data-thumbnail=/images/jenkins-job-parallel-processing-by-pipeline/jenkins-parameter-option.jpg data-sub-html="<h2>﻿Job > 구성 > 이 빌드는 매개변수가 있습니다</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/images/jenkins-job-parallel-processing-by-pipeline/jenkins-parameter-option.jpg data-srcset="/images/jenkins-job-parallel-processing-by-pipeline/jenkins-parameter-option.jpg, /images/jenkins-job-parallel-processing-by-pipeline/jenkins-parameter-option.jpg 1.5x, /images/jenkins-job-parallel-processing-by-pipeline/jenkins-parameter-option.jpg 2x" data-sizes=auto alt=/images/jenkins-job-parallel-processing-by-pipeline/jenkins-parameter-option.jpg width=80%></a><figcaption class=image-caption>﻿Job > 구성 > <code>이 빌드는 매개변수가 있습니다</code></figcaption></figure><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span><span class=o>,</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=n>url</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>[</span><span class=s1>&#39;url&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>status_code</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>)</span><span class=o>.</span><span class=n>status_code</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>status_code</span> <span class=o>!=</span> <span class=mi>200</span><span class=p>:</span>
</span></span><span class=line><span class=cl>  <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;응답 실패 :</span><span class=si>{</span><span class=n>url</span><span class=si>}</span><span class=s1>, status : </span><span class=si>{</span><span class=n>status_code</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>exit</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;응답성공 : </span><span class=si>{</span><span class=n>url</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=병렬-실행을-위한-jenkins-설정>병렬 실행을 위한 Jenkins 설정</h3><p>　﻿Jenkins Job 을 생성하면 기본적으로 Job마다의 대기열(Queue)이 있어 Job이 실행 중이라면 시작된 시간 순서대로 기다렸다가 앞선 Job이 종료가 되면 이어서 실행되는 구조이다. 하지만 우리는 Job을 병렬로 실행해야 했기에 Job 설정 중 <code>필요한 경우 concurrent 빌드 실행</code> 옵션을 켜줘서 기다리지 않고 병렬로 실행될 수 있도록 해준다.</p><figure><a class=lightgallery href=/images/jenkins-job-parallel-processing-by-pipeline/jenkins-concurrent-build-option.jpg title=/images/jenkins-job-parallel-processing-by-pipeline/jenkins-concurrent-build-option.jpg data-thumbnail=/images/jenkins-job-parallel-processing-by-pipeline/jenkins-concurrent-build-option.jpg data-sub-html="<h2>﻿Job > 구성 > 필요한 경우 concurrent 빌드 실행</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/images/jenkins-job-parallel-processing-by-pipeline/jenkins-concurrent-build-option.jpg data-srcset="/images/jenkins-job-parallel-processing-by-pipeline/jenkins-concurrent-build-option.jpg, /images/jenkins-job-parallel-processing-by-pipeline/jenkins-concurrent-build-option.jpg 1.5x, /images/jenkins-job-parallel-processing-by-pipeline/jenkins-concurrent-build-option.jpg 2x" data-sizes=auto alt=/images/jenkins-job-parallel-processing-by-pipeline/jenkins-concurrent-build-option.jpg width=80%></a><figcaption class=image-caption>﻿Job > 구성 > <code>필요한 경우 concurrent 빌드 실행</code></figcaption></figure><p>　﻿또한 Jenkins Job 자체는 병렬로 실행되도록 설정되었다 해도 기본적으로 Jenkins 자체의 대기열은 한정되어 있기 때문에 적당히 늘려줘서 여러 개의 Job이 대기 열 없이 동시에 실행될 수 있도록 해준다.</p><figure><a class=lightgallery href=/images/jenkins-job-parallel-processing-by-pipeline/jenkins-executors.jpg title=/images/jenkins-job-parallel-processing-by-pipeline/jenkins-executors.jpg data-thumbnail=/images/jenkins-job-parallel-processing-by-pipeline/jenkins-executors.jpg data-sub-html="<h2>﻿Jenkins > Jenkins 관리 > 시스템 설정 > of executors</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/images/jenkins-job-parallel-processing-by-pipeline/jenkins-executors.jpg data-srcset="/images/jenkins-job-parallel-processing-by-pipeline/jenkins-executors.jpg, /images/jenkins-job-parallel-processing-by-pipeline/jenkins-executors.jpg 1.5x, /images/jenkins-job-parallel-processing-by-pipeline/jenkins-executors.jpg 2x" data-sizes=auto alt=/images/jenkins-job-parallel-processing-by-pipeline/jenkins-executors.jpg width=80%></a><figcaption class=image-caption>﻿Jenkins > Jenkins 관리 > 시스템 설정 > <code>of executors</code></figcaption></figure><h3 id=jenkins-pipeline>Jenkins Pipeline</h3><p>　﻿Job 을 Pipeline으로 만들고 Pipeline scirpt를 작성하는데 눈여겨봐야 할 옵션들을 짚고 넘어가고자 한다.</p><ul><li>﻿우선 Pipeline에 의해 Job을 병렬로 실행을 해야 하기 때문에 아래와 같은 형식으로 작성을 해주자. 참고 : <a href=https://www.jenkins.io/doc/book/pipeline/syntax/#parallel target=_blank rel="noopener noreffer">공식문서</a></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>stages</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>stage</span><span class=o>(</span><span class=s1>&#39;전체 pipeline 의 이름&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>parallel</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl>            <span class=n>stage</span><span class=o>(</span><span class=s1>&#39;한 step의 이름&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>steps</span><span class=o>{</span> 
</span></span><span class=line><span class=cl>                    <span class=n>build</span> <span class=n>job</span> <span class=o>:</span> <span class=s1>&#39;heath-check&#39;</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><ul><li>﻿그다음 앞서만든 Jenkins Job에 파라미터를 받을 수 있도록 해두었기에 파라미터 설정을 해주자. 참고 : <a href=https://www.jenkins.io/doc/book/pipeline/syntax/#parameters target=_blank rel="noopener noreffer">공식문서</a></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>steps</span><span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=n>build</span> <span class=n>job</span> <span class=o>:</span> <span class=s1>&#39;heath-check&#39;</span><span class=o>,</span> 
</span></span><span class=line><span class=cl>    <span class=nl>parameters:</span> <span class=o>[</span> 
</span></span><span class=line><span class=cl>        <span class=n>string</span><span class=o>(</span><span class=nl>name:</span> <span class=s1>&#39;url&#39;</span><span class=o>,</span> <span class=nl>value:</span> <span class=s1>&#39;http://slowwly.robertomurray.co.uk/delay/0/url/https://www.naver.com/&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>]</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><ul><li>﻿마지막으로 하나라도 실패가 나면 모든 병렬 실행 중인 Job을 중단하고 해당 Pipeline의 결과를 &lsquo;실패&rsquo;로 해야 하기 때문에 <code>parallelsAlwaysFailFast</code> 옵션을 추가해 주자. 참고 : <a href=https://www.jenkins.io/doc/book/pipeline/syntax/#options target=_blank rel="noopener noreffer">공식문서</a> > parallelsAlwaysFailFast</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>options</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>parallelsAlwaysFailFast</span><span class=o>()</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>﻿위의 설정을 종합해보면 아래와 같은 groovy script 가 작성이 된다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>pipeline</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>agent</span> <span class=n>any</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>options</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>parallelsAlwaysFailFast</span><span class=o>()</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>stages</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>stage</span><span class=o>(</span><span class=s1>&#39;health-check&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>parallel</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl>                <span class=n>stage</span><span class=o>(</span><span class=s1>&#39;url-1&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>steps</span><span class=o>{</span> 
</span></span><span class=line><span class=cl>                        <span class=n>build</span> <span class=n>job</span> <span class=o>:</span> <span class=s1>&#39;health-check&#39;</span><span class=o>,</span> 
</span></span><span class=line><span class=cl>                        <span class=nl>parameters:</span> <span class=o>[</span> 
</span></span><span class=line><span class=cl>                            <span class=n>string</span><span class=o>(</span><span class=nl>name:</span> <span class=s1>&#39;url&#39;</span><span class=o>,</span> <span class=nl>value:</span> <span class=s1>&#39;http://slowwly.robertomurray.co.uk/delay/0/url/https://www.naver.com/&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                        <span class=o>]</span>
</span></span><span class=line><span class=cl>                    <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=n>stage</span><span class=o>(</span><span class=s1>&#39;url-2&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>steps</span><span class=o>{</span> 
</span></span><span class=line><span class=cl>                        <span class=n>build</span> <span class=n>job</span> <span class=o>:</span> <span class=s1>&#39;health-check&#39;</span><span class=o>,</span> 
</span></span><span class=line><span class=cl>                        <span class=nl>parameters:</span> <span class=o>[</span> 
</span></span><span class=line><span class=cl>                            <span class=n>string</span><span class=o>(</span><span class=nl>name:</span> <span class=s1>&#39;url&#39;</span><span class=o>,</span> <span class=nl>value:</span> <span class=s1>&#39;http://slowwly.robertomurray.co.uk/delay/100/url/https://www.naver.com/&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                        <span class=o>]</span>
</span></span><span class=line><span class=cl>                    <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=n>stage</span><span class=o>(</span><span class=s1>&#39;url-3&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>steps</span><span class=o>{</span> 
</span></span><span class=line><span class=cl>                        <span class=n>build</span> <span class=n>job</span> <span class=o>:</span> <span class=s1>&#39;health-check&#39;</span><span class=o>,</span> 
</span></span><span class=line><span class=cl>                        <span class=nl>parameters:</span> <span class=o>[</span> 
</span></span><span class=line><span class=cl>                            <span class=n>string</span><span class=o>(</span><span class=nl>name:</span> <span class=s1>&#39;url&#39;</span><span class=o>,</span> <span class=nl>value:</span> <span class=s1>&#39;http://slowwly.robertomurray.co.uk/delay/200/url/https://www.naver.com/&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                        <span class=o>]</span>
</span></span><span class=line><span class=cl>                    <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=n>stage</span><span class=o>(</span><span class=s1>&#39;url-4&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>steps</span><span class=o>{</span> 
</span></span><span class=line><span class=cl>                        <span class=n>build</span> <span class=n>job</span> <span class=o>:</span> <span class=s1>&#39;health-check&#39;</span><span class=o>,</span> 
</span></span><span class=line><span class=cl>                        <span class=nl>parameters:</span> <span class=o>[</span> 
</span></span><span class=line><span class=cl>                            <span class=n>string</span><span class=o>(</span><span class=nl>name:</span> <span class=s1>&#39;url&#39;</span><span class=o>,</span> <span class=nl>value:</span> <span class=s1>&#39;http://slowwly.robertomurray.co.uk/delay/500/url/https://www.naver.com/&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                        <span class=o>]</span>
</span></span><span class=line><span class=cl>                    <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=n>stage</span><span class=o>(</span><span class=s1>&#39;url-5&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>steps</span><span class=o>{</span> 
</span></span><span class=line><span class=cl>                        <span class=n>build</span> <span class=n>job</span> <span class=o>:</span> <span class=s1>&#39;health-check&#39;</span><span class=o>,</span> 
</span></span><span class=line><span class=cl>                        <span class=nl>parameters:</span> <span class=o>[</span> 
</span></span><span class=line><span class=cl>                            <span class=n>string</span><span class=o>(</span><span class=nl>name:</span> <span class=s1>&#39;url&#39;</span><span class=o>,</span> <span class=nl>value:</span> <span class=s1>&#39;http://slowwly.robertomurray.co.uk/delay/1000/url/https://www.naver.com/&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                        <span class=o>]</span>
</span></span><span class=line><span class=cl>                    <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=n>stage</span><span class=o>(</span><span class=s1>&#39;url-6&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>steps</span><span class=o>{</span> 
</span></span><span class=line><span class=cl>                        <span class=n>build</span> <span class=n>job</span> <span class=o>:</span> <span class=s1>&#39;health-check&#39;</span><span class=o>,</span> 
</span></span><span class=line><span class=cl>                        <span class=nl>parameters:</span> <span class=o>[</span> 
</span></span><span class=line><span class=cl>                            <span class=n>string</span><span class=o>(</span><span class=nl>name:</span> <span class=s1>&#39;url&#39;</span><span class=o>,</span> <span class=nl>value:</span> <span class=s1>&#39;http://slowwly.robertomurray.co.uk/delay/2000/url/https://www.naver.com/&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                        <span class=o>]</span>
</span></span><span class=line><span class=cl>                    <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=n>stage</span><span class=o>(</span><span class=s1>&#39;url-7&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>steps</span><span class=o>{</span> 
</span></span><span class=line><span class=cl>                        <span class=n>build</span> <span class=n>job</span> <span class=o>:</span> <span class=s1>&#39;health-check&#39;</span><span class=o>,</span> 
</span></span><span class=line><span class=cl>                        <span class=nl>parameters:</span> <span class=o>[</span> 
</span></span><span class=line><span class=cl>                            <span class=n>string</span><span class=o>(</span><span class=nl>name:</span> <span class=s1>&#39;url&#39;</span><span class=o>,</span> <span class=nl>value:</span> <span class=s1>&#39;http://slowwly.robertomurray.co.uk/delay/5000/url/https://www.naver.com/&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                        <span class=o>]</span>
</span></span><span class=line><span class=cl>                    <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=n>stage</span><span class=o>(</span><span class=s1>&#39;url-8&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>steps</span><span class=o>{</span> 
</span></span><span class=line><span class=cl>                        <span class=n>build</span> <span class=n>job</span> <span class=o>:</span> <span class=s1>&#39;health-check&#39;</span><span class=o>,</span> 
</span></span><span class=line><span class=cl>                        <span class=nl>parameters:</span> <span class=o>[</span> 
</span></span><span class=line><span class=cl>                            <span class=n>string</span><span class=o>(</span><span class=nl>name:</span> <span class=s1>&#39;url&#39;</span><span class=o>,</span> <span class=nl>value:</span> <span class=s1>&#39;http://slowwly.robertomurray.co.uk/delay/10000/url/https://www.naver.com/&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                        <span class=o>]</span>
</span></span><span class=line><span class=cl>                    <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=n>stage</span><span class=o>(</span><span class=s1>&#39;url-9&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>steps</span><span class=o>{</span> 
</span></span><span class=line><span class=cl>                        <span class=n>build</span> <span class=n>job</span> <span class=o>:</span> <span class=s1>&#39;health-check&#39;</span><span class=o>,</span> 
</span></span><span class=line><span class=cl>                        <span class=nl>parameters:</span> <span class=o>[</span> 
</span></span><span class=line><span class=cl>                            <span class=n>string</span><span class=o>(</span><span class=nl>name:</span> <span class=s1>&#39;url&#39;</span><span class=o>,</span> <span class=nl>value:</span> <span class=s1>&#39;http://slowwly.robertomurray.co.uk/delay/20000/url/https://www.naver.com/&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                        <span class=o>]</span>
</span></span><span class=line><span class=cl>                    <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=개선-결과>개선 결과</h2><p>﻿　예시로 들었던 상황에서 얼마나 개선이 되었을까? 기존에 하나의 Job에서 순차적으로 진행하게 했을 경우 44초가 걸렸는데, Jenkins Pipeline 을 사용하여 Job을 병렬로 실행하게 하였더니 21초가 걸렸다. 즉, 44초에서 21초. 약 53%의 개선을 할 수 있게 되었다. 또한 아래 그림처럼 도중에 실패가 발생했을 경우 Pipeline 자체가 실패를 하게 되고 실행 중이던 다른 Job들도 중단이 되기 때문에 병렬 프로세스의 컨트롤 또한 간단하면서도 강력하게 할 수 있게 되었다.</p><figure><a class=lightgallery href=/images/jenkins-job-parallel-processing-by-pipeline/pipeline-fail.jpg title=/images/jenkins-job-parallel-processing-by-pipeline/pipeline-fail.jpg data-thumbnail=/images/jenkins-job-parallel-processing-by-pipeline/pipeline-fail.jpg data-sub-html="<h2>실패가 발생하자 다른 Job들도 중단된것을 볼 수 있다.</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/images/jenkins-job-parallel-processing-by-pipeline/pipeline-fail.jpg data-srcset="/images/jenkins-job-parallel-processing-by-pipeline/pipeline-fail.jpg, /images/jenkins-job-parallel-processing-by-pipeline/pipeline-fail.jpg 1.5x, /images/jenkins-job-parallel-processing-by-pipeline/pipeline-fail.jpg 2x" data-sizes=auto alt=/images/jenkins-job-parallel-processing-by-pipeline/pipeline-fail.jpg width=80%></a><figcaption class=image-caption>실패가 발생하자 다른 Job들도 중단된것을 볼 수 있다.</figcaption></figure><h2 id=마치며>마치며</h2><p>﻿　사실 이 글을 작성하면서도 단순하게 Thread로 돌려버리면 되지 않을까라는 의문이 들었지만 보다 효율적인 기능이 있다면 실제로 테스트를 해보고 비교를 하며 검토를 해보는 것도 좋은 방법이 될 것 같았고, 나아가 늘 하던 방법만 고수하지 않고 새로운 것에 눈을 돌려보는 자세도 필요하다고 생각을 해본다. 위에서 들었던 예시는 아주 극단적인 예시지만 이러한 Jenkins Pipiline이라는 방법을 알고 있다면 이 또한 나만의 무기가 되어 다른 상황에서도 다양하게 활용해볼 수 있지 않을까 하는 기대를 해본다. (무려, groovy script 또한 이번에 처음 써보는&mldr; )</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2020-12-06</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://taetaetae.github.io/posts/jenkins-job-parallel-processing-by-pipeline/ data-title="Jenkins Job을 병렬로 실행해서 속도를 개선해보자. (by. Pipeline)" data-hashtags=jenkins,pipeline,archives-2020><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://taetaetae.github.io/posts/jenkins-job-parallel-processing-by-pipeline/ data-hashtag=jenkins><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://taetaetae.github.io/posts/jenkins-job-parallel-processing-by-pipeline/><i class="fab fa-linkedin fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://taetaetae.github.io/posts/jenkins-job-parallel-processing-by-pipeline/ data-title="Jenkins Job을 병렬로 실행해서 속도를 개선해보자. (by. Pipeline)"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://taetaetae.github.io/posts/jenkins-job-parallel-processing-by-pipeline/ data-title="Jenkins Job을 병렬로 실행해서 속도를 개선해보자. (by. Pipeline)"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://taetaetae.github.io/posts/jenkins-job-parallel-processing-by-pipeline/ data-title="Jenkins Job을 병렬로 실행해서 속도를 개선해보자. (by. Pipeline)" data-image=/images/jenkins-job-parallel-processing-by-pipeline/pipeline.jpg><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Blogger" data-sharer=blogger data-url=https://taetaetae.github.io/posts/jenkins-job-parallel-processing-by-pipeline/ data-title="Jenkins Job을 병렬로 실행해서 속도를 개선해보자. (by. Pipeline)" data-description><i class="fab fa-blogger fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/jenkins/>Jenkins</a>,&nbsp;<a href=/tags/pipeline/>Pipeline</a>,&nbsp;<a href=/tags/archives-2020/>Archives-2020</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/blog-reorganization-by-hugo/ class=prev rel=prev title="기술블로그 개편기 (by HUGO)"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>기술블로그 개편기 (by HUGO)</a>
<a href=/posts/openapi-and-swagger-ui-in-spring-boot/ class=next rel=next title="OpenAPI 와 Swagger-ui 적용하기">OpenAPI 와 Swagger-ui 적용하기<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=utterances class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://utteranc.es/>utterances</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.147.9">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.3.0"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2016 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://taetaetae.github.io/resume target=_blank>태태태</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:500},comment:{utterances:{darkTheme:"github-dark",issueTerm:"pathname",label:"Comment",lightTheme:"github-light",repo:"taetaetae/blog-comment"}},lightgallery:!0}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-86432198-1",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=UA-86432198-1" async></script></body></html>